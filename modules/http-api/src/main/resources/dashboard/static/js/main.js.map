{"version":3,"mappings":"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","names":["m","require$$0","createRoot","f","k","l","n","p","q","c","a","g","b","d","e","h","reactJsxRuntime_production_min","jsxRuntimeModule","severityStyles","bannerStyle","iconStyle","messageStyle","dismissStyle","getIcon","severity","jsx","ErrorBanner","message","visible","dismissable","onDismiss","jsxs","styles","ErrorPanel","errors","initialExpanded","onGotoLine","expanded","setExpanded","useState","error","index","ErrorItem","itemStyles","line","column","code","sourceContext","suggestion","handleGotoLine","contextLine","lineNum","isErrorLine","getStorageKey","scriptPath","InputPresets","onLoadPreset","onSavePreset","presets","setPresets","showDropdown","setShowDropdown","showSaveDialog","setShowSaveDialog","newPresetName","setNewPresetName","hoveredIndex","setHoveredIndex","dropdownPosition","setDropdownPosition","buttonRef","useRef","useEffect","stored","savePresetsToStorage","useCallback","newPresets","handleLoadPreset","preset","handleDeletePreset","_","i","toggleDropdown","rect","openSaveDialog","cancelSaveDialog","handleSave","handleKeyDown","name","inputs","handleClickOutside","target","dropdown","createPortal","ModuleBrowser","modules","onClose","onInsertModule","searchQuery","setSearchQuery","selectedCategory","setSelectedCategory","selectedModule","setSelectedModule","categories","useMemo","cats","filteredModules","filtered","query","handleCategoryClick","category","handleInsert","module","cat","ModuleCard","ModuleDetail","cardStyles","selected","onClick","detailStyles","onInsert","inputEntries","outputEntries","args","type","example","formatDuration","ms","getStatusStyle","status","ValueInspector","nodeValue","nodeName","nodeId","value","durationMs","JsonTreeView","treeStyles","expandDepth","depth","propertyKey","isExpandable","val","getType","renderPrimitive","displayVal","renderCollapsedPreview","Fragment","keys","expandableValue","keyPart","entries","v","openBracket","closeBracket","key","childVal","formatTimestamp","ts","ProfileView","profile","onNodeClick","sortMode","setSortMode","hoveredNode","setHoveredNode","sortedNodes","nodes","timelineMarks","total","mark","node","left","width","MonacoEditor","lazy","__vitePreload","App","onInsertCode","globalError","setGlobalError","setModules","showModuleBrowser","setShowModuleBrowser","compileErrors","setCompileErrors","selectedNodeValue","setSelectedNodeValue","showValueInspector","setShowValueInspector","currentScriptPath","setCurrentScriptPath","executionProfile","setExecutionProfile","showProfileView","setShowProfileView","showMonacoEditor","setShowMonacoEditor","monacoValue","setMonacoValue","errorBannerMount","setErrorBannerMount","inputPresetsMount","setInputPresetsMount","errorPanelMount","setErrorPanelMount","loadModules","moduleBrowserBtn","profileViewBtn","monacoEditorBtn","handlers","prev","btn","handler","reactBridge","msg","match","response","moduleList","handleDismissError","handleInsertModule","_module","handleSavePreset","handleCloseValueInspector","handleCloseProfileView","handleProfileNodeClick","handleMonacoChange","monacoMethods","_a","handleMonacoSave","Suspense","FileBrowser","containerId","onFileSelect","__publicField","data","files","file","parent","chevron","folder","item","contents","folderElement","path","isCollapsed","itemElement","previousSelected","text","div","DagVisualizer","onNodeSelect","evt","kind","label","typeSig","html","truncated","renderedPos","container","neighborhood","dagVizIR","nodeSignatures","edgeSignatures","newHash","elements","cyNode","borderColor","_b","_c","_d","color","edge","taxiDir","direction","state","updates","png","link","useExecutionStore","create","set","_get","id","dagName","newNodeStates","_outputs","ExecutionWebSocket","executionId","resolve","reject","url","event","store","subscribeToExecution","ws","capitalizeStatus","startExecutionWithVisualization","dagVisualizer","unsubscribe","lastNodeStates","storeUnsubscribe","nodeState","lastState","ExecutionPanel","options","inputsForm","outputsDisplay","input","rawDefault","defaultValue","values","element","result","duration","errorMessage","filter","limit","historyList","executions","scriptsBtn","exec","detailContainer","execution","statusClass","timestamp","CodeEditor","ta","start","end","source","lines","pos","lineHeight","requestId","keywords","keywordPattern","types","typePattern","PipelinesPanel","pipeline","primaryAlias","hashShort","aliasDisplay","otherAliases","el","action","card","alias","hash","ref","detail","detailResp","resultContainer","versionsPanel","version","checks","panel","weightPct","oldMetrics","newMetrics","oldErrorRate","newErrorRate","missingEntries","additionalInputs","fileResp","compileResp","intervalMs","prefix","typeLower","schema","isoString","reactRoot","ConstellationDashboard","reactRootElement","appProps","createElement","nodeData","splitHandle","splitContainer","editorContainer","isDragging","pct","clamped","savedValues","filterTimeout","view","scriptData","kindClass","loadingText"],"ignoreList":[0,1,2],"sources":["../../../../../../../../dashboard/node_modules/react-dom/client.js","../../../../../../../../dashboard/node_modules/react/cjs/react-jsx-runtime.production.min.js","../../../../../../../../dashboard/node_modules/react/jsx-runtime.js","../../../../../../../../dashboard/src/components/ErrorBanner.tsx","../../../../../../../../dashboard/src/components/ErrorPanel.tsx","../../../../../../../../dashboard/src/components/InputPresets.tsx","../../../../../../../../dashboard/src/components/ModuleBrowser.tsx","../../../../../../../../dashboard/src/components/ValueInspector.tsx","../../../../../../../../dashboard/src/components/ProfileView.tsx","../../../../../../../../dashboard/src/App.tsx","../../../../../../../../dashboard/src/components/file-browser.ts","../../../../../../../../dashboard/src/components/dag-visualizer.ts","../../../../../../../../dashboard/src/store/execution.store.ts","../../../../../../../../dashboard/src/services/websocket.ts","../../../../../../../../dashboard/src/hooks/useExecutionVisualization.ts","../../../../../../../../dashboard/src/components/execution-panel.ts","../../../../../../../../dashboard/src/components/code-editor.ts","../../../../../../../../dashboard/src/components/pipelines-panel.ts","../../../../../../../../dashboard/src/main.ts"],"sourcesContent":["'use strict';\n\nvar m = require('react-dom');\nif (process.env.NODE_ENV === 'production') {\n  exports.createRoot = m.createRoot;\n  exports.hydrateRoot = m.hydrateRoot;\n} else {\n  var i = m.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED;\n  exports.createRoot = function(c, o) {\n    i.usingClientEntryPoint = true;\n    try {\n      return m.createRoot(c, o);\n    } finally {\n      i.usingClientEntryPoint = false;\n    }\n  };\n  exports.hydrateRoot = function(c, h, o) {\n    i.usingClientEntryPoint = true;\n    try {\n      return m.hydrateRoot(c, h, o);\n    } finally {\n      i.usingClientEntryPoint = false;\n    }\n  };\n}\n","/**\n * @license React\n * react-jsx-runtime.production.min.js\n *\n * Copyright (c) Facebook, Inc. and its affiliates.\n *\n * This source code is licensed under the MIT license found in the\n * LICENSE file in the root directory of this source tree.\n */\n'use strict';var f=require(\"react\"),k=Symbol.for(\"react.element\"),l=Symbol.for(\"react.fragment\"),m=Object.prototype.hasOwnProperty,n=f.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED.ReactCurrentOwner,p={key:!0,ref:!0,__self:!0,__source:!0};\nfunction q(c,a,g){var b,d={},e=null,h=null;void 0!==g&&(e=\"\"+g);void 0!==a.key&&(e=\"\"+a.key);void 0!==a.ref&&(h=a.ref);for(b in a)m.call(a,b)&&!p.hasOwnProperty(b)&&(d[b]=a[b]);if(c&&c.defaultProps)for(b in a=c.defaultProps,a)void 0===d[b]&&(d[b]=a[b]);return{$$typeof:k,type:c,key:e,ref:h,props:d,_owner:n.current}}exports.Fragment=l;exports.jsx=q;exports.jsxs=q;\n","'use strict';\n\nif (process.env.NODE_ENV === 'production') {\n  module.exports = require('./cjs/react-jsx-runtime.production.min.js');\n} else {\n  module.exports = require('./cjs/react-jsx-runtime.development.js');\n}\n","/**\r\n * Constellation Dashboard - Error Banner Component\r\n *\r\n * A React component for displaying error messages with optional dismiss action.\r\n */\r\n\r\nimport { CSSProperties } from 'react';\r\n\r\nexport type Severity = 'error' | 'warning' | 'info';\r\n\r\nexport interface ErrorBannerProps {\r\n  message: string;\r\n  visible?: boolean;\r\n  dismissable?: boolean;\r\n  severity?: Severity;\r\n  onDismiss?: () => void;\r\n}\r\n\r\nconst severityStyles: Record<Severity, CSSProperties> = {\r\n  error: {\r\n    background: 'rgba(248, 81, 73, 0.1)',\r\n    border: '1px solid var(--status-failed, #f85149)',\r\n    color: 'var(--status-failed, #f85149)',\r\n  },\r\n  warning: {\r\n    background: 'rgba(255, 166, 87, 0.1)',\r\n    border: '1px solid var(--node-literal, #ffa657)',\r\n    color: 'var(--node-literal, #ffa657)',\r\n  },\r\n  info: {\r\n    background: 'rgba(88, 166, 255, 0.1)',\r\n    border: '1px solid var(--accent-primary, #58a6ff)',\r\n    color: 'var(--accent-primary, #58a6ff)',\r\n  },\r\n};\r\n\r\nconst bannerStyle: CSSProperties = {\r\n  display: 'flex',\r\n  alignItems: 'flex-start',\r\n  gap: 'var(--spacing-sm, 8px)',\r\n  padding: 'var(--spacing-sm, 8px) var(--spacing-md, 12px)',\r\n  borderRadius: 'var(--radius-sm, 4px)',\r\n  fontSize: '13px',\r\n  lineHeight: 1.4,\r\n};\r\n\r\nconst iconStyle: CSSProperties = {\r\n  flexShrink: 0,\r\n  width: '16px',\r\n  height: '16px',\r\n};\r\n\r\nconst messageStyle: CSSProperties = {\r\n  flex: 1,\r\n  wordBreak: 'break-word',\r\n};\r\n\r\nconst dismissStyle: CSSProperties = {\r\n  flexShrink: 0,\r\n  background: 'none',\r\n  border: 'none',\r\n  padding: 0,\r\n  cursor: 'pointer',\r\n  color: 'inherit',\r\n  opacity: 0.7,\r\n};\r\n\r\nfunction getIcon(severity: Severity) {\r\n  switch (severity) {\r\n    case 'error':\r\n      return (\r\n        <svg style={iconStyle} viewBox=\"0 0 24 24\" fill=\"currentColor\">\r\n          <path d=\"M12 2C6.48 2 2 6.48 2 12s4.48 10 10 10 10-4.48 10-10S17.52 2 12 2zm1 15h-2v-2h2v2zm0-4h-2V7h2v6z\" />\r\n        </svg>\r\n      );\r\n    case 'warning':\r\n      return (\r\n        <svg style={iconStyle} viewBox=\"0 0 24 24\" fill=\"currentColor\">\r\n          <path d=\"M1 21h22L12 2 1 21zm12-3h-2v-2h2v2zm0-4h-2v-4h2v4z\" />\r\n        </svg>\r\n      );\r\n    case 'info':\r\n      return (\r\n        <svg style={iconStyle} viewBox=\"0 0 24 24\" fill=\"currentColor\">\r\n          <path d=\"M12 2C6.48 2 2 6.48 2 12s4.48 10 10 10 10-4.48 10-10S17.52 2 12 2zm1 15h-2v-6h2v6zm0-8h-2V7h2v2z\" />\r\n        </svg>\r\n      );\r\n  }\r\n}\r\n\r\nexport function ErrorBanner({\r\n  message,\r\n  visible = false,\r\n  dismissable = true,\r\n  severity = 'error',\r\n  onDismiss,\r\n}: ErrorBannerProps) {\r\n  if (!visible) return null;\r\n\r\n  return (\r\n    <div style={{ ...bannerStyle, ...severityStyles[severity] }}>\r\n      {getIcon(severity)}\r\n      <span style={messageStyle}>{message}</span>\r\n      {dismissable && (\r\n        <button\r\n          style={dismissStyle}\r\n          onClick={onDismiss}\r\n          aria-label=\"Dismiss\"\r\n          onMouseEnter={(e) => (e.currentTarget.style.opacity = '1')}\r\n          onMouseLeave={(e) => (e.currentTarget.style.opacity = '0.7')}\r\n        >\r\n          <svg style={{ width: '16px', height: '16px' }} viewBox=\"0 0 24 24\" fill=\"currentColor\">\r\n            <path d=\"M19 6.41L17.59 5 12 10.59 6.41 5 5 6.41 10.59 12 5 17.59 6.41 19 12 13.41 17.59 19 19 17.59 13.41 12z\" />\r\n          </svg>\r\n        </button>\r\n      )}\r\n    </div>\r\n  );\r\n}\r\n\r\nexport default ErrorBanner;\r\n","/**\r\n * Constellation Dashboard - Error Panel Component\r\n *\r\n * A React component that displays compilation errors with source context,\r\n * line numbers, and suggestions. Supports goto-line functionality.\r\n */\r\n\r\nimport { useState, CSSProperties } from 'react';\r\n\r\nexport interface CompileError {\r\n  code?: string;\r\n  message: string;\r\n  line?: number;\r\n  column?: number;\r\n  sourceContext?: string[];\r\n  suggestion?: string;\r\n}\r\n\r\nexport interface ErrorPanelProps {\r\n  errors: CompileError[];\r\n  expanded?: boolean;\r\n  onGotoLine?: (line: number, column?: number) => void;\r\n}\r\n\r\nconst styles: Record<string, CSSProperties> = {\r\n  panel: {\r\n    background: 'var(--bg-secondary, #161b22)',\r\n    borderRadius: 'var(--radius-md, 6px)',\r\n    overflow: 'hidden',\r\n  },\r\n  header: {\r\n    display: 'flex',\r\n    alignItems: 'center',\r\n    justifyContent: 'space-between',\r\n    padding: 'var(--spacing-sm, 8px) var(--spacing-md, 12px)',\r\n    fontSize: '12px',\r\n    fontWeight: 600,\r\n    color: 'var(--text-secondary, #8b949e)',\r\n    borderBottom: '1px solid var(--border-primary, #30363d)',\r\n    cursor: 'pointer',\r\n    userSelect: 'none',\r\n  },\r\n  headerLeft: {\r\n    display: 'flex',\r\n    alignItems: 'center',\r\n    gap: 'var(--spacing-sm, 8px)',\r\n  },\r\n  errorCount: {\r\n    background: 'var(--status-failed, #f85149)',\r\n    color: 'var(--bg-primary, #0d1117)',\r\n    padding: '0 6px',\r\n    borderRadius: '10px',\r\n    fontSize: '11px',\r\n  },\r\n  empty: {\r\n    padding: 'var(--spacing-md, 16px)',\r\n    textAlign: 'center',\r\n    color: 'var(--text-muted, #6e7681)',\r\n    fontStyle: 'italic',\r\n  },\r\n  errorList: {\r\n    maxHeight: '300px',\r\n    overflowY: 'auto',\r\n  },\r\n};\r\n\r\nexport function ErrorPanel({ errors, expanded: initialExpanded = true, onGotoLine }: ErrorPanelProps) {\r\n  const [expanded, setExpanded] = useState(initialExpanded);\r\n\r\n  return (\r\n    <div style={styles.panel}>\r\n      <div\r\n        style={styles.header}\r\n        onClick={() => setExpanded(!expanded)}\r\n        onMouseEnter={(e) => (e.currentTarget.style.background = 'var(--bg-hover, #30363d)')}\r\n        onMouseLeave={(e) => (e.currentTarget.style.background = 'transparent')}\r\n      >\r\n        <div style={styles.headerLeft}>\r\n          <svg\r\n            viewBox=\"0 0 24 24\"\r\n            width=\"16\"\r\n            height=\"16\"\r\n            fill=\"currentColor\"\r\n            style={{\r\n              transition: 'transform 0.2s ease',\r\n              transform: expanded ? 'rotate(0deg)' : 'rotate(-90deg)',\r\n            }}\r\n          >\r\n            <path d=\"M7 10l5 5 5-5z\" />\r\n          </svg>\r\n          <span>Problems</span>\r\n          {errors.length > 0 && <span style={styles.errorCount}>{errors.length}</span>}\r\n        </div>\r\n      </div>\r\n\r\n      {expanded && (\r\n        <div>\r\n          {errors.length === 0 ? (\r\n            <div style={styles.empty}>No errors</div>\r\n          ) : (\r\n            <div style={styles.errorList}>\r\n              {errors.map((error, index) => (\r\n                <ErrorItem key={index} error={error} onGotoLine={onGotoLine} />\r\n              ))}\r\n            </div>\r\n          )}\r\n        </div>\r\n      )}\r\n    </div>\r\n  );\r\n}\r\n\r\ninterface ErrorItemProps {\r\n  error: CompileError;\r\n  onGotoLine?: (line: number, column?: number) => void;\r\n}\r\n\r\nconst itemStyles: Record<string, CSSProperties> = {\r\n  errorItem: {\r\n    padding: 'var(--spacing-sm, 8px) var(--spacing-md, 12px)',\r\n    borderBottom: '1px solid var(--border-secondary, #21262d)',\r\n    transition: 'background 0.15s ease',\r\n  },\r\n  errorHeader: {\r\n    display: 'flex',\r\n    alignItems: 'flex-start',\r\n    gap: 'var(--spacing-sm, 8px)',\r\n  },\r\n  errorIcon: {\r\n    flexShrink: 0,\r\n    width: '16px',\r\n    height: '16px',\r\n    color: 'var(--status-failed, #f85149)',\r\n    marginTop: '2px',\r\n  },\r\n  errorContent: {\r\n    flex: 1,\r\n    minWidth: 0,\r\n  },\r\n  errorMessage: {\r\n    fontSize: '13px',\r\n    color: 'var(--text-primary, #f0f6fc)',\r\n    lineHeight: 1.4,\r\n    wordBreak: 'break-word',\r\n  },\r\n  errorLocation: {\r\n    display: 'flex',\r\n    alignItems: 'center',\r\n    gap: 'var(--spacing-sm, 8px)',\r\n    marginTop: 'var(--spacing-xs, 4px)',\r\n    fontSize: '12px',\r\n  },\r\n  errorLocationLink: {\r\n    color: 'var(--accent-primary, #58a6ff)',\r\n    cursor: 'pointer',\r\n    display: 'flex',\r\n    alignItems: 'center',\r\n    gap: '4px',\r\n  },\r\n  errorCode: {\r\n    color: 'var(--text-muted, #6e7681)',\r\n    fontFamily: \"'SF Mono', 'Consolas', monospace\",\r\n  },\r\n  sourceContext: {\r\n    marginTop: 'var(--spacing-sm, 8px)',\r\n    background: 'var(--bg-tertiary, #21262d)',\r\n    borderRadius: 'var(--radius-sm, 4px)',\r\n    padding: 'var(--spacing-sm, 8px)',\r\n    fontFamily: \"'SF Mono', 'Consolas', monospace\",\r\n    fontSize: '12px',\r\n    overflowX: 'auto',\r\n  },\r\n  contextLine: {\r\n    display: 'flex',\r\n    lineHeight: 1.5,\r\n  },\r\n  lineNumber: {\r\n    color: 'var(--text-muted, #6e7681)',\r\n    minWidth: '3ch',\r\n    textAlign: 'right',\r\n    paddingRight: 'var(--spacing-sm, 8px)',\r\n    userSelect: 'none',\r\n  },\r\n  lineContent: {\r\n    color: 'var(--text-primary, #f0f6fc)',\r\n    whiteSpace: 'pre',\r\n  },\r\n  errorLineContent: {\r\n    color: 'var(--status-failed, #f85149)',\r\n    whiteSpace: 'pre',\r\n  },\r\n  caretLine: {\r\n    paddingLeft: 'calc(3ch + var(--spacing-sm, 8px))',\r\n    color: 'var(--status-failed, #f85149)',\r\n    whiteSpace: 'pre',\r\n  },\r\n  suggestion: {\r\n    marginTop: 'var(--spacing-sm, 8px)',\r\n    padding: 'var(--spacing-sm, 8px)',\r\n    background: 'rgba(88, 166, 255, 0.1)',\r\n    border: '1px solid var(--accent-primary, #58a6ff)',\r\n    borderRadius: 'var(--radius-sm, 4px)',\r\n    fontSize: '12px',\r\n    color: 'var(--accent-primary, #58a6ff)',\r\n  },\r\n  suggestionLabel: {\r\n    fontWeight: 600,\r\n    marginRight: 'var(--spacing-xs, 4px)',\r\n  },\r\n};\r\n\r\nfunction ErrorItem({ error, onGotoLine }: ErrorItemProps) {\r\n  const { message, line, column, code, sourceContext, suggestion } = error;\r\n\r\n  const handleGotoLine = () => {\r\n    if (line && onGotoLine) {\r\n      onGotoLine(line, column);\r\n    }\r\n  };\r\n\r\n  return (\r\n    <div\r\n      style={itemStyles.errorItem}\r\n      onMouseEnter={(e) => (e.currentTarget.style.background = 'var(--bg-hover, #30363d)')}\r\n      onMouseLeave={(e) => (e.currentTarget.style.background = 'transparent')}\r\n    >\r\n      <div style={itemStyles.errorHeader}>\r\n        <svg style={itemStyles.errorIcon} viewBox=\"0 0 24 24\" fill=\"currentColor\">\r\n          <path d=\"M12 2C6.48 2 2 6.48 2 12s4.48 10 10 10 10-4.48 10-10S17.52 2 12 2zm1 15h-2v-2h2v2zm0-4h-2V7h2v6z\" />\r\n        </svg>\r\n        <div style={itemStyles.errorContent}>\r\n          <div style={itemStyles.errorMessage}>{message}</div>\r\n          <div style={itemStyles.errorLocation}>\r\n            {line && (\r\n              <span\r\n                style={itemStyles.errorLocationLink}\r\n                onClick={handleGotoLine}\r\n                onMouseEnter={(e) => (e.currentTarget.style.textDecoration = 'underline')}\r\n                onMouseLeave={(e) => (e.currentTarget.style.textDecoration = 'none')}\r\n              >\r\n                <svg viewBox=\"0 0 24 24\" width=\"12\" height=\"12\" fill=\"currentColor\">\r\n                  <path d=\"M14 2H6c-1.1 0-2 .9-2 2v16c0 1.1.9 2 2 2h12c1.1 0 2-.9 2-2V8l-6-6zm-1 7V3.5L18.5 9H13z\" />\r\n                </svg>\r\n                Line {line}\r\n                {column && `:${column}`}\r\n              </span>\r\n            )}\r\n            {code && <span style={itemStyles.errorCode}>{code}</span>}\r\n          </div>\r\n        </div>\r\n      </div>\r\n\r\n      {sourceContext && sourceContext.length > 0 && (\r\n        <div style={itemStyles.sourceContext}>\r\n          {sourceContext.map((contextLine, index) => {\r\n            const lineNum = line ? line - 1 + index : index + 1;\r\n            const isErrorLine = line && lineNum === line;\r\n            return (\r\n              <div key={index}>\r\n                <div style={itemStyles.contextLine}>\r\n                  <span style={itemStyles.lineNumber as CSSProperties}>{lineNum}</span>\r\n                  <span style={isErrorLine ? itemStyles.errorLineContent : itemStyles.lineContent}>\r\n                    {contextLine}\r\n                  </span>\r\n                </div>\r\n                {isErrorLine && column && (\r\n                  <div style={itemStyles.caretLine as CSSProperties}>{' '.repeat(column - 1)}^</div>\r\n                )}\r\n              </div>\r\n            );\r\n          })}\r\n        </div>\r\n      )}\r\n\r\n      {suggestion && (\r\n        <div style={itemStyles.suggestion}>\r\n          <span style={itemStyles.suggestionLabel}>Suggestion:</span>\r\n          {suggestion}\r\n        </div>\r\n      )}\r\n    </div>\r\n  );\r\n}\r\n\r\nexport default ErrorPanel;\r\n","/**\r\n * Constellation Dashboard - Input Presets Component\r\n *\r\n * A React component that saves and loads input presets to LocalStorage.\r\n * Presets are scoped per script path.\r\n */\r\n\r\nimport { useState, useEffect, useCallback, useRef, CSSProperties } from 'react';\r\nimport { createPortal } from 'react-dom';\r\n\r\nexport interface InputPreset {\r\n  name: string;\r\n  inputs: Record<string, unknown>;\r\n  createdAt: number;\r\n}\r\n\r\nexport interface InputPresetsProps {\r\n  scriptPath: string;\r\n  onLoadPreset: (inputs: Record<string, unknown>) => void;\r\n  onSavePreset: (name: string) => void;\r\n}\r\n\r\nconst styles: Record<string, CSSProperties> = {\r\n  container: {\r\n    display: 'inline-block',\r\n    position: 'relative',\r\n  },\r\n  presetsBtn: {\r\n    display: 'flex',\r\n    alignItems: 'center',\r\n    gap: 'var(--spacing-xs, 4px)',\r\n    padding: 'var(--spacing-xs, 4px) var(--spacing-sm, 8px)',\r\n    border: '1px solid var(--border-primary, #30363d)',\r\n    borderRadius: 'var(--radius-sm, 4px)',\r\n    background: 'var(--bg-tertiary, #21262d)',\r\n    color: 'var(--text-secondary, #8b949e)',\r\n    fontSize: '12px',\r\n    cursor: 'pointer',\r\n    transition: 'all 0.15s ease',\r\n  },\r\n  count: {\r\n    background: 'var(--bg-hover, #30363d)',\r\n    padding: '0 6px',\r\n    borderRadius: '10px',\r\n    fontSize: '10px',\r\n  },\r\n  dropdown: {\r\n    position: 'absolute',\r\n    top: '100%',\r\n    left: 0,\r\n    marginTop: '4px',\r\n    minWidth: '200px',\r\n    maxWidth: '300px',\r\n    background: 'var(--bg-secondary, #161b22)',\r\n    border: '1px solid var(--border-primary, #30363d)',\r\n    borderRadius: 'var(--radius-md, 6px)',\r\n    boxShadow: 'var(--shadow-md, 0 4px 8px rgba(0, 0, 0, 0.4))',\r\n    zIndex: 100,\r\n    overflow: 'hidden',\r\n  },\r\n  dropdownHeader: {\r\n    padding: 'var(--spacing-sm, 8px) var(--spacing-md, 12px)',\r\n    fontSize: '11px',\r\n    fontWeight: 600,\r\n    textTransform: 'uppercase',\r\n    letterSpacing: '0.5px',\r\n    color: 'var(--text-muted, #6e7681)',\r\n    borderBottom: '1px solid var(--border-primary, #30363d)',\r\n  },\r\n  presetList: {\r\n    maxHeight: '200px',\r\n    overflowY: 'auto',\r\n  },\r\n  presetItem: {\r\n    display: 'flex',\r\n    alignItems: 'center',\r\n    justifyContent: 'space-between',\r\n    padding: 'var(--spacing-sm, 8px) var(--spacing-md, 12px)',\r\n    cursor: 'pointer',\r\n    transition: 'background 0.15s ease',\r\n  },\r\n  presetName: {\r\n    fontSize: '13px',\r\n    color: 'var(--text-primary, #f0f6fc)',\r\n    overflow: 'hidden',\r\n    textOverflow: 'ellipsis',\r\n    whiteSpace: 'nowrap',\r\n  },\r\n  presetDelete: {\r\n    background: 'none',\r\n    border: 'none',\r\n    padding: '2px',\r\n    cursor: 'pointer',\r\n    color: 'var(--text-muted, #6e7681)',\r\n    opacity: 0,\r\n    transition: 'opacity 0.15s ease',\r\n  },\r\n  emptyState: {\r\n    padding: 'var(--spacing-md, 12px)',\r\n    textAlign: 'center',\r\n    color: 'var(--text-muted, #6e7681)',\r\n    fontSize: '12px',\r\n  },\r\n  saveAction: {\r\n    display: 'flex',\r\n    alignItems: 'center',\r\n    gap: 'var(--spacing-xs, 4px)',\r\n    padding: 'var(--spacing-sm, 8px) var(--spacing-md, 12px)',\r\n    borderTop: '1px solid var(--border-primary, #30363d)',\r\n    cursor: 'pointer',\r\n    color: 'var(--accent-primary, #58a6ff)',\r\n    fontSize: '13px',\r\n    transition: 'background 0.15s ease',\r\n  },\r\n  saveDialog: {\r\n    padding: 'var(--spacing-md, 12px)',\r\n    borderTop: '1px solid var(--border-primary, #30363d)',\r\n  },\r\n  saveInput: {\r\n    width: '100%',\r\n    padding: 'var(--spacing-sm, 8px)',\r\n    border: '1px solid var(--border-primary, #30363d)',\r\n    borderRadius: 'var(--radius-sm, 4px)',\r\n    background: 'var(--bg-tertiary, #21262d)',\r\n    color: 'var(--text-primary, #f0f6fc)',\r\n    fontSize: '13px',\r\n    marginBottom: 'var(--spacing-sm, 8px)',\r\n    boxSizing: 'border-box',\r\n  },\r\n  saveDialogActions: {\r\n    display: 'flex',\r\n    gap: 'var(--spacing-sm, 8px)',\r\n    justifyContent: 'flex-end',\r\n  },\r\n  btnCancel: {\r\n    padding: 'var(--spacing-xs, 4px) var(--spacing-sm, 8px)',\r\n    borderRadius: 'var(--radius-sm, 4px)',\r\n    fontSize: '12px',\r\n    cursor: 'pointer',\r\n    background: 'var(--bg-tertiary, #21262d)',\r\n    border: '1px solid var(--border-primary, #30363d)',\r\n    color: 'var(--text-secondary, #8b949e)',\r\n  },\r\n  btnSave: {\r\n    padding: 'var(--spacing-xs, 4px) var(--spacing-sm, 8px)',\r\n    borderRadius: 'var(--radius-sm, 4px)',\r\n    fontSize: '12px',\r\n    cursor: 'pointer',\r\n    background: 'var(--accent-highlight, #1f6feb)',\r\n    border: '1px solid var(--accent-highlight, #1f6feb)',\r\n    color: 'var(--text-primary, #f0f6fc)',\r\n  },\r\n};\r\n\r\nfunction getStorageKey(scriptPath: string): string {\r\n  return `constellation:presets:${scriptPath}`;\r\n}\r\n\r\nexport function InputPresets({ scriptPath, onLoadPreset, onSavePreset }: InputPresetsProps) {\r\n  const [presets, setPresets] = useState<InputPreset[]>([]);\r\n  const [showDropdown, setShowDropdown] = useState(false);\r\n  const [showSaveDialog, setShowSaveDialog] = useState(false);\r\n  const [newPresetName, setNewPresetName] = useState('');\r\n  const [hoveredIndex, setHoveredIndex] = useState<number | null>(null);\r\n  const [dropdownPosition, setDropdownPosition] = useState({ top: 0, left: 0 });\r\n  const buttonRef = useRef<HTMLButtonElement>(null);\r\n\r\n  // Load presets from localStorage when scriptPath changes\r\n  useEffect(() => {\r\n    if (!scriptPath) {\r\n      setPresets([]);\r\n      return;\r\n    }\r\n\r\n    try {\r\n      const stored = localStorage.getItem(getStorageKey(scriptPath));\r\n      if (stored) {\r\n        setPresets(JSON.parse(stored));\r\n      } else {\r\n        setPresets([]);\r\n      }\r\n    } catch (error) {\r\n      console.error('Failed to load presets:', error);\r\n      setPresets([]);\r\n    }\r\n  }, [scriptPath]);\r\n\r\n  const savePresetsToStorage = useCallback(\r\n    (newPresets: InputPreset[]) => {\r\n      try {\r\n        localStorage.setItem(getStorageKey(scriptPath), JSON.stringify(newPresets));\r\n      } catch (error) {\r\n        console.error('Failed to save presets:', error);\r\n      }\r\n    },\r\n    [scriptPath]\r\n  );\r\n\r\n  const handleLoadPreset = (preset: InputPreset) => {\r\n    setShowDropdown(false);\r\n    onLoadPreset(preset.inputs);\r\n  };\r\n\r\n  const handleDeletePreset = (index: number, e: React.MouseEvent) => {\r\n    e.stopPropagation();\r\n    const newPresets = presets.filter((_, i) => i !== index);\r\n    setPresets(newPresets);\r\n    savePresetsToStorage(newPresets);\r\n  };\r\n\r\n  const toggleDropdown = () => {\r\n    if (!showDropdown && buttonRef.current) {\r\n      const rect = buttonRef.current.getBoundingClientRect();\r\n      setDropdownPosition({\r\n        top: rect.bottom + 4,\r\n        left: rect.left,\r\n      });\r\n    }\r\n    setShowDropdown(!showDropdown);\r\n    setShowSaveDialog(false);\r\n  };\r\n\r\n  const openSaveDialog = () => {\r\n    setShowSaveDialog(true);\r\n    setNewPresetName(`Preset ${presets.length + 1}`);\r\n  };\r\n\r\n  const cancelSaveDialog = () => {\r\n    setShowSaveDialog(false);\r\n    setNewPresetName('');\r\n  };\r\n\r\n  const handleSave = () => {\r\n    if (!newPresetName.trim()) return;\r\n    onSavePreset(newPresetName);\r\n    setShowSaveDialog(false);\r\n    setNewPresetName('');\r\n  };\r\n\r\n  const handleKeyDown = (e: React.KeyboardEvent) => {\r\n    if (e.key === 'Enter') {\r\n      handleSave();\r\n    } else if (e.key === 'Escape') {\r\n      cancelSaveDialog();\r\n    }\r\n  };\r\n\r\n  // Public method to add a preset (called from parent)\r\n  const addPreset = useCallback(\r\n    (name: string, inputs: Record<string, unknown>) => {\r\n      const preset: InputPreset = {\r\n        name,\r\n        inputs,\r\n        createdAt: Date.now(),\r\n      };\r\n      const newPresets = [...presets, preset];\r\n      setPresets(newPresets);\r\n      savePresetsToStorage(newPresets);\r\n    },\r\n    [presets, savePresetsToStorage]\r\n  );\r\n\r\n  // Expose addPreset via ref or context if needed\r\n  // For now, parent can call onSavePreset which triggers addPreset flow\r\n\r\n  // Close dropdown when clicking outside\r\n  useEffect(() => {\r\n    if (!showDropdown) return;\r\n\r\n    const handleClickOutside = (e: MouseEvent) => {\r\n      const target = e.target as HTMLElement;\r\n      // Check if click is outside both button and dropdown\r\n      if (buttonRef.current && !buttonRef.current.contains(target)) {\r\n        const dropdown = document.getElementById('presets-dropdown-portal');\r\n        if (!dropdown || !dropdown.contains(target)) {\r\n          setShowDropdown(false);\r\n          setShowSaveDialog(false);\r\n        }\r\n      }\r\n    };\r\n\r\n    document.addEventListener('mousedown', handleClickOutside);\r\n    return () => document.removeEventListener('mousedown', handleClickOutside);\r\n  }, [showDropdown]);\r\n\r\n  return (\r\n    <div style={styles.container}>\r\n      <button\r\n        ref={buttonRef}\r\n        style={styles.presetsBtn}\r\n        onClick={toggleDropdown}\r\n        onMouseEnter={(e) => {\r\n          e.currentTarget.style.borderColor = 'var(--accent-primary, #58a6ff)';\r\n          e.currentTarget.style.color = 'var(--text-primary, #f0f6fc)';\r\n        }}\r\n        onMouseLeave={(e) => {\r\n          e.currentTarget.style.borderColor = 'var(--border-primary, #30363d)';\r\n          e.currentTarget.style.color = 'var(--text-secondary, #8b949e)';\r\n        }}\r\n      >\r\n        <svg viewBox=\"0 0 24 24\" width=\"14\" height=\"14\" fill=\"currentColor\">\r\n          <path d=\"M19 9h-4V3H9v6H5l7 7 7-7zM5 18v2h14v-2H5z\" />\r\n        </svg>\r\n        Presets\r\n        {presets.length > 0 && <span style={styles.count}>{presets.length}</span>}\r\n      </button>\r\n\r\n      {showDropdown &&\r\n        createPortal(\r\n          <div\r\n            id=\"presets-dropdown-portal\"\r\n            style={{\r\n              ...styles.dropdown,\r\n              position: 'fixed',\r\n              top: dropdownPosition.top,\r\n              left: dropdownPosition.left,\r\n            }}\r\n          >\r\n          <div style={styles.dropdownHeader}>Saved Presets</div>\r\n\r\n          {presets.length === 0 ? (\r\n            <div style={styles.emptyState}>No saved presets</div>\r\n          ) : (\r\n            <div style={styles.presetList}>\r\n              {presets.map((preset, index) => (\r\n                <div\r\n                  key={index}\r\n                  style={{\r\n                    ...styles.presetItem,\r\n                    background: hoveredIndex === index ? 'var(--bg-hover, #30363d)' : undefined,\r\n                  }}\r\n                  onClick={() => handleLoadPreset(preset)}\r\n                  onMouseEnter={() => setHoveredIndex(index)}\r\n                  onMouseLeave={() => setHoveredIndex(null)}\r\n                >\r\n                  <span style={styles.presetName}>{preset.name}</span>\r\n                  <button\r\n                    style={{\r\n                      ...styles.presetDelete,\r\n                      opacity: hoveredIndex === index ? 1 : 0,\r\n                    }}\r\n                    onClick={(e) => handleDeletePreset(index, e)}\r\n                    title=\"Delete preset\"\r\n                  >\r\n                    <svg viewBox=\"0 0 24 24\" width=\"14\" height=\"14\" fill=\"currentColor\">\r\n                      <path d=\"M19 6.41L17.59 5 12 10.59 6.41 5 5 6.41 10.59 12 5 17.59 6.41 19 12 13.41 17.59 19 19 17.59 13.41 12z\" />\r\n                    </svg>\r\n                  </button>\r\n                </div>\r\n              ))}\r\n            </div>\r\n          )}\r\n\r\n          {showSaveDialog ? (\r\n            <div style={styles.saveDialog}>\r\n              <input\r\n                type=\"text\"\r\n                placeholder=\"Preset name\"\r\n                value={newPresetName}\r\n                onChange={(e) => setNewPresetName(e.target.value)}\r\n                onKeyDown={handleKeyDown}\r\n                style={styles.saveInput}\r\n                autoFocus\r\n              />\r\n              <div style={styles.saveDialogActions}>\r\n                <button style={styles.btnCancel} onClick={cancelSaveDialog}>\r\n                  Cancel\r\n                </button>\r\n                <button\r\n                  style={{\r\n                    ...styles.btnSave,\r\n                    opacity: !newPresetName.trim() ? 0.5 : 1,\r\n                    cursor: !newPresetName.trim() ? 'not-allowed' : 'pointer',\r\n                  }}\r\n                  onClick={handleSave}\r\n                  disabled={!newPresetName.trim()}\r\n                >\r\n                  Save\r\n                </button>\r\n              </div>\r\n            </div>\r\n          ) : (\r\n            <div\r\n              style={styles.saveAction}\r\n              onClick={openSaveDialog}\r\n              onMouseEnter={(e) => (e.currentTarget.style.background = 'var(--bg-hover, #30363d)')}\r\n              onMouseLeave={(e) => (e.currentTarget.style.background = 'transparent')}\r\n            >\r\n              <svg viewBox=\"0 0 24 24\" width=\"14\" height=\"14\" fill=\"currentColor\">\r\n                <path d=\"M19 13h-6v6h-2v-6H5v-2h6V5h2v6h6v2z\" />\r\n              </svg>\r\n              Save Current Inputs\r\n            </div>\r\n          )}\r\n        </div>,\r\n          document.body\r\n        )}\r\n    </div>\r\n  );\r\n}\r\n\r\nexport default InputPresets;\r\n","/**\r\n * Constellation Dashboard - Module Browser Component\r\n *\r\n * A React component for browsing and searching the module catalog.\r\n * Allows inserting module calls into the code editor.\r\n */\r\n\r\nimport { useState, useMemo, CSSProperties } from 'react';\r\n\r\nexport interface ModuleInfo {\r\n  name: string;\r\n  description: string;\r\n  version: string;\r\n  category?: string;\r\n  inputs: Record<string, string>;\r\n  outputs: Record<string, string>;\r\n  examples?: string[];\r\n}\r\n\r\nexport interface ModuleBrowserProps {\r\n  modules: ModuleInfo[];\r\n  visible?: boolean;\r\n  onClose?: () => void;\r\n  onInsertModule?: (code: string, module: ModuleInfo) => void;\r\n}\r\n\r\nconst styles: Record<string, CSSProperties> = {\r\n  browser: {\r\n    display: 'flex',\r\n    flexDirection: 'column',\r\n    height: '100%',\r\n    background: 'var(--bg-secondary, #161b22)',\r\n    borderRadius: 'var(--radius-md, 6px)',\r\n    overflow: 'hidden',\r\n  },\r\n  header: {\r\n    display: 'flex',\r\n    alignItems: 'center',\r\n    justifyContent: 'space-between',\r\n    padding: 'var(--spacing-sm, 8px) var(--spacing-md, 12px)',\r\n    borderBottom: '1px solid var(--border-primary, #30363d)',\r\n  },\r\n  headerTitle: {\r\n    display: 'flex',\r\n    alignItems: 'center',\r\n    gap: 'var(--spacing-sm, 8px)',\r\n    fontSize: '12px',\r\n    fontWeight: 600,\r\n    color: 'var(--text-secondary, #8b949e)',\r\n    textTransform: 'uppercase',\r\n    letterSpacing: '0.5px',\r\n  },\r\n  closeBtn: {\r\n    background: 'none',\r\n    border: 'none',\r\n    padding: '4px',\r\n    cursor: 'pointer',\r\n    color: 'var(--text-muted, #6e7681)',\r\n    borderRadius: 'var(--radius-sm, 4px)',\r\n    transition: 'all 0.15s ease',\r\n    display: 'flex',\r\n    alignItems: 'center',\r\n    justifyContent: 'center',\r\n  },\r\n  searchContainer: {\r\n    padding: 'var(--spacing-sm, 8px) var(--spacing-md, 12px)',\r\n    borderBottom: '1px solid var(--border-primary, #30363d)',\r\n  },\r\n  searchInput: {\r\n    width: '100%',\r\n    padding: 'var(--spacing-sm, 8px)',\r\n    border: '1px solid var(--border-primary, #30363d)',\r\n    borderRadius: 'var(--radius-sm, 4px)',\r\n    background: 'var(--bg-tertiary, #21262d)',\r\n    color: 'var(--text-primary, #f0f6fc)',\r\n    fontSize: '13px',\r\n    boxSizing: 'border-box',\r\n  },\r\n  categories: {\r\n    display: 'flex',\r\n    gap: 'var(--spacing-xs, 4px)',\r\n    padding: 'var(--spacing-sm, 8px) var(--spacing-md, 12px)',\r\n    overflowX: 'auto',\r\n    borderBottom: '1px solid var(--border-primary, #30363d)',\r\n  },\r\n  categoryBtn: {\r\n    padding: 'var(--spacing-xs, 4px) var(--spacing-sm, 8px)',\r\n    border: '1px solid var(--border-primary, #30363d)',\r\n    borderRadius: 'var(--radius-sm, 4px)',\r\n    background: 'var(--bg-tertiary, #21262d)',\r\n    color: 'var(--text-secondary, #8b949e)',\r\n    fontSize: '11px',\r\n    cursor: 'pointer',\r\n    whiteSpace: 'nowrap',\r\n    transition: 'all 0.15s ease',\r\n  },\r\n  categoryBtnActive: {\r\n    background: 'var(--accent-primary, #58a6ff)',\r\n    borderColor: 'var(--accent-primary, #58a6ff)',\r\n    color: 'var(--bg-primary, #0d1117)',\r\n  },\r\n  content: {\r\n    flex: 1,\r\n    display: 'flex',\r\n    overflow: 'hidden',\r\n  },\r\n  moduleList: {\r\n    flex: 1,\r\n    overflowY: 'auto',\r\n    padding: 'var(--spacing-xs, 4px)',\r\n  },\r\n  moduleDetail: {\r\n    width: '280px',\r\n    borderLeft: '1px solid var(--border-primary, #30363d)',\r\n    overflowY: 'auto',\r\n  },\r\n  emptyState: {\r\n    padding: 'var(--spacing-lg, 24px)',\r\n    textAlign: 'center',\r\n    color: 'var(--text-muted, #6e7681)',\r\n  },\r\n};\r\n\r\nexport function ModuleBrowser({ modules, visible = true, onClose, onInsertModule }: ModuleBrowserProps) {\r\n  const [searchQuery, setSearchQuery] = useState('');\r\n  const [selectedCategory, setSelectedCategory] = useState<string | null>(null);\r\n  const [selectedModule, setSelectedModule] = useState<ModuleInfo | null>(null);\r\n\r\n  const categories = useMemo(() => {\r\n    const cats = new Set<string>();\r\n    for (const m of modules) {\r\n      if (m.category) {\r\n        cats.add(m.category);\r\n      }\r\n    }\r\n    return Array.from(cats).sort();\r\n  }, [modules]);\r\n\r\n  const filteredModules = useMemo(() => {\r\n    let filtered = modules;\r\n\r\n    if (selectedCategory) {\r\n      filtered = filtered.filter((m) => m.category === selectedCategory);\r\n    }\r\n\r\n    if (searchQuery) {\r\n      const query = searchQuery.toLowerCase();\r\n      filtered = filtered.filter(\r\n        (m) => m.name.toLowerCase().includes(query) || m.description.toLowerCase().includes(query)\r\n      );\r\n    }\r\n\r\n    return filtered;\r\n  }, [modules, selectedCategory, searchQuery]);\r\n\r\n  const handleCategoryClick = (category: string | null) => {\r\n    setSelectedCategory(selectedCategory === category ? null : category);\r\n  };\r\n\r\n  const handleInsert = (code: string, module: ModuleInfo) => {\r\n    onInsertModule?.(code, module);\r\n  };\r\n\r\n  if (!visible) return null;\r\n\r\n  return (\r\n    <div style={styles.browser}>\r\n      <div style={styles.header}>\r\n        <span style={styles.headerTitle}>\r\n          <svg viewBox=\"0 0 24 24\" width=\"16\" height=\"16\" fill=\"currentColor\">\r\n            <path d=\"M4 6h16v2H4zm0 5h16v2H4zm0 5h16v2H4z\" />\r\n          </svg>\r\n          Module Browser\r\n        </span>\r\n        <button\r\n          style={styles.closeBtn}\r\n          onClick={onClose}\r\n          onMouseEnter={(e) => {\r\n            e.currentTarget.style.background = 'var(--bg-hover, #30363d)';\r\n            e.currentTarget.style.color = 'var(--text-primary, #f0f6fc)';\r\n          }}\r\n          onMouseLeave={(e) => {\r\n            e.currentTarget.style.background = 'none';\r\n            e.currentTarget.style.color = 'var(--text-muted, #6e7681)';\r\n          }}\r\n        >\r\n          <svg viewBox=\"0 0 24 24\" width=\"16\" height=\"16\" fill=\"currentColor\">\r\n            <path d=\"M19 6.41L17.59 5 12 10.59 6.41 5 5 6.41 10.59 12 5 17.59 6.41 19 12 13.41 17.59 19 19 17.59 13.41 12z\" />\r\n          </svg>\r\n        </button>\r\n      </div>\r\n\r\n      <div style={styles.searchContainer}>\r\n        <input\r\n          type=\"text\"\r\n          style={styles.searchInput}\r\n          placeholder=\"Search modules...\"\r\n          value={searchQuery}\r\n          onChange={(e) => setSearchQuery(e.target.value)}\r\n        />\r\n      </div>\r\n\r\n      {categories.length > 0 && (\r\n        <div style={styles.categories}>\r\n          <button\r\n            style={{\r\n              ...styles.categoryBtn,\r\n              ...(selectedCategory === null ? styles.categoryBtnActive : {}),\r\n            }}\r\n            onClick={() => handleCategoryClick(null)}\r\n          >\r\n            All\r\n          </button>\r\n          {categories.map((cat) => (\r\n            <button\r\n              key={cat}\r\n              style={{\r\n                ...styles.categoryBtn,\r\n                ...(selectedCategory === cat ? styles.categoryBtnActive : {}),\r\n              }}\r\n              onClick={() => handleCategoryClick(cat)}\r\n            >\r\n              {cat}\r\n            </button>\r\n          ))}\r\n        </div>\r\n      )}\r\n\r\n      <div style={styles.content}>\r\n        <div style={styles.moduleList}>\r\n          {filteredModules.length === 0 ? (\r\n            <div style={styles.emptyState}>\r\n              {modules.length === 0 ? 'No modules available' : 'No modules match your search'}\r\n            </div>\r\n          ) : (\r\n            filteredModules.map((module) => (\r\n              <ModuleCard\r\n                key={module.name}\r\n                module={module}\r\n                selected={selectedModule?.name === module.name}\r\n                onClick={() => setSelectedModule(module)}\r\n              />\r\n            ))\r\n          )}\r\n        </div>\r\n\r\n        {selectedModule && (\r\n          <div style={styles.moduleDetail}>\r\n            <ModuleDetail module={selectedModule} onInsert={handleInsert} />\r\n          </div>\r\n        )}\r\n      </div>\r\n    </div>\r\n  );\r\n}\r\n\r\ninterface ModuleCardProps {\r\n  module: ModuleInfo;\r\n  selected?: boolean;\r\n  onClick?: () => void;\r\n}\r\n\r\nconst cardStyles: Record<string, CSSProperties> = {\r\n  card: {\r\n    padding: 'var(--spacing-sm, 8px) var(--spacing-md, 12px)',\r\n    borderRadius: 'var(--radius-sm, 4px)',\r\n    cursor: 'pointer',\r\n    transition: 'all 0.15s ease',\r\n    marginBottom: 'var(--spacing-xs, 4px)',\r\n  },\r\n  cardSelected: {\r\n    background: 'var(--bg-active, rgba(56, 139, 253, 0.1))',\r\n    borderLeft: '2px solid var(--accent-primary, #58a6ff)',\r\n  },\r\n  name: {\r\n    fontSize: '13px',\r\n    fontWeight: 600,\r\n    color: 'var(--node-operation, #d2a8ff)',\r\n  },\r\n  description: {\r\n    fontSize: '12px',\r\n    color: 'var(--text-muted, #6e7681)',\r\n    marginTop: '2px',\r\n    overflow: 'hidden',\r\n    textOverflow: 'ellipsis',\r\n    whiteSpace: 'nowrap',\r\n  },\r\n  meta: {\r\n    display: 'flex',\r\n    alignItems: 'center',\r\n    gap: 'var(--spacing-sm, 8px)',\r\n    marginTop: '4px',\r\n    fontSize: '11px',\r\n    color: 'var(--text-muted, #6e7681)',\r\n  },\r\n  category: {\r\n    background: 'var(--bg-tertiary, #21262d)',\r\n    padding: '1px 6px',\r\n    borderRadius: '10px',\r\n  },\r\n};\r\n\r\nfunction ModuleCard({ module, selected, onClick }: ModuleCardProps) {\r\n  return (\r\n    <div\r\n      style={{\r\n        ...cardStyles.card,\r\n        ...(selected ? cardStyles.cardSelected : {}),\r\n      }}\r\n      onClick={onClick}\r\n      onMouseEnter={(e) => {\r\n        if (!selected) e.currentTarget.style.background = 'var(--bg-hover, #30363d)';\r\n      }}\r\n      onMouseLeave={(e) => {\r\n        if (!selected) e.currentTarget.style.background = 'transparent';\r\n      }}\r\n    >\r\n      <div style={cardStyles.name}>{module.name}</div>\r\n      <div style={cardStyles.description}>{module.description}</div>\r\n      <div style={cardStyles.meta}>\r\n        <span>v{module.version}</span>\r\n        {module.category && <span style={cardStyles.category}>{module.category}</span>}\r\n      </div>\r\n    </div>\r\n  );\r\n}\r\n\r\ninterface ModuleDetailProps {\r\n  module: ModuleInfo;\r\n  onInsert?: (code: string, module: ModuleInfo) => void;\r\n}\r\n\r\nconst detailStyles: Record<string, CSSProperties> = {\r\n  detail: {\r\n    padding: 'var(--spacing-md, 12px)',\r\n  },\r\n  name: {\r\n    fontSize: '16px',\r\n    fontWeight: 600,\r\n    color: 'var(--node-operation, #d2a8ff)',\r\n    marginBottom: 'var(--spacing-xs, 4px)',\r\n  },\r\n  version: {\r\n    fontSize: '12px',\r\n    color: 'var(--text-muted, #6e7681)',\r\n    marginBottom: 'var(--spacing-md, 12px)',\r\n  },\r\n  description: {\r\n    fontSize: '13px',\r\n    color: 'var(--text-primary, #f0f6fc)',\r\n    lineHeight: 1.5,\r\n    marginBottom: 'var(--spacing-md, 12px)',\r\n  },\r\n  section: {\r\n    marginBottom: 'var(--spacing-md, 12px)',\r\n  },\r\n  sectionTitle: {\r\n    fontSize: '11px',\r\n    fontWeight: 600,\r\n    textTransform: 'uppercase',\r\n    letterSpacing: '0.5px',\r\n    color: 'var(--text-muted, #6e7681)',\r\n    marginBottom: 'var(--spacing-sm, 8px)',\r\n  },\r\n  params: {\r\n    background: 'var(--bg-tertiary, #21262d)',\r\n    borderRadius: 'var(--radius-sm, 4px)',\r\n    padding: 'var(--spacing-sm, 8px)',\r\n  },\r\n  param: {\r\n    display: 'flex',\r\n    justifyContent: 'space-between',\r\n    padding: 'var(--spacing-xs, 4px) 0',\r\n    fontSize: '12px',\r\n  },\r\n  paramName: {\r\n    color: 'var(--text-primary, #f0f6fc)',\r\n    fontWeight: 500,\r\n  },\r\n  paramType: {\r\n    color: 'var(--text-muted, #6e7681)',\r\n    fontFamily: \"'SF Mono', 'Consolas', monospace\",\r\n  },\r\n  example: {\r\n    background: 'var(--bg-tertiary, #21262d)',\r\n    borderRadius: 'var(--radius-sm, 4px)',\r\n    padding: 'var(--spacing-sm, 8px)',\r\n    fontFamily: \"'SF Mono', 'Consolas', monospace\",\r\n    fontSize: '12px',\r\n    color: 'var(--text-primary, #f0f6fc)',\r\n    whiteSpace: 'pre-wrap',\r\n    marginBottom: 'var(--spacing-sm, 8px)',\r\n  },\r\n  insertBtn: {\r\n    width: '100%',\r\n    display: 'flex',\r\n    alignItems: 'center',\r\n    justifyContent: 'center',\r\n    gap: 'var(--spacing-xs, 4px)',\r\n    padding: 'var(--spacing-sm, 8px)',\r\n    border: 'none',\r\n    borderRadius: 'var(--radius-sm, 4px)',\r\n    background: 'var(--accent-highlight, #1f6feb)',\r\n    color: 'var(--text-primary, #f0f6fc)',\r\n    fontSize: '13px',\r\n    fontWeight: 500,\r\n    cursor: 'pointer',\r\n    transition: 'all 0.15s ease',\r\n  },\r\n};\r\n\r\nfunction ModuleDetail({ module, onInsert }: ModuleDetailProps) {\r\n  const inputEntries = Object.entries(module.inputs);\r\n  const outputEntries = Object.entries(module.outputs);\r\n\r\n  const handleInsert = () => {\r\n    const inputNames = Object.keys(module.inputs);\r\n    const args = inputNames.map((name) => name).join(', ');\r\n    const code = `result = ${module.name}(${args})`;\r\n    onInsert?.(code, module);\r\n  };\r\n\r\n  return (\r\n    <div style={detailStyles.detail}>\r\n      <div style={detailStyles.name}>{module.name}</div>\r\n      <div style={detailStyles.version}>v{module.version}</div>\r\n      <div style={detailStyles.description}>{module.description}</div>\r\n\r\n      {inputEntries.length > 0 && (\r\n        <div style={detailStyles.section}>\r\n          <div style={detailStyles.sectionTitle}>Inputs</div>\r\n          <div style={detailStyles.params}>\r\n            {inputEntries.map(([name, type]) => (\r\n              <div key={name} style={detailStyles.param}>\r\n                <span style={detailStyles.paramName}>{name}</span>\r\n                <span style={detailStyles.paramType}>{type}</span>\r\n              </div>\r\n            ))}\r\n          </div>\r\n        </div>\r\n      )}\r\n\r\n      {outputEntries.length > 0 && (\r\n        <div style={detailStyles.section}>\r\n          <div style={detailStyles.sectionTitle}>Outputs</div>\r\n          <div style={detailStyles.params}>\r\n            {outputEntries.map(([name, type]) => (\r\n              <div key={name} style={detailStyles.param}>\r\n                <span style={detailStyles.paramName}>{name}</span>\r\n                <span style={detailStyles.paramType}>{type}</span>\r\n              </div>\r\n            ))}\r\n          </div>\r\n        </div>\r\n      )}\r\n\r\n      {module.examples && module.examples.length > 0 && (\r\n        <div style={detailStyles.section}>\r\n          <div style={detailStyles.sectionTitle}>Examples</div>\r\n          {module.examples.map((example, index) => (\r\n            <div key={index} style={detailStyles.example}>\r\n              {example}\r\n            </div>\r\n          ))}\r\n        </div>\r\n      )}\r\n\r\n      <button\r\n        style={detailStyles.insertBtn}\r\n        onClick={handleInsert}\r\n        onMouseEnter={(e) => (e.currentTarget.style.background = 'var(--accent-primary, #58a6ff)')}\r\n        onMouseLeave={(e) => (e.currentTarget.style.background = 'var(--accent-highlight, #1f6feb)')}\r\n      >\r\n        <svg viewBox=\"0 0 24 24\" width=\"14\" height=\"14\" fill=\"currentColor\">\r\n          <path d=\"M19 13h-6v6h-2v-6H5v-2h6V5h2v6h6v2z\" />\r\n        </svg>\r\n        Insert into Editor\r\n      </button>\r\n    </div>\r\n  );\r\n}\r\n\r\nexport default ModuleBrowser;\r\n","/**\r\n * Constellation Dashboard - Value Inspector Component\r\n *\r\n * A React component that displays intermediate execution values\r\n * with a collapsible JSON tree view. Shows when a DAG node is clicked.\r\n */\r\n\r\nimport { useState, useEffect, CSSProperties } from 'react';\r\n\r\nexport interface NodeValue {\r\n  nodeId: string;\r\n  nodeName: string;\r\n  status: 'pending' | 'running' | 'completed' | 'failed';\r\n  value?: unknown;\r\n  error?: string;\r\n  durationMs?: number;\r\n  timestamp?: number;\r\n}\r\n\r\nexport interface ValueInspectorProps {\r\n  nodeValue: NodeValue | null;\r\n  visible?: boolean;\r\n  onClose?: () => void;\r\n}\r\n\r\nconst styles: Record<string, CSSProperties> = {\r\n  inspector: {\r\n    background: 'var(--bg-secondary, #161b22)',\r\n    borderRadius: 'var(--radius-md, 6px)',\r\n    border: '1px solid var(--border-primary, #30363d)',\r\n    overflow: 'hidden',\r\n  },\r\n  header: {\r\n    display: 'flex',\r\n    alignItems: 'center',\r\n    justifyContent: 'space-between',\r\n    padding: 'var(--spacing-sm, 8px) var(--spacing-md, 12px)',\r\n    background: 'var(--bg-tertiary, #21262d)',\r\n    borderBottom: '1px solid var(--border-primary, #30363d)',\r\n  },\r\n  headerLeft: {\r\n    display: 'flex',\r\n    alignItems: 'center',\r\n    gap: 'var(--spacing-sm, 8px)',\r\n  },\r\n  nodeName: {\r\n    fontSize: '13px',\r\n    fontWeight: 600,\r\n    color: 'var(--text-primary, #f0f6fc)',\r\n  },\r\n  nodeId: {\r\n    fontSize: '11px',\r\n    color: 'var(--text-muted, #6e7681)',\r\n    fontFamily: \"'SF Mono', 'Consolas', monospace\",\r\n  },\r\n  closeBtn: {\r\n    background: 'none',\r\n    border: 'none',\r\n    color: 'var(--text-secondary, #8b949e)',\r\n    cursor: 'pointer',\r\n    padding: '4px',\r\n    borderRadius: '4px',\r\n    display: 'flex',\r\n    alignItems: 'center',\r\n    justifyContent: 'center',\r\n  },\r\n  statusBar: {\r\n    display: 'flex',\r\n    alignItems: 'center',\r\n    gap: 'var(--spacing-md, 12px)',\r\n    padding: 'var(--spacing-sm, 8px) var(--spacing-md, 12px)',\r\n    borderBottom: '1px solid var(--border-secondary, #21262d)',\r\n    fontSize: '12px',\r\n  },\r\n  statusBadge: {\r\n    display: 'inline-flex',\r\n    alignItems: 'center',\r\n    gap: '4px',\r\n    padding: '2px 8px',\r\n    borderRadius: '10px',\r\n    fontSize: '11px',\r\n    fontWeight: 500,\r\n  },\r\n  statusPending: {\r\n    background: 'rgba(139, 148, 158, 0.2)',\r\n    color: 'var(--status-pending, #8b949e)',\r\n  },\r\n  statusRunning: {\r\n    background: 'rgba(88, 166, 255, 0.2)',\r\n    color: 'var(--status-running, #58a6ff)',\r\n  },\r\n  statusCompleted: {\r\n    background: 'rgba(63, 185, 80, 0.2)',\r\n    color: 'var(--status-success, #3fb950)',\r\n  },\r\n  statusFailed: {\r\n    background: 'rgba(248, 81, 73, 0.2)',\r\n    color: 'var(--status-failed, #f85149)',\r\n  },\r\n  duration: {\r\n    color: 'var(--text-muted, #6e7681)',\r\n  },\r\n  content: {\r\n    padding: 'var(--spacing-md, 12px)',\r\n    maxHeight: '400px',\r\n    overflow: 'auto',\r\n  },\r\n  empty: {\r\n    textAlign: 'center',\r\n    color: 'var(--text-muted, #6e7681)',\r\n    fontStyle: 'italic',\r\n    padding: 'var(--spacing-lg, 24px)',\r\n  },\r\n  errorMessage: {\r\n    background: 'rgba(248, 81, 73, 0.1)',\r\n    border: '1px solid var(--status-failed, #f85149)',\r\n    borderRadius: 'var(--radius-sm, 4px)',\r\n    padding: 'var(--spacing-sm, 8px) var(--spacing-md, 12px)',\r\n    color: 'var(--status-failed, #f85149)',\r\n    fontFamily: \"'SF Mono', 'Consolas', monospace\",\r\n    fontSize: '12px',\r\n    whiteSpace: 'pre-wrap',\r\n    wordBreak: 'break-word',\r\n  },\r\n};\r\n\r\nfunction formatDuration(ms?: number): string {\r\n  if (ms === undefined) return '';\r\n  if (ms < 1) return '<1ms';\r\n  if (ms < 1000) return `${Math.round(ms)}ms`;\r\n  return `${(ms / 1000).toFixed(2)}s`;\r\n}\r\n\r\nfunction getStatusStyle(status: string): CSSProperties {\r\n  switch (status) {\r\n    case 'pending':\r\n      return styles.statusPending;\r\n    case 'running':\r\n      return styles.statusRunning;\r\n    case 'completed':\r\n      return styles.statusCompleted;\r\n    case 'failed':\r\n      return styles.statusFailed;\r\n    default:\r\n      return {};\r\n  }\r\n}\r\n\r\nexport function ValueInspector({ nodeValue, visible = true, onClose }: ValueInspectorProps) {\r\n  if (!visible || !nodeValue) {\r\n    return null;\r\n  }\r\n\r\n  const { nodeName, nodeId, status, value, error, durationMs } = nodeValue;\r\n\r\n  return (\r\n    <div style={styles.inspector}>\r\n      <div style={styles.header}>\r\n        <div style={styles.headerLeft}>\r\n          <span style={styles.nodeName}>{nodeName}</span>\r\n          <span style={styles.nodeId}>{nodeId}</span>\r\n        </div>\r\n        <button\r\n          style={styles.closeBtn}\r\n          onClick={onClose}\r\n          title=\"Close\"\r\n          onMouseEnter={(e) => {\r\n            e.currentTarget.style.background = 'var(--bg-hover, #30363d)';\r\n            e.currentTarget.style.color = 'var(--text-primary, #f0f6fc)';\r\n          }}\r\n          onMouseLeave={(e) => {\r\n            e.currentTarget.style.background = 'none';\r\n            e.currentTarget.style.color = 'var(--text-secondary, #8b949e)';\r\n          }}\r\n        >\r\n          <svg viewBox=\"0 0 24 24\" width=\"16\" height=\"16\" fill=\"currentColor\">\r\n            <path d=\"M19 6.41L17.59 5 12 10.59 6.41 5 5 6.41 10.59 12 5 17.59 6.41 19 12 13.41 17.59 19 19 17.59 13.41 12z\" />\r\n          </svg>\r\n        </button>\r\n      </div>\r\n\r\n      <div style={styles.statusBar}>\r\n        <span style={{ ...styles.statusBadge, ...getStatusStyle(status) }}>{status}</span>\r\n        {durationMs !== undefined && <span style={styles.duration}>{formatDuration(durationMs)}</span>}\r\n      </div>\r\n\r\n      <div style={styles.content}>\r\n        {status === 'pending' ? (\r\n          <div style={styles.empty}>Waiting for execution...</div>\r\n        ) : status === 'running' ? (\r\n          <div style={styles.empty}>Executing...</div>\r\n        ) : status === 'failed' && error ? (\r\n          <div style={styles.errorMessage}>{error}</div>\r\n        ) : value !== undefined ? (\r\n          <JsonTreeView value={value} />\r\n        ) : (\r\n          <div style={styles.empty}>No value</div>\r\n        )}\r\n      </div>\r\n    </div>\r\n  );\r\n}\r\n\r\ninterface JsonTreeViewProps {\r\n  value: unknown;\r\n  expandDepth?: number;\r\n  depth?: number;\r\n  propertyKey?: string;\r\n}\r\n\r\nconst treeStyles: Record<string, CSSProperties> = {\r\n  host: {\r\n    display: 'block',\r\n    fontFamily: \"'SF Mono', 'Consolas', monospace\",\r\n    fontSize: '12px',\r\n    lineHeight: 1.5,\r\n  },\r\n  treeNode: {\r\n    position: 'relative',\r\n  },\r\n  treeRow: {\r\n    display: 'flex',\r\n    alignItems: 'flex-start',\r\n    padding: '1px 0',\r\n    cursor: 'default',\r\n  },\r\n  toggleBtn: {\r\n    background: 'none',\r\n    border: 'none',\r\n    padding: 0,\r\n    width: '16px',\r\n    height: '16px',\r\n    display: 'flex',\r\n    alignItems: 'center',\r\n    justifyContent: 'center',\r\n    cursor: 'pointer',\r\n    color: 'var(--text-muted, #6e7681)',\r\n    flexShrink: 0,\r\n  },\r\n  togglePlaceholder: {\r\n    width: '16px',\r\n    flexShrink: 0,\r\n  },\r\n  key: {\r\n    color: 'var(--text-secondary, #8b949e)',\r\n    marginRight: '4px',\r\n  },\r\n  colon: {\r\n    color: 'var(--text-muted, #6e7681)',\r\n    marginRight: '4px',\r\n  },\r\n  valueString: {\r\n    color: 'var(--syntax-string, #a5d6ff)',\r\n  },\r\n  valueNumber: {\r\n    color: 'var(--syntax-number, #79c0ff)',\r\n  },\r\n  valueBoolean: {\r\n    color: 'var(--syntax-boolean, #ff7b72)',\r\n  },\r\n  valueNull: {\r\n    color: 'var(--syntax-null, #6e7681)',\r\n    fontStyle: 'italic',\r\n  },\r\n  bracket: {\r\n    color: 'var(--text-muted, #6e7681)',\r\n  },\r\n  typeIndicator: {\r\n    color: 'var(--text-muted, #6e7681)',\r\n    fontSize: '10px',\r\n    marginLeft: '4px',\r\n  },\r\n  children: {\r\n    marginLeft: '16px',\r\n  },\r\n  ellipsis: {\r\n    color: 'var(--text-muted, #6e7681)',\r\n  },\r\n};\r\n\r\nexport function JsonTreeView({ value, expandDepth = 2, depth = 0, propertyKey = '' }: JsonTreeViewProps) {\r\n  const [expanded, setExpanded] = useState(() => expandDepth === -1 || depth < expandDepth);\r\n\r\n  // Update expanded state when expandDepth changes\r\n  useEffect(() => {\r\n    setExpanded(expandDepth === -1 || depth < expandDepth);\r\n  }, [expandDepth, depth]);\r\n\r\n  const isExpandable = (val: unknown): boolean => {\r\n    if (val === null || val === undefined) return false;\r\n    if (Array.isArray(val)) return val.length > 0;\r\n    if (typeof val === 'object') return Object.keys(val).length > 0;\r\n    return false;\r\n  };\r\n\r\n  const getType = (val: unknown): string => {\r\n    if (val === null) return 'null';\r\n    if (val === undefined) return 'undefined';\r\n    if (Array.isArray(val)) return 'array';\r\n    return typeof val;\r\n  };\r\n\r\n  const renderPrimitive = (val: unknown) => {\r\n    if (val === null) {\r\n      return <span style={treeStyles.valueNull}>null</span>;\r\n    }\r\n    if (val === undefined) {\r\n      return <span style={treeStyles.valueNull}>undefined</span>;\r\n    }\r\n    if (typeof val === 'string') {\r\n      const displayVal = val.length > 100 ? val.substring(0, 100) + '...' : val;\r\n      return <span style={treeStyles.valueString}>\"{displayVal}\"</span>;\r\n    }\r\n    if (typeof val === 'number') {\r\n      return <span style={treeStyles.valueNumber}>{val}</span>;\r\n    }\r\n    if (typeof val === 'boolean') {\r\n      return <span style={treeStyles.valueBoolean}>{String(val)}</span>;\r\n    }\r\n    return <span>{String(val)}</span>;\r\n  };\r\n\r\n  const renderCollapsedPreview = (val: unknown) => {\r\n    if (Array.isArray(val)) {\r\n      return (\r\n        <>\r\n          <span style={treeStyles.bracket}>[</span>\r\n          <span style={treeStyles.ellipsis}>...</span>\r\n          <span style={treeStyles.bracket}>]</span>\r\n          <span style={treeStyles.typeIndicator}>{val.length} items</span>\r\n        </>\r\n      );\r\n    }\r\n    if (typeof val === 'object' && val !== null) {\r\n      const keys = Object.keys(val);\r\n      return (\r\n        <>\r\n          <span style={treeStyles.bracket}>{'{'}</span>\r\n          <span style={treeStyles.ellipsis}>...</span>\r\n          <span style={treeStyles.bracket}>{'}'}</span>\r\n          <span style={treeStyles.typeIndicator}>{keys.length} keys</span>\r\n        </>\r\n      );\r\n    }\r\n    return renderPrimitive(val);\r\n  };\r\n\r\n  const expandableValue = isExpandable(value);\r\n  const type = getType(value);\r\n\r\n  const keyPart = propertyKey ? (\r\n    <>\r\n      <span style={treeStyles.key}>{propertyKey}</span>\r\n      <span style={treeStyles.colon}>:</span>\r\n    </>\r\n  ) : null;\r\n\r\n  // Primitives\r\n  if (!expandableValue) {\r\n    return (\r\n      <div style={treeStyles.host}>\r\n        <div style={treeStyles.treeNode}>\r\n          <div\r\n            style={treeStyles.treeRow}\r\n            onMouseEnter={(e) => (e.currentTarget.style.background = 'var(--bg-hover, rgba(48, 54, 61, 0.5))')}\r\n            onMouseLeave={(e) => (e.currentTarget.style.background = 'transparent')}\r\n          >\r\n            <span style={treeStyles.togglePlaceholder}></span>\r\n            {keyPart}\r\n            {renderPrimitive(value)}\r\n          </div>\r\n        </div>\r\n      </div>\r\n    );\r\n  }\r\n\r\n  // Arrays and objects\r\n  const entries =\r\n    type === 'array'\r\n      ? (value as unknown[]).map((v, i) => [String(i), v] as [string, unknown])\r\n      : Object.entries(value as Record<string, unknown>);\r\n\r\n  const openBracket = type === 'array' ? '[' : '{';\r\n  const closeBracket = type === 'array' ? ']' : '}';\r\n\r\n  return (\r\n    <div style={treeStyles.host}>\r\n      <div style={treeStyles.treeNode}>\r\n        <div\r\n          style={treeStyles.treeRow}\r\n          onMouseEnter={(e) => (e.currentTarget.style.background = 'var(--bg-hover, rgba(48, 54, 61, 0.5))')}\r\n          onMouseLeave={(e) => (e.currentTarget.style.background = 'transparent')}\r\n        >\r\n          <button\r\n            style={treeStyles.toggleBtn}\r\n            onClick={() => setExpanded(!expanded)}\r\n            onMouseEnter={(e) => (e.currentTarget.style.color = 'var(--text-primary, #f0f6fc)')}\r\n            onMouseLeave={(e) => (e.currentTarget.style.color = 'var(--text-muted, #6e7681)')}\r\n          >\r\n            <svg viewBox=\"0 0 24 24\" width=\"12\" height=\"12\" fill=\"currentColor\">\r\n              {expanded ? <path d=\"M7 10l5 5 5-5z\" /> : <path d=\"M10 17l5-5-5-5z\" />}\r\n            </svg>\r\n          </button>\r\n          {keyPart}\r\n          {expanded ? (\r\n            <span style={treeStyles.bracket}>{openBracket}</span>\r\n          ) : (\r\n            renderCollapsedPreview(value)\r\n          )}\r\n        </div>\r\n        {expanded && (\r\n          <>\r\n            <div style={treeStyles.children}>\r\n              {entries.map(([key, childVal]) => (\r\n                <JsonTreeView\r\n                  key={key}\r\n                  value={childVal}\r\n                  propertyKey={key}\r\n                  depth={depth + 1}\r\n                  expandDepth={expandDepth}\r\n                />\r\n              ))}\r\n            </div>\r\n            <div\r\n              style={treeStyles.treeRow}\r\n              onMouseEnter={(e) => (e.currentTarget.style.background = 'var(--bg-hover, rgba(48, 54, 61, 0.5))')}\r\n              onMouseLeave={(e) => (e.currentTarget.style.background = 'transparent')}\r\n            >\r\n              <span style={treeStyles.togglePlaceholder}></span>\r\n              <span style={treeStyles.bracket}>{closeBracket}</span>\r\n            </div>\r\n          </>\r\n        )}\r\n      </div>\r\n    </div>\r\n  );\r\n}\r\n\r\nexport default ValueInspector;\r\n","/**\r\n * Constellation Dashboard - Performance Profile View Component\r\n *\r\n * A React component that displays execution profiling data as a waterfall chart.\r\n * Shows timing breakdown for each node in the DAG execution.\r\n */\r\n\r\nimport { useState, useMemo, CSSProperties } from 'react';\r\n\r\nexport interface NodeProfile {\r\n  nodeId: string;\r\n  nodeName: string;\r\n  startTime: number; // ms from execution start\r\n  endTime: number; // ms from execution start\r\n  durationMs: number;\r\n  status: 'completed' | 'failed';\r\n  category?: string;\r\n}\r\n\r\nexport interface ExecutionProfile {\r\n  executionId: string;\r\n  dagName: string;\r\n  startTime: number; // Unix timestamp\r\n  totalDurationMs: number;\r\n  nodes: NodeProfile[];\r\n}\r\n\r\nexport interface ProfileViewProps {\r\n  profile: ExecutionProfile | null;\r\n  visible?: boolean;\r\n  onClose?: () => void;\r\n  onNodeClick?: (nodeId: string) => void;\r\n}\r\n\r\nconst styles: Record<string, CSSProperties> = {\r\n  container: {\r\n    background: 'var(--bg-secondary, #161b22)',\r\n    borderRadius: 'var(--radius-md, 6px)',\r\n    border: '1px solid var(--border-primary, #30363d)',\r\n    overflow: 'hidden',\r\n    display: 'flex',\r\n    flexDirection: 'column',\r\n    height: '100%',\r\n  },\r\n  header: {\r\n    display: 'flex',\r\n    alignItems: 'center',\r\n    justifyContent: 'space-between',\r\n    padding: 'var(--spacing-sm, 8px) var(--spacing-md, 12px)',\r\n    background: 'var(--bg-tertiary, #21262d)',\r\n    borderBottom: '1px solid var(--border-primary, #30363d)',\r\n  },\r\n  title: {\r\n    fontSize: '13px',\r\n    fontWeight: 600,\r\n    color: 'var(--text-primary, #f0f6fc)',\r\n  },\r\n  closeBtn: {\r\n    background: 'none',\r\n    border: 'none',\r\n    color: 'var(--text-secondary, #8b949e)',\r\n    cursor: 'pointer',\r\n    padding: '4px',\r\n    borderRadius: '4px',\r\n    display: 'flex',\r\n    alignItems: 'center',\r\n    justifyContent: 'center',\r\n  },\r\n  summary: {\r\n    display: 'flex',\r\n    gap: 'var(--spacing-lg, 24px)',\r\n    padding: 'var(--spacing-sm, 8px) var(--spacing-md, 12px)',\r\n    borderBottom: '1px solid var(--border-secondary, #21262d)',\r\n    fontSize: '12px',\r\n  },\r\n  summaryItem: {\r\n    display: 'flex',\r\n    alignItems: 'center',\r\n    gap: '6px',\r\n  },\r\n  summaryLabel: {\r\n    color: 'var(--text-muted, #6e7681)',\r\n  },\r\n  summaryValue: {\r\n    color: 'var(--text-primary, #f0f6fc)',\r\n    fontWeight: 500,\r\n    fontFamily: \"'SF Mono', 'Consolas', monospace\",\r\n  },\r\n  content: {\r\n    flex: 1,\r\n    overflow: 'auto',\r\n    padding: 'var(--spacing-md, 12px)',\r\n  },\r\n  waterfall: {\r\n    position: 'relative',\r\n    minWidth: '100%',\r\n  },\r\n  timeline: {\r\n    display: 'flex',\r\n    justifyContent: 'space-between',\r\n    marginBottom: '8px',\r\n    paddingLeft: '140px',\r\n    fontSize: '10px',\r\n    color: 'var(--text-muted, #6e7681)',\r\n    fontFamily: \"'SF Mono', 'Consolas', monospace\",\r\n  },\r\n  row: {\r\n    display: 'flex',\r\n    alignItems: 'center',\r\n    height: '28px',\r\n    marginBottom: '4px',\r\n  },\r\n  nodeName: {\r\n    width: '140px',\r\n    flexShrink: 0,\r\n    fontSize: '12px',\r\n    color: 'var(--text-secondary, #8b949e)',\r\n    overflow: 'hidden',\r\n    textOverflow: 'ellipsis',\r\n    whiteSpace: 'nowrap',\r\n    paddingRight: '8px',\r\n  },\r\n  barContainer: {\r\n    flex: 1,\r\n    height: '20px',\r\n    position: 'relative',\r\n    background: 'var(--bg-primary, #0d1117)',\r\n    borderRadius: '3px',\r\n  },\r\n  bar: {\r\n    position: 'absolute',\r\n    height: '100%',\r\n    borderRadius: '3px',\r\n    cursor: 'pointer',\r\n    transition: 'opacity 0.15s',\r\n    display: 'flex',\r\n    alignItems: 'center',\r\n    justifyContent: 'flex-end',\r\n    paddingRight: '6px',\r\n    fontSize: '10px',\r\n    fontFamily: \"'SF Mono', 'Consolas', monospace\",\r\n    color: 'white',\r\n    overflow: 'hidden',\r\n    whiteSpace: 'nowrap',\r\n  },\r\n  barCompleted: {\r\n    background: 'linear-gradient(90deg, var(--status-success, #3fb950) 0%, #2ea043 100%)',\r\n  },\r\n  barFailed: {\r\n    background: 'linear-gradient(90deg, var(--status-failed, #f85149) 0%, #da3633 100%)',\r\n  },\r\n  empty: {\r\n    display: 'flex',\r\n    flexDirection: 'column',\r\n    alignItems: 'center',\r\n    justifyContent: 'center',\r\n    height: '200px',\r\n    color: 'var(--text-muted, #6e7681)',\r\n    fontSize: '14px',\r\n  },\r\n  emptyIcon: {\r\n    width: '48px',\r\n    height: '48px',\r\n    marginBottom: '12px',\r\n    opacity: 0.5,\r\n  },\r\n  sortControls: {\r\n    display: 'flex',\r\n    gap: '8px',\r\n    padding: '8px 12px',\r\n    borderBottom: '1px solid var(--border-secondary, #21262d)',\r\n    fontSize: '11px',\r\n  },\r\n  sortBtn: {\r\n    background: 'var(--bg-tertiary, #21262d)',\r\n    border: '1px solid var(--border-primary, #30363d)',\r\n    borderRadius: '4px',\r\n    padding: '4px 8px',\r\n    color: 'var(--text-secondary, #8b949e)',\r\n    cursor: 'pointer',\r\n    fontSize: '11px',\r\n  },\r\n  sortBtnActive: {\r\n    background: 'var(--accent-primary, #58a6ff)',\r\n    borderColor: 'var(--accent-primary, #58a6ff)',\r\n    color: 'white',\r\n  },\r\n};\r\n\r\ntype SortMode = 'timeline' | 'duration' | 'name';\r\n\r\nfunction formatDuration(ms: number): string {\r\n  if (ms < 1) return '<1ms';\r\n  if (ms < 1000) return `${Math.round(ms)}ms`;\r\n  return `${(ms / 1000).toFixed(2)}s`;\r\n}\r\n\r\nfunction formatTimestamp(ts: number): string {\r\n  const date = new Date(ts);\r\n  return date.toLocaleTimeString();\r\n}\r\n\r\nexport function ProfileView({ profile, visible = true, onClose, onNodeClick }: ProfileViewProps) {\r\n  const [sortMode, setSortMode] = useState<SortMode>('timeline');\r\n  const [hoveredNode, setHoveredNode] = useState<string | null>(null);\r\n\r\n  const sortedNodes = useMemo(() => {\r\n    if (!profile) return [];\r\n\r\n    const nodes = [...profile.nodes];\r\n\r\n    switch (sortMode) {\r\n      case 'timeline':\r\n        return nodes.sort((a, b) => a.startTime - b.startTime);\r\n      case 'duration':\r\n        return nodes.sort((a, b) => b.durationMs - a.durationMs);\r\n      case 'name':\r\n        return nodes.sort((a, b) => a.nodeName.localeCompare(b.nodeName));\r\n      default:\r\n        return nodes;\r\n    }\r\n  }, [profile, sortMode]);\r\n\r\n  const timelineMarks = useMemo(() => {\r\n    if (!profile || profile.totalDurationMs === 0) return [];\r\n\r\n    const total = profile.totalDurationMs;\r\n    const marks = [0, total * 0.25, total * 0.5, total * 0.75, total];\r\n\r\n    return marks.map((ms) => formatDuration(ms));\r\n  }, [profile]);\r\n\r\n  if (!visible) {\r\n    return null;\r\n  }\r\n\r\n  if (!profile) {\r\n    return (\r\n      <div style={styles.container}>\r\n        <div style={styles.header}>\r\n          <span style={styles.title}>Performance Profile</span>\r\n          {onClose && (\r\n            <button\r\n              style={styles.closeBtn}\r\n              onClick={onClose}\r\n              title=\"Close\"\r\n              onMouseEnter={(e) => {\r\n                e.currentTarget.style.background = 'var(--bg-hover, #30363d)';\r\n              }}\r\n              onMouseLeave={(e) => {\r\n                e.currentTarget.style.background = 'none';\r\n              }}\r\n            >\r\n              <svg viewBox=\"0 0 24 24\" width=\"16\" height=\"16\" fill=\"currentColor\">\r\n                <path d=\"M19 6.41L17.59 5 12 10.59 6.41 5 5 6.41 10.59 12 5 17.59 6.41 19 12 13.41 17.59 19 19 17.59 13.41 12z\" />\r\n              </svg>\r\n            </button>\r\n          )}\r\n        </div>\r\n        <div style={styles.empty}>\r\n          <svg style={styles.emptyIcon} viewBox=\"0 0 24 24\" fill=\"currentColor\">\r\n            <path d=\"M13 3c-4.97 0-9 4.03-9 9H1l3.89 3.89.07.14L9 12H6c0-3.87 3.13-7 7-7s7 3.13 7 7-3.13 7-7 7c-1.93 0-3.68-.79-4.94-2.06l-1.42 1.42C8.27 19.99 10.51 21 13 21c4.97 0 9-4.03 9-9s-4.03-9-9-9zm-1 5v5l4.28 2.54.72-1.21-3.5-2.08V8H12z\" />\r\n          </svg>\r\n          <div>No execution profile available</div>\r\n          <div style={{ fontSize: '12px', marginTop: '4px' }}>Run a pipeline to see timing data</div>\r\n        </div>\r\n      </div>\r\n    );\r\n  }\r\n\r\n  const total = profile.totalDurationMs || 1; // Avoid division by zero\r\n\r\n  return (\r\n    <div style={styles.container}>\r\n      <div style={styles.header}>\r\n        <span style={styles.title}>Performance Profile</span>\r\n        {onClose && (\r\n          <button\r\n            style={styles.closeBtn}\r\n            onClick={onClose}\r\n            title=\"Close\"\r\n            onMouseEnter={(e) => {\r\n              e.currentTarget.style.background = 'var(--bg-hover, #30363d)';\r\n            }}\r\n            onMouseLeave={(e) => {\r\n              e.currentTarget.style.background = 'none';\r\n            }}\r\n          >\r\n            <svg viewBox=\"0 0 24 24\" width=\"16\" height=\"16\" fill=\"currentColor\">\r\n              <path d=\"M19 6.41L17.59 5 12 10.59 6.41 5 5 6.41 10.59 12 5 17.59 6.41 19 12 13.41 17.59 19 19 17.59 13.41 12z\" />\r\n            </svg>\r\n          </button>\r\n        )}\r\n      </div>\r\n\r\n      <div style={styles.summary}>\r\n        <div style={styles.summaryItem}>\r\n          <span style={styles.summaryLabel}>DAG:</span>\r\n          <span style={styles.summaryValue}>{profile.dagName}</span>\r\n        </div>\r\n        <div style={styles.summaryItem}>\r\n          <span style={styles.summaryLabel}>Total:</span>\r\n          <span style={styles.summaryValue}>{formatDuration(profile.totalDurationMs)}</span>\r\n        </div>\r\n        <div style={styles.summaryItem}>\r\n          <span style={styles.summaryLabel}>Nodes:</span>\r\n          <span style={styles.summaryValue}>{profile.nodes.length}</span>\r\n        </div>\r\n        <div style={styles.summaryItem}>\r\n          <span style={styles.summaryLabel}>Started:</span>\r\n          <span style={styles.summaryValue}>{formatTimestamp(profile.startTime)}</span>\r\n        </div>\r\n      </div>\r\n\r\n      <div style={styles.sortControls}>\r\n        <span style={{ color: 'var(--text-muted, #6e7681)' }}>Sort by:</span>\r\n        <button\r\n          style={{ ...styles.sortBtn, ...(sortMode === 'timeline' ? styles.sortBtnActive : {}) }}\r\n          onClick={() => setSortMode('timeline')}\r\n        >\r\n          Timeline\r\n        </button>\r\n        <button\r\n          style={{ ...styles.sortBtn, ...(sortMode === 'duration' ? styles.sortBtnActive : {}) }}\r\n          onClick={() => setSortMode('duration')}\r\n        >\r\n          Duration\r\n        </button>\r\n        <button\r\n          style={{ ...styles.sortBtn, ...(sortMode === 'name' ? styles.sortBtnActive : {}) }}\r\n          onClick={() => setSortMode('name')}\r\n        >\r\n          Name\r\n        </button>\r\n      </div>\r\n\r\n      <div style={styles.content}>\r\n        <div style={styles.waterfall}>\r\n          {/* Timeline markers */}\r\n          <div style={styles.timeline}>\r\n            {timelineMarks.map((mark, i) => (\r\n              <span key={i}>{mark}</span>\r\n            ))}\r\n          </div>\r\n\r\n          {/* Node bars */}\r\n          {sortedNodes.map((node) => {\r\n            const left = (node.startTime / total) * 100;\r\n            const width = Math.max((node.durationMs / total) * 100, 1); // Min 1% width for visibility\r\n\r\n            return (\r\n              <div key={node.nodeId} style={styles.row}>\r\n                <div style={styles.nodeName} title={node.nodeName}>\r\n                  {node.nodeName}\r\n                </div>\r\n                <div style={styles.barContainer}>\r\n                  <div\r\n                    style={{\r\n                      ...styles.bar,\r\n                      ...(node.status === 'completed' ? styles.barCompleted : styles.barFailed),\r\n                      left: `${left}%`,\r\n                      width: `${width}%`,\r\n                      opacity: hoveredNode && hoveredNode !== node.nodeId ? 0.5 : 1,\r\n                    }}\r\n                    onClick={() => onNodeClick?.(node.nodeId)}\r\n                    onMouseEnter={() => setHoveredNode(node.nodeId)}\r\n                    onMouseLeave={() => setHoveredNode(null)}\r\n                    title={`${node.nodeName}: ${formatDuration(node.durationMs)}`}\r\n                  >\r\n                    {width > 8 && formatDuration(node.durationMs)}\r\n                  </div>\r\n                </div>\r\n              </div>\r\n            );\r\n          })}\r\n        </div>\r\n      </div>\r\n    </div>\r\n  );\r\n}\r\n\r\nexport default ProfileView;\r\n","/**\r\n * Constellation Dashboard - React Application Shell\r\n *\r\n * Main React component that integrates the new IDE features.\r\n * Uses React portals to render into specific DOM locations.\r\n */\r\n\r\nimport { useState, useCallback, useEffect, lazy, Suspense } from 'react';\r\nimport { createPortal } from 'react-dom';\r\nimport { ErrorBanner } from './components/ErrorBanner.js';\r\nimport { ErrorPanel, CompileError } from './components/ErrorPanel.js';\r\nimport { InputPresets } from './components/InputPresets.js';\r\nimport { ModuleBrowser, ModuleInfo } from './components/ModuleBrowser.js';\r\nimport { ValueInspector, NodeValue } from './components/ValueInspector.js';\r\nimport { ProfileView, ExecutionProfile } from './components/ProfileView.js';\r\n\r\n// Lazy load Monaco Editor for code splitting\r\nconst MonacoEditor = lazy(() => import('./components/MonacoEditor.js'));\r\n\r\nexport interface AppProps {\r\n  // Callbacks to integrate with vanilla JS dashboard\r\n  onInsertCode?: (code: string) => void;\r\n  onGotoLine?: (line: number, column?: number) => void;\r\n  onLoadPreset?: (inputs: Record<string, unknown>) => void;\r\n  onSavePreset?: (name: string) => void;\r\n}\r\n\r\nexport function App({ onInsertCode, onGotoLine, onLoadPreset, onSavePreset }: AppProps) {\r\n  // Global error state\r\n  const [globalError, setGlobalError] = useState<string | null>(null);\r\n\r\n  // Module browser state\r\n  const [modules, setModules] = useState<ModuleInfo[]>([]);\r\n  const [showModuleBrowser, setShowModuleBrowser] = useState(false);\r\n\r\n  // Error panel state\r\n  const [compileErrors, setCompileErrors] = useState<CompileError[]>([]);\r\n\r\n  // Value inspector state\r\n  const [selectedNodeValue, setSelectedNodeValue] = useState<NodeValue | null>(null);\r\n  const [showValueInspector, setShowValueInspector] = useState(false);\r\n\r\n  // Current script path for presets\r\n  const [currentScriptPath, setCurrentScriptPath] = useState<string>('');\r\n\r\n  // Profile view state\r\n  const [executionProfile, setExecutionProfile] = useState<ExecutionProfile | null>(null);\r\n  const [showProfileView, setShowProfileView] = useState(false);\r\n\r\n  // Monaco editor state\r\n  const [showMonacoEditor, setShowMonacoEditor] = useState(false);\r\n  const [monacoValue, setMonacoValue] = useState('');\r\n\r\n  // Mount points\r\n  const [errorBannerMount, setErrorBannerMount] = useState<HTMLElement | null>(null);\r\n  const [inputPresetsMount, setInputPresetsMount] = useState<HTMLElement | null>(null);\r\n  const [errorPanelMount, setErrorPanelMount] = useState<HTMLElement | null>(null);\r\n\r\n  // Find mount points on load\r\n  useEffect(() => {\r\n    setErrorBannerMount(document.getElementById('error-banner-mount'));\r\n    setInputPresetsMount(document.getElementById('input-presets-mount'));\r\n    setErrorPanelMount(document.getElementById('error-panel-mount'));\r\n  }, []);\r\n\r\n  // Load modules on mount\r\n  useEffect(() => {\r\n    loadModules();\r\n  }, []);\r\n\r\n  // Set up toolbar button handlers\r\n  useEffect(() => {\r\n    const moduleBrowserBtn = document.getElementById('module-browser-btn');\r\n    const profileViewBtn = document.getElementById('profile-view-btn');\r\n    const monacoEditorBtn = document.getElementById('monaco-editor-btn');\r\n\r\n    const handlers: Array<[HTMLElement | null, () => void]> = [\r\n      [moduleBrowserBtn, () => setShowModuleBrowser(true)],\r\n      [profileViewBtn, () => setShowProfileView((prev) => !prev)],\r\n      [monacoEditorBtn, () => setShowMonacoEditor(true)],\r\n    ];\r\n\r\n    handlers.forEach(([btn, handler]) => {\r\n      if (btn) btn.addEventListener('click', handler);\r\n    });\r\n\r\n    return () => {\r\n      handlers.forEach(([btn, handler]) => {\r\n        if (btn) btn.removeEventListener('click', handler);\r\n      });\r\n    };\r\n  }, []);\r\n\r\n  // Expose React state setters to vanilla JS via window\r\n  useEffect(() => {\r\n    const reactBridge = {\r\n      setGlobalError,\r\n      setCompileErrors: (errors: CompileError[]) => {\r\n        setCompileErrors(errors);\r\n      },\r\n      setCompileErrorsFromStrings: (errors: string[]) => {\r\n        // Convert string errors to CompileError format\r\n        const compileErrors: CompileError[] = errors.map((msg, index) => {\r\n          // Try to parse line:col from error message\r\n          const match = msg.match(/line (\\d+)(?::(\\d+))?/i);\r\n          return {\r\n            code: `E${String(index + 1).padStart(3, '0')}`,\r\n            message: msg,\r\n            line: match ? parseInt(match[1], 10) : undefined,\r\n            column: match && match[2] ? parseInt(match[2], 10) : undefined,\r\n          };\r\n        });\r\n        setCompileErrors(compileErrors);\r\n      },\r\n      clearCompileErrors: () => setCompileErrors([]),\r\n      setSelectedNodeValue: (value: NodeValue | null) => {\r\n        setSelectedNodeValue(value);\r\n        setShowValueInspector(value !== null);\r\n      },\r\n      setCurrentScriptPath,\r\n      showModuleBrowser: () => setShowModuleBrowser(true),\r\n      hideModuleBrowser: () => setShowModuleBrowser(false),\r\n      toggleModuleBrowser: () => setShowModuleBrowser((prev) => !prev),\r\n      // Profile view methods\r\n      setExecutionProfile: (profile: ExecutionProfile | null) => {\r\n        setExecutionProfile(profile);\r\n        if (profile) setShowProfileView(true);\r\n      },\r\n      showProfileView: () => setShowProfileView(true),\r\n      hideProfileView: () => setShowProfileView(false),\r\n      toggleProfileView: () => setShowProfileView((prev) => !prev),\r\n      // Monaco editor methods\r\n      setMonacoValue: (value: string) => setMonacoValue(value),\r\n      showMonacoEditor: () => setShowMonacoEditor(true),\r\n      hideMonacoEditor: () => setShowMonacoEditor(false),\r\n      toggleMonacoEditor: () => setShowMonacoEditor((prev) => !prev),\r\n    };\r\n\r\n    (window as Window & { reactBridge?: typeof reactBridge }).reactBridge = reactBridge;\r\n\r\n    return () => {\r\n      delete (window as Window & { reactBridge?: typeof reactBridge }).reactBridge;\r\n    };\r\n  }, []);\r\n\r\n  const loadModules = async () => {\r\n    try {\r\n      const response = await fetch('/api/v1/modules');\r\n      if (response.ok) {\r\n        const data = await response.json();\r\n        // Transform API response to ModuleInfo format\r\n        const moduleList: ModuleInfo[] = (data.modules || []).map(\r\n          (m: {\r\n            name: string;\r\n            description?: string;\r\n            version?: string;\r\n            category?: string;\r\n            inputs?: Record<string, string>;\r\n            outputs?: Record<string, string>;\r\n            examples?: string[];\r\n          }) => ({\r\n            name: m.name,\r\n            description: m.description || '',\r\n            version: m.version || '1.0',\r\n            category: m.category,\r\n            inputs: m.inputs || {},\r\n            outputs: m.outputs || {},\r\n            examples: m.examples || [],\r\n          })\r\n        );\r\n        setModules(moduleList);\r\n      }\r\n    } catch (error) {\r\n      console.error('Failed to load modules:', error);\r\n    }\r\n  };\r\n\r\n  const handleDismissError = useCallback(() => {\r\n    setGlobalError(null);\r\n  }, []);\r\n\r\n  const handleInsertModule = useCallback(\r\n    (code: string, _module: ModuleInfo) => {\r\n      onInsertCode?.(code);\r\n      setShowModuleBrowser(false);\r\n    },\r\n    [onInsertCode]\r\n  );\r\n\r\n  const handleGotoLine = useCallback(\r\n    (line: number, column?: number) => {\r\n      onGotoLine?.(line, column);\r\n    },\r\n    [onGotoLine]\r\n  );\r\n\r\n  const handleLoadPreset = useCallback(\r\n    (inputs: Record<string, unknown>) => {\r\n      onLoadPreset?.(inputs);\r\n    },\r\n    [onLoadPreset]\r\n  );\r\n\r\n  const handleSavePreset = useCallback(\r\n    (name: string) => {\r\n      onSavePreset?.(name);\r\n    },\r\n    [onSavePreset]\r\n  );\r\n\r\n  const handleCloseValueInspector = useCallback(() => {\r\n    setShowValueInspector(false);\r\n    setSelectedNodeValue(null);\r\n  }, []);\r\n\r\n  const handleCloseProfileView = useCallback(() => {\r\n    setShowProfileView(false);\r\n  }, []);\r\n\r\n  const handleProfileNodeClick = useCallback((nodeId: string) => {\r\n    // Find the node in the profile and show its value\r\n    if (executionProfile) {\r\n      const node = executionProfile.nodes.find(n => n.nodeId === nodeId);\r\n      if (node) {\r\n        setSelectedNodeValue({\r\n          nodeId: node.nodeId,\r\n          nodeName: node.nodeName,\r\n          status: node.status,\r\n          durationMs: node.durationMs,\r\n        });\r\n        setShowValueInspector(true);\r\n      }\r\n    }\r\n  }, [executionProfile]);\r\n\r\n  const handleMonacoChange = useCallback((value: string) => {\r\n    setMonacoValue(value);\r\n    // Notify vanilla JS of editor changes\r\n    const monacoMethods = (window as Window & { monacoEditor?: { onValueChange?: (v: string) => void } }).monacoEditor;\r\n    monacoMethods?.onValueChange?.(value);\r\n  }, []);\r\n\r\n  const handleMonacoSave = useCallback((value: string) => {\r\n    // Notify vanilla JS of save action\r\n    const monacoMethods = (window as Window & { monacoEditor?: { onSave?: (v: string) => void } }).monacoEditor;\r\n    monacoMethods?.onSave?.(value);\r\n  }, []);\r\n\r\n  return (\r\n    <>\r\n      {/* Global Error Banner - Portal into header area */}\r\n      {errorBannerMount &&\r\n        createPortal(\r\n          <ErrorBanner\r\n            message={globalError || ''}\r\n            visible={globalError !== null}\r\n            severity=\"error\"\r\n            dismissable\r\n            onDismiss={handleDismissError}\r\n          />,\r\n          errorBannerMount\r\n        )}\r\n\r\n      {/* Input Presets - Portal into inputs panel header */}\r\n      {inputPresetsMount &&\r\n        currentScriptPath &&\r\n        createPortal(\r\n          <InputPresets\r\n            scriptPath={currentScriptPath}\r\n            onLoadPreset={handleLoadPreset}\r\n            onSavePreset={handleSavePreset}\r\n          />,\r\n          inputPresetsMount\r\n        )}\r\n\r\n      {/* Error Panel - Portal into editor area */}\r\n      {errorPanelMount &&\r\n        compileErrors.length > 0 &&\r\n        createPortal(\r\n          <ErrorPanel errors={compileErrors} expanded={true} onGotoLine={handleGotoLine} />,\r\n          errorPanelMount\r\n        )}\r\n\r\n      {/* Module Browser Overlay - Full screen modal */}\r\n      {showModuleBrowser && (\r\n        <div\r\n          style={{\r\n            position: 'fixed',\r\n            top: 0,\r\n            left: 0,\r\n            right: 0,\r\n            bottom: 0,\r\n            background: 'rgba(0, 0, 0, 0.6)',\r\n            zIndex: 1000,\r\n            display: 'flex',\r\n            alignItems: 'center',\r\n            justifyContent: 'center',\r\n            padding: '20px',\r\n          }}\r\n          onClick={(e) => {\r\n            if (e.target === e.currentTarget) {\r\n              setShowModuleBrowser(false);\r\n            }\r\n          }}\r\n        >\r\n          <div\r\n            style={{\r\n              width: '100%',\r\n              maxWidth: '900px',\r\n              height: '80vh',\r\n              background: 'var(--bg-primary, #0d1117)',\r\n              borderRadius: 'var(--radius-lg, 8px)',\r\n              border: '1px solid var(--border-primary, #30363d)',\r\n              boxShadow: '0 8px 32px rgba(0, 0, 0, 0.4)',\r\n              overflow: 'hidden',\r\n            }}\r\n          >\r\n            <ModuleBrowser\r\n              modules={modules}\r\n              visible={true}\r\n              onClose={() => setShowModuleBrowser(false)}\r\n              onInsertModule={handleInsertModule}\r\n            />\r\n          </div>\r\n        </div>\r\n      )}\r\n\r\n      {/* Value Inspector - Fixed position overlay */}\r\n      {showValueInspector && selectedNodeValue && (\r\n        <div\r\n          style={{\r\n            position: 'fixed',\r\n            top: '80px',\r\n            right: '20px',\r\n            width: '380px',\r\n            zIndex: 500,\r\n            boxShadow: '0 4px 16px rgba(0, 0, 0, 0.3)',\r\n            borderRadius: 'var(--radius-md, 6px)',\r\n          }}\r\n        >\r\n          <ValueInspector\r\n            nodeValue={selectedNodeValue}\r\n            visible={true}\r\n            onClose={handleCloseValueInspector}\r\n          />\r\n        </div>\r\n      )}\r\n\r\n      {/* Profile View - Fixed position overlay */}\r\n      {showProfileView && (\r\n        <div\r\n          style={{\r\n            position: 'fixed',\r\n            bottom: '20px',\r\n            left: '20px',\r\n            right: '20px',\r\n            height: '300px',\r\n            zIndex: 400,\r\n            boxShadow: '0 -4px 16px rgba(0, 0, 0, 0.3)',\r\n            borderRadius: 'var(--radius-md, 6px)',\r\n          }}\r\n        >\r\n          <ProfileView\r\n            profile={executionProfile}\r\n            visible={true}\r\n            onClose={handleCloseProfileView}\r\n            onNodeClick={handleProfileNodeClick}\r\n          />\r\n        </div>\r\n      )}\r\n\r\n      {/* Monaco Editor Modal - For advanced editing */}\r\n      {showMonacoEditor && (\r\n        <div\r\n          style={{\r\n            position: 'fixed',\r\n            top: 0,\r\n            left: 0,\r\n            right: 0,\r\n            bottom: 0,\r\n            background: 'rgba(0, 0, 0, 0.8)',\r\n            zIndex: 1100,\r\n            display: 'flex',\r\n            flexDirection: 'column',\r\n          }}\r\n        >\r\n          <div\r\n            style={{\r\n              display: 'flex',\r\n              alignItems: 'center',\r\n              justifyContent: 'space-between',\r\n              padding: '8px 16px',\r\n              background: 'var(--bg-tertiary, #21262d)',\r\n              borderBottom: '1px solid var(--border-primary, #30363d)',\r\n            }}\r\n          >\r\n            <span style={{ color: 'var(--text-primary, #f0f6fc)', fontSize: '14px', fontWeight: 500 }}>\r\n              Monaco Editor (Advanced)\r\n            </span>\r\n            <button\r\n              onClick={() => setShowMonacoEditor(false)}\r\n              style={{\r\n                background: 'none',\r\n                border: 'none',\r\n                color: 'var(--text-secondary, #8b949e)',\r\n                cursor: 'pointer',\r\n                padding: '4px 8px',\r\n                fontSize: '12px',\r\n              }}\r\n            >\r\n              Close (Esc)\r\n            </button>\r\n          </div>\r\n          <div style={{ flex: 1 }}>\r\n            <Suspense\r\n              fallback={\r\n                <div\r\n                  style={{\r\n                    display: 'flex',\r\n                    alignItems: 'center',\r\n                    justifyContent: 'center',\r\n                    height: '100%',\r\n                    color: 'var(--text-muted, #6e7681)',\r\n                  }}\r\n                >\r\n                  Loading Monaco Editor...\r\n                </div>\r\n              }\r\n            >\r\n              <MonacoEditor\r\n                value={monacoValue}\r\n                onChange={handleMonacoChange}\r\n                onSave={handleMonacoSave}\r\n              />\r\n            </Suspense>\r\n          </div>\r\n        </div>\r\n      )}\r\n    </>\r\n  );\r\n}\r\n\r\nexport default App;\r\n","/**\r\n * Constellation Dashboard - File Browser Component\r\n *\r\n * Provides a tree view for browsing .cst files in the configured directory.\r\n */\r\n\r\nclass FileBrowser {\r\n    private container: HTMLElement;\r\n    private onFileSelect: (path: string) => void;\r\n    private selectedFile: string | null;\r\n    private expandedFolders: Set<string>;\r\n\r\n    constructor(containerId: string, onFileSelect: (path: string) => void) {\r\n        this.container = document.getElementById(containerId)!;\r\n        this.onFileSelect = onFileSelect;\r\n        this.selectedFile = null;\r\n        this.expandedFolders = new Set();\r\n    }\r\n\r\n    /**\r\n     * Load the file tree from the API\r\n     */\r\n    async load(): Promise<void> {\r\n        try {\r\n            const response = await fetch('/api/v1/files');\r\n            if (!response.ok) {\r\n                throw new Error(`Failed to load files: ${response.statusText}`);\r\n            }\r\n            const data: FilesResponse = await response.json();\r\n            this.render(data.files);\r\n        } catch (error) {\r\n            console.error('Error loading files:', error);\r\n            this.container.innerHTML = `\r\n                <div class=\"placeholder-text\">\r\n                    Failed to load files: ${(error as Error).message}\r\n                </div>\r\n            `;\r\n        }\r\n    }\r\n\r\n    /**\r\n     * Render the file tree\r\n     */\r\n    render(files: FileNode[]): void {\r\n        if (!files || files.length === 0) {\r\n            this.container.innerHTML = `\r\n                <div class=\"placeholder-text\">\r\n                    No .cst files found\r\n                </div>\r\n            `;\r\n            return;\r\n        }\r\n\r\n        this.container.innerHTML = '';\r\n        this.renderNodes(files, this.container);\r\n        this.autoExpandToFiles();\r\n    }\r\n\r\n    /**\r\n     * Auto-expand all folders that contain .cst files so scripts are visible on load\r\n     */\r\n    private autoExpandToFiles(): void {\r\n        const files = this.container.querySelectorAll('.file');\r\n        files.forEach(file => {\r\n            let parent = file.parentElement;\r\n            while (parent && parent !== this.container) {\r\n                if (parent.classList.contains('folder') && parent.classList.contains('collapsed')) {\r\n                    parent.classList.remove('collapsed');\r\n                    const chevron = parent.querySelector(':scope > .file-item .chevron') as HTMLElement | null;\r\n                    if (chevron) {\r\n                        chevron.style.transform = 'rotate(90deg)';\r\n                    }\r\n                    if ((parent as HTMLElement).dataset.path) {\r\n                        this.expandedFolders.add((parent as HTMLElement).dataset.path!);\r\n                    }\r\n                }\r\n                parent = parent.parentElement;\r\n            }\r\n        });\r\n    }\r\n\r\n    /**\r\n     * Render file tree nodes recursively\r\n     */\r\n    private renderNodes(nodes: FileNode[], parent: HTMLElement): void {\r\n        nodes.forEach(node => {\r\n            if (node.fileType === 'directory') {\r\n                const folder = this.createFolderElement(node);\r\n                parent.appendChild(folder);\r\n            } else {\r\n                const file = this.createFileElement(node);\r\n                parent.appendChild(file);\r\n            }\r\n        });\r\n    }\r\n\r\n    /**\r\n     * Create a folder element\r\n     */\r\n    private createFolderElement(node: FileNode): HTMLElement {\r\n        const folder = document.createElement('div');\r\n        folder.className = 'folder';\r\n        folder.dataset.path = node.path;\r\n        if (!this.expandedFolders.has(node.path)) {\r\n            folder.classList.add('collapsed');\r\n        }\r\n\r\n        const item = document.createElement('div');\r\n        item.className = 'file-item';\r\n        item.innerHTML = `\r\n            <svg class=\"icon\" viewBox=\"0 0 24 24\">\r\n                <path fill=\"currentColor\" d=\"M10 4H4c-1.1 0-2 .9-2 2v12c0 1.1.9 2 2 2h16c1.1 0 2-.9 2-2V8c0-1.1-.9-2-2-2h-8l-2-2z\"/>\r\n            </svg>\r\n            <span class=\"name\">${this.escapeHtml(node.name)}</span>\r\n            <svg class=\"chevron icon\" viewBox=\"0 0 24 24\" style=\"transform: ${this.expandedFolders.has(node.path) ? 'rotate(90deg)' : 'rotate(0)'}\">\r\n                <path fill=\"currentColor\" d=\"M10 6L8.59 7.41 13.17 12l-4.58 4.59L10 18l6-6z\"/>\r\n            </svg>\r\n        `;\r\n\r\n        item.addEventListener('click', (e: Event) => {\r\n            e.stopPropagation();\r\n            this.toggleFolder(folder, node.path);\r\n        });\r\n\r\n        folder.appendChild(item);\r\n\r\n        if (node.children && node.children.length > 0) {\r\n            const contents = document.createElement('div');\r\n            contents.className = 'folder-contents';\r\n            this.renderNodes(node.children, contents);\r\n            folder.appendChild(contents);\r\n        }\r\n\r\n        return folder;\r\n    }\r\n\r\n    /**\r\n     * Create a file element\r\n     */\r\n    private createFileElement(node: FileNode): HTMLElement {\r\n        const file = document.createElement('div');\r\n        file.className = 'file';\r\n        file.dataset.path = node.path;\r\n\r\n        const item = document.createElement('div');\r\n        item.className = 'file-item';\r\n        if (this.selectedFile === node.path) {\r\n            item.classList.add('selected');\r\n        }\r\n\r\n        item.innerHTML = `\r\n            <svg class=\"icon\" viewBox=\"0 0 24 24\">\r\n                <path fill=\"currentColor\" d=\"M14 2H6c-1.1 0-2 .9-2 2v16c0 1.1.9 2 2 2h12c1.1 0 2-.9 2-2V8l-6-6zm-1 7V3.5L18.5 9H13z\"/>\r\n            </svg>\r\n            <span class=\"name\">${this.escapeHtml(node.name)}</span>\r\n        `;\r\n\r\n        item.addEventListener('click', (e: Event) => {\r\n            e.stopPropagation();\r\n            this.selectFile(node.path, item);\r\n        });\r\n\r\n        file.appendChild(item);\r\n        return file;\r\n    }\r\n\r\n    /**\r\n     * Toggle folder expansion\r\n     */\r\n    private toggleFolder(folderElement: HTMLElement, path: string): void {\r\n        const isCollapsed = folderElement.classList.contains('collapsed');\r\n        folderElement.classList.toggle('collapsed');\r\n\r\n        const chevron = folderElement.querySelector('.chevron') as HTMLElement | null;\r\n        if (chevron) {\r\n            chevron.style.transform = isCollapsed ? 'rotate(90deg)' : 'rotate(0)';\r\n        }\r\n\r\n        if (isCollapsed) {\r\n            this.expandedFolders.add(path);\r\n        } else {\r\n            this.expandedFolders.delete(path);\r\n        }\r\n    }\r\n\r\n    /**\r\n     * Select a file\r\n     */\r\n    private selectFile(path: string, itemElement: HTMLElement): void {\r\n        // Remove previous selection\r\n        const previousSelected = this.container.querySelector('.file-item.selected');\r\n        if (previousSelected) {\r\n            previousSelected.classList.remove('selected');\r\n        }\r\n\r\n        // Add new selection\r\n        itemElement.classList.add('selected');\r\n        this.selectedFile = path;\r\n\r\n        // Notify callback\r\n        if (this.onFileSelect) {\r\n            this.onFileSelect(path);\r\n        }\r\n    }\r\n\r\n    /**\r\n     * Get the currently selected file path\r\n     */\r\n    getSelectedFile(): string | null {\r\n        return this.selectedFile;\r\n    }\r\n\r\n    /**\r\n     * Clear the selection\r\n     */\r\n    clearSelection(): void {\r\n        const selected = this.container.querySelector('.file-item.selected');\r\n        if (selected) {\r\n            selected.classList.remove('selected');\r\n        }\r\n        this.selectedFile = null;\r\n    }\r\n\r\n    /**\r\n     * Escape HTML to prevent XSS\r\n     */\r\n    private escapeHtml(text: string): string {\r\n        const div = document.createElement('div');\r\n        div.textContent = text;\r\n        return div.innerHTML;\r\n    }\r\n}\r\n\r\n// Export as ES module\r\nexport { FileBrowser };\r\n\r\n// Also assign to window for backward compatibility\r\n(window as Window).FileBrowser = FileBrowser;\r\n","/**\r\n * Constellation Dashboard - DAG Visualizer Component\r\n *\r\n * Uses Cytoscape.js with dagre layout for hierarchical DAG visualization.\r\n */\r\n\r\nclass DagVisualizer {\r\n    private containerId: string;\r\n    private onNodeSelect: ((nodeData: NodeDetailData | null) => void) | null;\r\n    private cy: CytoscapeInstance | null;\r\n    private layoutDirection: string;\r\n    private executionStates: Record<string, ExecutionState>;\r\n    private tooltip: HTMLElement | null;\r\n    private currentStructuralHash: string | null;\r\n\r\n    // Node color mapping\r\n    private readonly nodeColors: Record<string, string> = {\r\n        Input: '#56d364',\r\n        Output: '#58a6ff',\r\n        Operation: '#d2a8ff',\r\n        Literal: '#ffa657',\r\n        Merge: '#f778ba',\r\n        Project: '#a5d6ff',\r\n        FieldAccess: '#a5d6ff',\r\n        Conditional: '#ff7b72',\r\n        Guard: '#a5d6ff',\r\n        Branch: '#ff7b72',\r\n        Coalesce: '#ffa657',\r\n        HigherOrder: '#d2a8ff',\r\n        ListLiteral: '#ffa657',\r\n        BooleanOp: '#ff7b72',\r\n        StringInterp: '#ffa657'\r\n    };\r\n\r\n    // Status color mapping\r\n    private readonly statusColors: Record<string, string> = {\r\n        Pending: '#6e7681',\r\n        Running: '#58a6ff',\r\n        Completed: '#3fb950',\r\n        Failed: '#f85149'\r\n    };\r\n\r\n    constructor(containerId: string, onNodeSelect: (nodeData: NodeDetailData | null) => void) {\r\n        this.containerId = containerId;\r\n        this.onNodeSelect = onNodeSelect;\r\n        this.cy = null;\r\n        this.layoutDirection = 'TB'; // TB (top-bottom) or LR (left-right)\r\n        this.executionStates = {};\r\n        this.tooltip = null;\r\n        this.currentStructuralHash = null;\r\n    }\r\n\r\n    /**\r\n     * Initialize the Cytoscape instance\r\n     */\r\n    init(): void {\r\n        // Register dagre layout if available\r\n        if (typeof cytoscape !== 'undefined' && typeof cytoscapeDagre !== 'undefined') {\r\n            cytoscape.use(cytoscapeDagre);\r\n        }\r\n\r\n        this.cy = cytoscape({\r\n            container: document.getElementById(this.containerId),\r\n            style: this.getStylesheet(),\r\n            layout: { name: 'preset' },\r\n            minZoom: 0.2,\r\n            maxZoom: 3,\r\n            wheelSensitivity: 0.3,\r\n            boxSelectionEnabled: false\r\n        });\r\n\r\n        // Handle node selection\r\n        this.cy.on('tap', 'node', (evt: CytoscapeEvent) => {\r\n            const node = evt.target as unknown as CytoscapeNode;\r\n            this.selectNode(node);\r\n        });\r\n\r\n        // Handle background tap to deselect\r\n        this.cy.on('tap', (evt: CytoscapeEvent) => {\r\n            if (evt.target === this.cy) {\r\n                this.deselectAll();\r\n            }\r\n        });\r\n\r\n        // Tooltip element\r\n        this.tooltip = document.getElementById('dag-tooltip');\r\n\r\n        // Hover tooltip + neighborhood highlighting\r\n        this.cy.on('mouseover', 'node', (evt: CytoscapeEvent) => {\r\n            const node = evt.target as unknown as CytoscapeNode;\r\n\r\n            // Show tooltip\r\n            if (this.tooltip) {\r\n                const kind = (node.data('kind') || '') as string;\r\n                const label = (node.data('label') || '') as string;\r\n                const typeSig = (node.data('typeSignature') || '') as string;\r\n                const value = node.data('value');\r\n                const status = (node.data('status') || 'Pending') as string;\r\n\r\n                let html = `<span class=\"tooltip-kind\">${kind}</span>`;\r\n                html += `<span class=\"tooltip-label\">${label}</span>`;\r\n                if (typeSig) {\r\n                    html += `<span class=\"tooltip-type\">${typeSig}</span>`;\r\n                }\r\n                if (status !== 'Pending') {\r\n                    html += `<span class=\"tooltip-status tooltip-status-${status.toLowerCase()}\">${status}</span>`;\r\n                }\r\n                if (value !== undefined && value !== null) {\r\n                    const displayVal = typeof value === 'string' ? value : JSON.stringify(value);\r\n                    const truncated = displayVal.length > 120 ? displayVal.slice(0, 120) + '\\u2026' : displayVal;\r\n                    html += `<span class=\"tooltip-value\">${truncated}</span>`;\r\n                }\r\n\r\n                this.tooltip.innerHTML = html;\r\n                this.tooltip.style.display = 'block';\r\n\r\n                const renderedPos = node.renderedPosition();\r\n                const container = this.cy!.container().getBoundingClientRect();\r\n                this.tooltip.style.left = (container.left + renderedPos.x + 15) + 'px';\r\n                this.tooltip.style.top = (container.top + renderedPos.y - 15) + 'px';\r\n            }\r\n\r\n            // Neighborhood highlighting\r\n            const neighborhood = node.closedNeighborhood();\r\n            this.cy!.elements().addClass('dimmed');\r\n            neighborhood.removeClass('dimmed');\r\n        });\r\n\r\n        this.cy.on('mouseout', 'node', () => {\r\n            // Hide tooltip\r\n            if (this.tooltip) {\r\n                this.tooltip.style.display = 'none';\r\n            }\r\n\r\n            // Restore all elements\r\n            this.cy!.elements().removeClass('dimmed');\r\n        });\r\n    }\r\n\r\n    /**\r\n     * Get the Cytoscape stylesheet\r\n     */\r\n    private getStylesheet(): CytoscapeStylesheet[] {\r\n        return [\r\n            // Node styles\r\n            {\r\n                selector: 'node',\r\n                style: {\r\n                    'label': 'data(label)',\r\n                    'text-valign': 'center',\r\n                    'text-halign': 'center',\r\n                    'font-size': '13px',\r\n                    'font-weight': 600,\r\n                    'font-family': '-apple-system, BlinkMacSystemFont, \"Segoe UI\", sans-serif',\r\n                    'color': '#0d1117',\r\n                    'text-wrap': 'wrap',\r\n                    'text-max-width': '120px',\r\n                    'width': 'label',\r\n                    'height': 'label',\r\n                    'padding': '14px',\r\n                    'min-width': '60px',\r\n                    'min-height': '30px',\r\n                    'shape': 'roundrectangle',\r\n                    'background-color': 'data(color)',\r\n                    'border-width': 2,\r\n                    'border-color': 'data(borderColor)',\r\n                    'text-outline-color': 'data(color)',\r\n                    'text-outline-width': 0,\r\n                    'transition-property': 'border-color border-width background-color',\r\n                    'transition-duration': '0.3s'\r\n                }\r\n            },\r\n            // Selected node\r\n            {\r\n                selector: 'node:selected',\r\n                style: {\r\n                    'border-width': 3,\r\n                    'border-color': '#58a6ff',\r\n                    'box-shadow': '0 0 10px #58a6ff'\r\n                }\r\n            },\r\n            // Input nodes\r\n            {\r\n                selector: 'node[kind = \"Input\"]',\r\n                style: {\r\n                    'shape': 'ellipse'\r\n                }\r\n            },\r\n            // Output nodes\r\n            {\r\n                selector: 'node[kind = \"Output\"]',\r\n                style: {\r\n                    'shape': 'ellipse'\r\n                }\r\n            },\r\n            // Edge styles\r\n            {\r\n                selector: 'edge',\r\n                style: {\r\n                    'width': 1.5,\r\n                    'line-color': '#6e7681',\r\n                    'target-arrow-color': '#8b949e',\r\n                    'target-arrow-shape': 'triangle',\r\n                    'arrow-scale': 1.3,\r\n                    'curve-style': 'taxi',\r\n                    'taxi-direction': 'downward',\r\n                    'taxi-turn': '50px',\r\n                    'taxi-turn-min-distance': 10,\r\n                    'label': 'data(label)',\r\n                    'font-size': '10px',\r\n                    'font-family': '\"SF Mono\", \"Consolas\", \"Monaco\", monospace',\r\n                    'color': '#c9d1d9',\r\n                    'text-background-color': '#161b22',\r\n                    'text-background-opacity': 0.92,\r\n                    'text-background-padding': '3px',\r\n                    'text-background-shape': 'roundrectangle',\r\n                    'text-rotation': 'none',\r\n                    'text-margin-y': -10\r\n                }\r\n            },\r\n            // Optional edges\r\n            {\r\n                selector: 'edge[kind = \"Optional\"]',\r\n                style: {\r\n                    'line-style': 'dashed',\r\n                    'line-color': '#6e7681'\r\n                }\r\n            },\r\n            // Control edges\r\n            {\r\n                selector: 'edge[kind = \"Control\"]',\r\n                style: {\r\n                    'line-color': '#ff7b72',\r\n                    'target-arrow-color': '#ff7b72'\r\n                }\r\n            },\r\n            // Running nodes - pulsing blue border\r\n            {\r\n                selector: 'node[status = \"Running\"]',\r\n                style: {\r\n                    'border-width': 5,\r\n                    'border-color': '#58a6ff',\r\n                    'border-style': 'dashed',\r\n                    'overlay-color': '#58a6ff',\r\n                    'overlay-opacity': 0.15,\r\n                    'overlay-padding': 8\r\n                }\r\n            },\r\n            // Completed nodes - solid green border + checkmark feel\r\n            {\r\n                selector: 'node[status = \"Completed\"]',\r\n                style: {\r\n                    'border-width': 5,\r\n                    'border-color': '#3fb950',\r\n                    'overlay-color': '#3fb950',\r\n                    'overlay-opacity': 0.15,\r\n                    'overlay-padding': 8\r\n                }\r\n            },\r\n            // Failed nodes - red border\r\n            {\r\n                selector: 'node[status = \"Failed\"]',\r\n                style: {\r\n                    'border-width': 5,\r\n                    'border-color': '#f85149',\r\n                    'overlay-color': '#f85149',\r\n                    'overlay-opacity': 0.15,\r\n                    'overlay-padding': 8\r\n                }\r\n            },\r\n            // Completed edges - green\r\n            {\r\n                selector: 'edge[status = \"Completed\"]',\r\n                style: {\r\n                    'line-color': '#3fb950',\r\n                    'target-arrow-color': '#3fb950',\r\n                    'width': 3\r\n                }\r\n            },\r\n            // Dimmed state for non-hovered neighborhood\r\n            {\r\n                selector: '.dimmed',\r\n                style: {\r\n                    'opacity': 0.15\r\n                }\r\n            }\r\n        ];\r\n    }\r\n\r\n    /**\r\n     * Compute a structural hash for semantic change detection.\r\n     * Compares node ids, kinds, labels, type signatures, and edge connections.\r\n     * Ignores execution state, positions, and other transient data.\r\n     */\r\n    private computeStructuralHash(dagVizIR: DagVizIR): string {\r\n        if (!dagVizIR || !dagVizIR.nodes) return '';\r\n\r\n        // Sort nodes by id for consistent hashing\r\n        const nodeSignatures = dagVizIR.nodes\r\n            .map(n => `${n.id}:${n.kind}:${n.label}:${n.typeSignature}`)\r\n            .sort()\r\n            .join('|');\r\n\r\n        // Sort edges by id for consistent hashing\r\n        const edgeSignatures = dagVizIR.edges\r\n            .map(e => `${e.source}->${e.target}:${e.kind}:${e.label || ''}`)\r\n            .sort()\r\n            .join('|');\r\n\r\n        return `N[${nodeSignatures}]E[${edgeSignatures}]`;\r\n    }\r\n\r\n    /**\r\n     * Load and render a DAG visualization.\r\n     * Uses structural hashing to avoid re-rendering when the DAG hasn't changed semantically.\r\n     */\r\n    render(dagVizIR: DagVizIR): void {\r\n        if (!this.cy) {\r\n            this.init();\r\n        }\r\n\r\n        if (!dagVizIR || !dagVizIR.nodes || dagVizIR.nodes.length === 0) {\r\n            this.cy!.elements().remove();\r\n            this.currentStructuralHash = null;\r\n            return;\r\n        }\r\n\r\n        // Check if the structure has changed\r\n        const newHash = this.computeStructuralHash(dagVizIR);\r\n        if (newHash === this.currentStructuralHash) {\r\n            // Structure unchanged - just update execution states without re-layout\r\n            this.updateExecutionStatesFromDag(dagVizIR);\r\n            return;\r\n        }\r\n\r\n        // Structure changed - full re-render\r\n        this.currentStructuralHash = newHash;\r\n\r\n        // Clear existing elements\r\n        this.cy!.elements().remove();\r\n\r\n        // Convert DagVizIR to Cytoscape elements\r\n        const elements = this.convertToElements(dagVizIR);\r\n\r\n        // Add elements\r\n        this.cy!.add(elements);\r\n\r\n        // Run layout\r\n        this.runLayout();\r\n    }\r\n\r\n    /**\r\n     * Update execution states from DagVizIR without re-rendering layout.\r\n     * Used when structure is unchanged but execution states may have updated.\r\n     */\r\n    private updateExecutionStatesFromDag(dagVizIR: DagVizIR): void {\r\n        this.cy!.batch(() => {\r\n            dagVizIR.nodes.forEach(node => {\r\n                const cyNode = this.cy!.getElementById(node.id);\r\n                if (cyNode.length > 0) {\r\n                    const status = node.executionState?.status || 'Pending';\r\n                    const borderColor = this.statusColors[status] || '#8b949e';\r\n\r\n                    cyNode.data('status', status);\r\n                    cyNode.data('borderColor', borderColor);\r\n                    cyNode.data('value', node.executionState?.value);\r\n                    cyNode.data('durationMs', node.executionState?.durationMs);\r\n                    cyNode.data('error', node.executionState?.error);\r\n                }\r\n            });\r\n        });\r\n    }\r\n\r\n    /**\r\n     * Convert DagVizIR to Cytoscape elements\r\n     */\r\n    private convertToElements(dagVizIR: DagVizIR): unknown[] {\r\n        const elements: unknown[] = [];\r\n\r\n        // Add nodes\r\n        dagVizIR.nodes.forEach(node => {\r\n            const color = this.nodeColors[node.kind] || '#8b949e';\r\n            const status = node.executionState?.status || 'Pending';\r\n            const borderColor = this.statusColors[status] || color;\r\n\r\n            // Better merge node labels: show \"merge\" instead of just \"+\"\r\n            let label = node.label;\r\n            if (node.kind === 'Merge' && label === '+') {\r\n                label = 'merge';\r\n            }\r\n\r\n            elements.push({\r\n                group: 'nodes',\r\n                data: {\r\n                    id: node.id,\r\n                    label: label,\r\n                    kind: node.kind,\r\n                    typeSignature: node.typeSignature,\r\n                    color: color,\r\n                    borderColor: borderColor,\r\n                    status: status,\r\n                    value: node.executionState?.value,\r\n                    durationMs: node.executionState?.durationMs,\r\n                    error: node.executionState?.error\r\n                },\r\n                position: node.position ? { x: node.position.x, y: node.position.y } : undefined\r\n            });\r\n        });\r\n\r\n        // Add edges\r\n        dagVizIR.edges.forEach(edge => {\r\n            elements.push({\r\n                group: 'edges',\r\n                data: {\r\n                    id: edge.id,\r\n                    source: edge.source,\r\n                    target: edge.target,\r\n                    label: edge.label || '',\r\n                    kind: edge.kind || 'Data'\r\n                }\r\n            });\r\n        });\r\n\r\n        return elements;\r\n    }\r\n\r\n    /**\r\n     * Run the dagre layout\r\n     */\r\n    private runLayout(): void {\r\n        // Update taxi direction based on layout\r\n        const taxiDir = this.layoutDirection === 'LR' ? 'rightward' : 'downward';\r\n        this.cy!.edges().style('taxi-direction', taxiDir);\r\n\r\n        const layout = this.cy!.layout({\r\n            name: 'dagre',\r\n            rankDir: this.layoutDirection,\r\n            nodeSep: 80,\r\n            rankSep: 110,\r\n            edgeSep: 50,\r\n            padding: 50,\r\n            animate: true,\r\n            animationDuration: 300\r\n        });\r\n\r\n        layout.run();\r\n    }\r\n\r\n    /**\r\n     * Set the layout direction\r\n     */\r\n    setLayoutDirection(direction: string): void {\r\n        this.layoutDirection = direction;\r\n        if (this.cy && this.cy.nodes().length > 0) {\r\n            this.runLayout();\r\n        }\r\n    }\r\n\r\n    /**\r\n     * Zoom in\r\n     */\r\n    zoomIn(): void {\r\n        if (this.cy) {\r\n            this.cy.zoom(this.cy.zoom() * 1.2);\r\n        }\r\n    }\r\n\r\n    /**\r\n     * Zoom out\r\n     */\r\n    zoomOut(): void {\r\n        if (this.cy) {\r\n            this.cy.zoom(this.cy.zoom() / 1.2);\r\n        }\r\n    }\r\n\r\n    /**\r\n     * Fit the graph to the viewport\r\n     */\r\n    fit(): void {\r\n        if (this.cy) {\r\n            this.cy.resize();\r\n            this.cy.fit(undefined, 30);\r\n        }\r\n    }\r\n\r\n    /**\r\n     * Select a node and show details\r\n     */\r\n    private selectNode(node: CytoscapeNode): void {\r\n        // Deselect all first\r\n        this.cy!.nodes().unselect();\r\n        node.select();\r\n\r\n        // Notify callback\r\n        if (this.onNodeSelect) {\r\n            this.onNodeSelect({\r\n                id: node.data('id') as string,\r\n                label: node.data('label') as string,\r\n                kind: node.data('kind') as string,\r\n                typeSignature: node.data('typeSignature') as string,\r\n                status: node.data('status') as string | undefined,\r\n                value: node.data('value'),\r\n                durationMs: node.data('durationMs') as number | undefined,\r\n                error: node.data('error') as string | undefined\r\n            });\r\n        }\r\n    }\r\n\r\n    /**\r\n     * Deselect all nodes\r\n     */\r\n    deselectAll(): void {\r\n        if (this.cy) {\r\n            this.cy.nodes().unselect();\r\n        }\r\n        if (this.onNodeSelect) {\r\n            this.onNodeSelect(null);\r\n        }\r\n    }\r\n\r\n    /**\r\n     * Update execution state for nodes\r\n     */\r\n    updateExecutionState(nodeId: string, state: ExecutionState): void {\r\n        this.executionStates[nodeId] = state;\r\n\r\n        if (this.cy) {\r\n            const node = this.cy.getElementById(nodeId);\r\n            if (node.length > 0) {\r\n                const status = state.status || 'Pending';\r\n                const borderColor = this.statusColors[status] || '#8b949e';\r\n\r\n                node.data('status', status);\r\n                node.data('borderColor', borderColor);\r\n                node.data('value', state.value);\r\n                node.data('durationMs', state.durationMs);\r\n                node.data('error', state.error);\r\n            }\r\n        }\r\n    }\r\n\r\n    /**\r\n     * Batch update execution states\r\n     */\r\n    batchUpdateExecutionStates(updates: Array<{ nodeId: string; state: ExecutionState }>): void {\r\n        if (!updates || !Array.isArray(updates)) return;\r\n\r\n        this.cy!.batch(() => {\r\n            updates.forEach(({ nodeId, state }) => {\r\n                this.updateExecutionState(nodeId, state);\r\n            });\r\n        });\r\n    }\r\n\r\n    /**\r\n     * Reset all execution states\r\n     */\r\n    resetExecutionStates(): void {\r\n        this.executionStates = {};\r\n\r\n        if (this.cy) {\r\n            this.cy.batch(() => {\r\n                this.cy!.nodes().forEach((node: CytoscapeNode) => {\r\n                    const kind = node.data('kind') as string;\r\n                    const color = this.nodeColors[kind] || '#8b949e';\r\n\r\n                    node.data('status', 'Pending');\r\n                    node.data('borderColor', color);\r\n                    node.data('value', undefined);\r\n                    node.data('durationMs', undefined);\r\n                    node.data('error', undefined);\r\n                });\r\n            });\r\n        }\r\n    }\r\n\r\n    /**\r\n     * Clear the visualization\r\n     */\r\n    clear(): void {\r\n        if (this.cy) {\r\n            this.cy.elements().remove();\r\n        }\r\n        this.executionStates = {};\r\n        this.currentStructuralHash = null;\r\n    }\r\n\r\n    /**\r\n     * Export the DAG as PNG\r\n     */\r\n    exportPng(): void {\r\n        if (this.cy) {\r\n            const png = this.cy.png({\r\n                output: 'blob',\r\n                bg: '#0d1117',\r\n                scale: 2\r\n            });\r\n\r\n            const link = document.createElement('a');\r\n            link.href = URL.createObjectURL(png);\r\n            link.download = 'constellation-dag.png';\r\n            link.click();\r\n        }\r\n    }\r\n\r\n    /**\r\n     * Destroy the Cytoscape instance\r\n     */\r\n    destroy(): void {\r\n        if (this.cy) {\r\n            this.cy.destroy();\r\n            this.cy = null;\r\n        }\r\n    }\r\n}\r\n\r\n// Export as ES module\r\nexport { DagVisualizer };\r\n\r\n// Also assign to window for backward compatibility\r\n(window as Window).DagVisualizer = DagVisualizer;\r\n","/**\r\n * Constellation Dashboard - Execution Store\r\n *\r\n * Manages execution state for live visualization, including per-node status,\r\n * values, and timing information streamed via WebSocket.\r\n */\r\n\r\nimport { create } from 'zustand';\r\n\r\nexport type NodeStatus = 'pending' | 'running' | 'completed' | 'failed';\r\n\r\nexport interface NodeState {\r\n  status: NodeStatus;\r\n  value?: unknown;\r\n  error?: string;\r\n  durationMs?: number;\r\n  startTime?: number;\r\n}\r\n\r\nexport interface ExecutionState {\r\n  // Current execution ID (if any)\r\n  currentExecutionId: string | null;\r\n\r\n  // DAG name for the current execution\r\n  dagName: string | null;\r\n\r\n  // Execution start timestamp\r\n  executionStartTime: number | null;\r\n\r\n  // Per-node execution state\r\n  nodeStates: Record<string, NodeState>;\r\n\r\n  // Node name mapping (nodeId -> nodeName)\r\n  nodeNames: Record<string, string>;\r\n\r\n  // Whether execution is in progress\r\n  isRunning: boolean;\r\n\r\n  // Overall execution status\r\n  status: 'idle' | 'running' | 'completed' | 'failed';\r\n\r\n  // Error message (if execution failed)\r\n  error?: string;\r\n\r\n  // Total execution time in ms\r\n  totalDurationMs?: number;\r\n\r\n  // Actions\r\n  startExecution: (id: string, dagName?: string) => void;\r\n  updateNodeState: (nodeId: string, state: Partial<NodeState>) => void;\r\n  batchUpdateNodeStates: (updates: Record<string, Partial<NodeState>>) => void;\r\n  completeExecution: (outputs?: Record<string, unknown>, durationMs?: number) => void;\r\n  failExecution: (error: string) => void;\r\n  reset: () => void;\r\n}\r\n\r\nexport const useExecutionStore = create<ExecutionState>((set, _get) => ({\r\n  // Initial state\r\n  currentExecutionId: null,\r\n  dagName: null,\r\n  executionStartTime: null,\r\n  nodeStates: {},\r\n  nodeNames: {},\r\n  isRunning: false,\r\n  status: 'idle',\r\n  error: undefined,\r\n  totalDurationMs: undefined,\r\n\r\n  // Actions\r\n  startExecution: (id, dagName) =>\r\n    set({\r\n      currentExecutionId: id,\r\n      dagName: dagName || null,\r\n      executionStartTime: Date.now(),\r\n      nodeStates: {},\r\n      nodeNames: {},\r\n      isRunning: true,\r\n      status: 'running',\r\n      error: undefined,\r\n      totalDurationMs: undefined,\r\n    }),\r\n\r\n  updateNodeState: (nodeId, state) =>\r\n    set((prev) => ({\r\n      nodeStates: {\r\n        ...prev.nodeStates,\r\n        [nodeId]: {\r\n          ...prev.nodeStates[nodeId],\r\n          ...state,\r\n        },\r\n      },\r\n    })),\r\n\r\n  batchUpdateNodeStates: (updates) =>\r\n    set((prev) => {\r\n      const newNodeStates = { ...prev.nodeStates };\r\n      for (const [nodeId, state] of Object.entries(updates)) {\r\n        newNodeStates[nodeId] = {\r\n          ...newNodeStates[nodeId],\r\n          ...state,\r\n        };\r\n      }\r\n      return { nodeStates: newNodeStates };\r\n    }),\r\n\r\n  completeExecution: (_outputs, durationMs) =>\r\n    set({\r\n      isRunning: false,\r\n      status: 'completed',\r\n      totalDurationMs: durationMs,\r\n    }),\r\n\r\n  failExecution: (error) =>\r\n    set({\r\n      isRunning: false,\r\n      status: 'failed',\r\n      error,\r\n    }),\r\n\r\n  reset: () =>\r\n    set({\r\n      currentExecutionId: null,\r\n      dagName: null,\r\n      executionStartTime: null,\r\n      nodeStates: {},\r\n      nodeNames: {},\r\n      isRunning: false,\r\n      status: 'idle',\r\n      error: undefined,\r\n      totalDurationMs: undefined,\r\n    }),\r\n}));\r\n\r\n// Helper to build ExecutionProfile from store state\r\nexport function buildExecutionProfile(state: ExecutionState): import('../components/ProfileView.js').ExecutionProfile | null {\r\n  if (!state.currentExecutionId || !state.executionStartTime) return null;\r\n\r\n  const nodes = Object.entries(state.nodeStates)\r\n    .filter(([_, nodeState]) => nodeState.startTime !== undefined)\r\n    .map(([nodeId, nodeState]) => ({\r\n      nodeId,\r\n      nodeName: state.nodeNames[nodeId] || nodeId,\r\n      startTime: (nodeState.startTime || 0) - (state.executionStartTime || 0),\r\n      endTime: (nodeState.startTime || 0) + (nodeState.durationMs || 0) - (state.executionStartTime || 0),\r\n      durationMs: nodeState.durationMs || 0,\r\n      status: (nodeState.status === 'completed' || nodeState.status === 'failed' ? nodeState.status : 'completed') as 'completed' | 'failed',\r\n    }));\r\n\r\n  return {\r\n    executionId: state.currentExecutionId,\r\n    dagName: state.dagName || 'Unknown',\r\n    startTime: state.executionStartTime,\r\n    totalDurationMs: state.totalDurationMs || 0,\r\n    nodes,\r\n  };\r\n}\r\n","/**\r\n * Constellation Dashboard - WebSocket Service\r\n *\r\n * Manages WebSocket connections for live execution visualization.\r\n * Subscribes to execution events and updates the execution store.\r\n */\r\n\r\nimport { useExecutionStore } from '../store/execution.store.js';\r\nimport type { NodeStatus } from '../store/execution.store.js';\r\n\r\nexport interface ExecutionEvent {\r\n  type:\r\n    | 'execution:start'\r\n    | 'module:start'\r\n    | 'module:complete'\r\n    | 'module:failed'\r\n    | 'execution:complete'\r\n    | 'execution:cancelled';\r\n  executionId: string;\r\n  moduleId?: string;\r\n  moduleName?: string;\r\n  dagName?: string;\r\n  timestamp: number;\r\n  value?: unknown;\r\n  error?: string;\r\n  durationMs?: number;\r\n  succeeded?: boolean;\r\n}\r\n\r\nexport class ExecutionWebSocket {\r\n  private ws: WebSocket | null = null;\r\n  private executionId: string;\r\n  private reconnectAttempts = 0;\r\n  private maxReconnectAttempts = 3;\r\n  private reconnectDelay = 1000;\r\n\r\n  constructor(executionId: string) {\r\n    this.executionId = executionId;\r\n  }\r\n\r\n  /**\r\n   * Connect to the execution events WebSocket\r\n   */\r\n  connect(): Promise<void> {\r\n    return new Promise((resolve, reject) => {\r\n      const protocol = window.location.protocol === 'https:' ? 'wss:' : 'ws:';\r\n      const url = `${protocol}//${window.location.host}/api/v1/executions/events?executionId=${encodeURIComponent(this.executionId)}`;\r\n\r\n      this.ws = new WebSocket(url);\r\n\r\n      this.ws.onopen = () => {\r\n        console.log(`[WS] Connected to execution ${this.executionId}`);\r\n        this.reconnectAttempts = 0;\r\n        resolve();\r\n      };\r\n\r\n      this.ws.onmessage = (event) => {\r\n        this.handleMessage(event.data);\r\n      };\r\n\r\n      this.ws.onerror = (error) => {\r\n        console.error('[WS] Error:', error);\r\n        reject(error);\r\n      };\r\n\r\n      this.ws.onclose = (event) => {\r\n        console.log(`[WS] Closed: ${event.code} ${event.reason}`);\r\n        this.handleClose();\r\n      };\r\n    });\r\n  }\r\n\r\n  /**\r\n   * Handle incoming WebSocket messages\r\n   */\r\n  private handleMessage(data: string): void {\r\n    try {\r\n      const event: ExecutionEvent = JSON.parse(data);\r\n      const store = useExecutionStore.getState();\r\n\r\n      switch (event.type) {\r\n        case 'execution:start':\r\n          store.startExecution(event.executionId, event.dagName);\r\n          break;\r\n\r\n        case 'module:start':\r\n          if (event.moduleId) {\r\n            store.updateNodeState(event.moduleId, {\r\n              status: 'running' as NodeStatus,\r\n              startTime: event.timestamp,\r\n            });\r\n            // Store node name mapping\r\n            if (event.moduleName) {\r\n              const state = useExecutionStore.getState();\r\n              useExecutionStore.setState({\r\n                nodeNames: { ...state.nodeNames, [event.moduleId]: event.moduleName }\r\n              });\r\n            }\r\n          }\r\n          break;\r\n\r\n        case 'module:complete':\r\n          if (event.moduleId) {\r\n            store.updateNodeState(event.moduleId, {\r\n              status: 'completed' as NodeStatus,\r\n              value: event.value,\r\n              durationMs: event.durationMs,\r\n            });\r\n          }\r\n          break;\r\n\r\n        case 'module:failed':\r\n          if (event.moduleId) {\r\n            store.updateNodeState(event.moduleId, {\r\n              status: 'failed' as NodeStatus,\r\n              error: event.error,\r\n              durationMs: event.durationMs,\r\n            });\r\n          }\r\n          break;\r\n\r\n        case 'execution:complete':\r\n          if (event.succeeded) {\r\n            store.completeExecution(undefined, event.durationMs);\r\n          } else {\r\n            store.failExecution(event.error || 'Execution failed');\r\n          }\r\n          break;\r\n\r\n        case 'execution:cancelled':\r\n          store.failExecution('Execution cancelled');\r\n          break;\r\n      }\r\n    } catch (error) {\r\n      console.error('[WS] Failed to parse message:', error);\r\n    }\r\n  }\r\n\r\n  /**\r\n   * Handle WebSocket close - attempt reconnection if appropriate\r\n   */\r\n  private handleClose(): void {\r\n    const store = useExecutionStore.getState();\r\n\r\n    // Don't reconnect if execution is complete or failed\r\n    if (store.status === 'completed' || store.status === 'failed') {\r\n      return;\r\n    }\r\n\r\n    // Attempt reconnection\r\n    if (this.reconnectAttempts < this.maxReconnectAttempts) {\r\n      this.reconnectAttempts++;\r\n      console.log(\r\n        `[WS] Attempting reconnection ${this.reconnectAttempts}/${this.maxReconnectAttempts}`\r\n      );\r\n\r\n      setTimeout(() => {\r\n        this.connect().catch((error) => {\r\n          console.error('[WS] Reconnection failed:', error);\r\n        });\r\n      }, this.reconnectDelay * this.reconnectAttempts);\r\n    } else {\r\n      console.warn('[WS] Max reconnection attempts reached');\r\n    }\r\n  }\r\n\r\n  /**\r\n   * Close the WebSocket connection\r\n   */\r\n  disconnect(): void {\r\n    if (this.ws) {\r\n      this.ws.close();\r\n      this.ws = null;\r\n    }\r\n  }\r\n\r\n  /**\r\n   * Check if connected\r\n   */\r\n  isConnected(): boolean {\r\n    return this.ws?.readyState === WebSocket.OPEN;\r\n  }\r\n}\r\n\r\n/**\r\n * Subscribe to execution events for live visualization\r\n */\r\nexport function subscribeToExecution(executionId: string): () => void {\r\n  const ws = new ExecutionWebSocket(executionId);\r\n\r\n  ws.connect().catch((error) => {\r\n    console.error('Failed to connect to execution WebSocket:', error);\r\n  });\r\n\r\n  // Return cleanup function\r\n  return () => {\r\n    ws.disconnect();\r\n  };\r\n}\r\n\r\nexport default ExecutionWebSocket;\r\n","/**\r\n * Constellation Dashboard - Execution Visualization Hook\r\n *\r\n * Bridges the Zustand execution store to the DAG visualizer\r\n * for live execution visualization.\r\n */\r\n\r\nimport { useEffect } from 'react';\r\nimport { useExecutionStore, NodeState } from '../store/execution.store.js';\r\nimport { subscribeToExecution } from '../services/websocket.js';\r\n\r\n/**\r\n * Hook to connect execution store to DAG visualizer\r\n */\r\nexport function useExecutionVisualization(\r\n  dagVisualizer: DagVisualizerInterface | null,\r\n  executionId: string | null\r\n): void {\r\n  // Subscribe to execution events via WebSocket\r\n  useEffect(() => {\r\n    if (!executionId) return;\r\n\r\n    const unsubscribe = subscribeToExecution(executionId);\r\n    return () => {\r\n      unsubscribe();\r\n    };\r\n  }, [executionId]);\r\n\r\n  // Sync node states from store to DAG visualizer\r\n  useEffect(() => {\r\n    if (!dagVisualizer) return;\r\n\r\n    // Subscribe to store changes\r\n    const unsubscribe = useExecutionStore.subscribe((state) => {\r\n      // Update each node state in the DAG visualizer\r\n      for (const [nodeId, nodeState] of Object.entries(state.nodeStates)) {\r\n        dagVisualizer.updateExecutionState(nodeId, {\r\n          status: capitalizeStatus(nodeState.status),\r\n          value: nodeState.value,\r\n          durationMs: nodeState.durationMs,\r\n          error: nodeState.error,\r\n        });\r\n      }\r\n    });\r\n\r\n    return () => {\r\n      unsubscribe();\r\n    };\r\n  }, [dagVisualizer]);\r\n}\r\n\r\n/**\r\n * Capitalize status for DAG visualizer (Pending, Running, Completed, Failed)\r\n */\r\nfunction capitalizeStatus(status: NodeState['status']): string {\r\n  return status.charAt(0).toUpperCase() + status.slice(1);\r\n}\r\n\r\n/**\r\n * Interface for DAG visualizer (minimal subset needed)\r\n */\r\ninterface DagVisualizerInterface {\r\n  updateExecutionState(nodeId: string, state: {\r\n    status: string;\r\n    value?: unknown;\r\n    durationMs?: number;\r\n    error?: string;\r\n  }): void;\r\n  resetExecutionStates(): void;\r\n}\r\n\r\n/**\r\n * Start execution and connect visualization\r\n *\r\n * Call this when starting script execution to set up the live visualization pipeline.\r\n */\r\nexport function startExecutionWithVisualization(\r\n  executionId: string,\r\n  dagVisualizer: DagVisualizerInterface | null\r\n): () => void {\r\n  // Initialize execution in store\r\n  const store = useExecutionStore.getState();\r\n  store.startExecution(executionId);\r\n\r\n  // Reset DAG visualizer states\r\n  if (dagVisualizer) {\r\n    dagVisualizer.resetExecutionStates();\r\n  }\r\n\r\n  // Subscribe to WebSocket events\r\n  const unsubscribe = subscribeToExecution(executionId);\r\n\r\n  // Set up store-to-visualizer sync\r\n  let lastNodeStates: Record<string, NodeState> = {};\r\n  const storeUnsubscribe = useExecutionStore.subscribe((state) => {\r\n    if (!dagVisualizer) return;\r\n\r\n    // Only update changed nodes\r\n    for (const [nodeId, nodeState] of Object.entries(state.nodeStates)) {\r\n      const lastState = lastNodeStates[nodeId];\r\n      if (!lastState || lastState.status !== nodeState.status || lastState.value !== nodeState.value) {\r\n        dagVisualizer.updateExecutionState(nodeId, {\r\n          status: capitalizeStatus(nodeState.status),\r\n          value: nodeState.value,\r\n          durationMs: nodeState.durationMs,\r\n          error: nodeState.error,\r\n        });\r\n      }\r\n    }\r\n    lastNodeStates = { ...state.nodeStates };\r\n  });\r\n\r\n  // Return cleanup function\r\n  return () => {\r\n    unsubscribe();\r\n    storeUnsubscribe();\r\n  };\r\n}\r\n\r\nexport default useExecutionVisualization;\r\n","/**\r\n * Constellation Dashboard - Execution Panel Component\r\n *\r\n * Handles input forms, execution results, and execution history.\r\n */\r\n\r\nimport type { DagVisualizer } from './dag-visualizer.js';\r\nimport { startExecutionWithVisualization } from '../hooks/useExecutionVisualization.js';\r\n\r\nclass ExecutionPanel {\r\n    private inputsFormId: string;\r\n    private outputsDisplayId: string;\r\n    private historyListId: string;\r\n    private executionDetailId: string;\r\n\r\n    private onExecutionSelect: ((execution: StoredExecution) => void) | undefined;\r\n    public currentScript: FileContentResponse | null;\r\n    public currentInputs: InputParam[];\r\n    private selectedExecutionId: string | null;\r\n\r\n    constructor(options: ExecutionPanelOptions) {\r\n        this.inputsFormId = options.inputsFormId;\r\n        this.outputsDisplayId = options.outputsDisplayId;\r\n        this.historyListId = options.historyListId;\r\n        this.executionDetailId = options.executionDetailId;\r\n\r\n        this.onExecutionSelect = options.onExecutionSelect;\r\n        this.currentScript = null;\r\n        this.currentInputs = [];\r\n        this.selectedExecutionId = null;\r\n    }\r\n\r\n    /**\r\n     * Load script metadata and render input form\r\n     */\r\n    async loadScript(scriptPath: string): Promise<FileContentResponse> {\r\n        const inputsForm = document.getElementById(this.inputsFormId)!;\r\n        const outputsDisplay = document.getElementById(this.outputsDisplayId)!;\r\n\r\n        // Show loading state while fetching script metadata\r\n        inputsForm.innerHTML = `\r\n            <div class=\"loading-indicator\">\r\n                <div class=\"spinner\" style=\"width: 20px; height: 20px;\"></div>\r\n                <span>Loading script...</span>\r\n            </div>\r\n        `;\r\n\r\n        try {\r\n            // Use query param endpoint for paths with slashes\r\n            const response = await fetch(`/api/v1/file?path=${encodeURIComponent(scriptPath)}`);\r\n            if (!response.ok) {\r\n                throw new Error(`Failed to load script: ${response.statusText}`);\r\n            }\r\n\r\n            const data: FileContentResponse = await response.json();\r\n            this.currentScript = data;\r\n            this.currentInputs = data.inputs || [];\r\n\r\n            // Render input form\r\n            this.renderInputForm(inputsForm, data.inputs);\r\n\r\n            // Clear outputs\r\n            outputsDisplay.innerHTML = '<p class=\"placeholder-text\">Run the script to see outputs</p>';\r\n\r\n            return data;\r\n        } catch (error) {\r\n            console.error('Error loading script:', error);\r\n            inputsForm.innerHTML = `\r\n                <div class=\"output-error\">\r\n                    Failed to load script: ${this.escapeHtml((error as Error).message)}\r\n                </div>\r\n            `;\r\n            throw error;\r\n        }\r\n    }\r\n\r\n    /**\r\n     * Render the input form\r\n     */\r\n    renderInputForm(container: HTMLElement, inputs: InputParam[]): void {\r\n        if (!inputs || inputs.length === 0) {\r\n            container.innerHTML = '<p class=\"placeholder-text\">This script has no inputs</p>';\r\n            return;\r\n        }\r\n\r\n        container.innerHTML = inputs.map(input => `\r\n            <div class=\"input-field\">\r\n                <label for=\"input-${input.name}\">\r\n                    ${this.escapeHtml(input.name)}\r\n                    ${input.required ? '' : '<span class=\"optional\">(optional)</span>'}\r\n                </label>\r\n                ${this.renderInputControl(input)}\r\n                <span class=\"type-hint\">${this.escapeHtml(input.paramType)}</span>\r\n            </div>\r\n        `).join('');\r\n    }\r\n\r\n    /**\r\n     * Render an input control based on type\r\n     */\r\n    private renderInputControl(input: InputParam): string {\r\n        const type = input.paramType.toLowerCase();\r\n        // Handle null, undefined, and actual values\r\n        const rawDefault = input.defaultValue;\r\n        const defaultValue = (rawDefault !== undefined && rawDefault !== null)\r\n            ? (typeof rawDefault === 'object'\r\n                ? JSON.stringify(rawDefault)\r\n                : String(rawDefault))\r\n            : '';\r\n\r\n        if (type === 'int' || type === 'integer' || type === 'long') {\r\n            return `<input type=\"number\" id=\"input-${input.name}\" name=\"${input.name}\"\r\n                    value=\"${this.escapeHtml(defaultValue)}\" step=\"1\">`;\r\n        }\r\n\r\n        if (type === 'double' || type === 'float' || type === 'number') {\r\n            return `<input type=\"number\" id=\"input-${input.name}\" name=\"${input.name}\"\r\n                    value=\"${this.escapeHtml(defaultValue)}\" step=\"any\">`;\r\n        }\r\n\r\n        if (type === 'boolean' || type === 'bool') {\r\n            return `\r\n                <select id=\"input-${input.name}\" name=\"${input.name}\">\r\n                    <option value=\"true\" ${defaultValue === 'true' ? 'selected' : ''}>true</option>\r\n                    <option value=\"false\" ${defaultValue === 'false' ? 'selected' : ''}>false</option>\r\n                </select>\r\n            `;\r\n        }\r\n\r\n        if (type === 'string') {\r\n            return `<input type=\"text\" id=\"input-${input.name}\" name=\"${input.name}\"\r\n                    value=\"${this.escapeHtml(defaultValue)}\" placeholder=\"Enter text...\">`;\r\n        }\r\n\r\n        // For complex types (records, lists), use textarea with JSON\r\n        return `<textarea id=\"input-${input.name}\" name=\"${input.name}\"\r\n                placeholder=\"Enter JSON value...\" rows=\"3\">${this.escapeHtml(defaultValue)}</textarea>`;\r\n    }\r\n\r\n    /**\r\n     * Get input values from the form\r\n     */\r\n    getInputValues(): Record<string, unknown> {\r\n        const values: Record<string, unknown> = {};\r\n\r\n        this.currentInputs.forEach(input => {\r\n            const element = document.getElementById(`input-${input.name}`) as HTMLInputElement | HTMLTextAreaElement | HTMLSelectElement | null;\r\n            if (!element) return;\r\n\r\n            const type = input.paramType.toLowerCase();\r\n            const value = element.value;\r\n\r\n            try {\r\n                if (type === 'int' || type === 'integer' || type === 'long') {\r\n                    values[input.name] = parseInt(value, 10);\r\n                } else if (type === 'double' || type === 'float' || type === 'number') {\r\n                    values[input.name] = parseFloat(value);\r\n                } else if (type === 'boolean' || type === 'bool') {\r\n                    values[input.name] = value === 'true';\r\n                } else if (type === 'string') {\r\n                    values[input.name] = value;\r\n                } else {\r\n                    // Try to parse as JSON for complex types\r\n                    values[input.name] = value ? JSON.parse(value) : null;\r\n                }\r\n            } catch (e) {\r\n                // If JSON parsing fails, use raw string\r\n                values[input.name] = value;\r\n            }\r\n        });\r\n\r\n        return values;\r\n    }\r\n\r\n    /**\r\n     * Load input values from a preset\r\n     */\r\n    loadInputValues(values: Record<string, unknown>): void {\r\n        this.currentInputs.forEach(input => {\r\n            const element = document.getElementById(`input-${input.name}`) as HTMLInputElement | HTMLTextAreaElement | HTMLSelectElement | null;\r\n            if (!element) return;\r\n\r\n            const value = values[input.name];\r\n            if (value === undefined || value === null) return;\r\n\r\n            const type = input.paramType.toLowerCase();\r\n\r\n            if (type === 'boolean' || type === 'bool') {\r\n                element.value = String(value);\r\n            } else if (typeof value === 'object') {\r\n                element.value = JSON.stringify(value);\r\n            } else {\r\n                element.value = String(value);\r\n            }\r\n        });\r\n    }\r\n\r\n    // Track cleanup function for live visualization\r\n    private cleanupVisualization: (() => void) | null = null;\r\n\r\n    /**\r\n     * Execute the current script\r\n     */\r\n    async execute(scriptPath: string, dagVisualizer: DagVisualizer): Promise<DashboardExecuteResponse> {\r\n        const outputsDisplay = document.getElementById(this.outputsDisplayId)!;\r\n        const inputs = this.getInputValues();\r\n\r\n        // Cleanup any previous visualization subscription\r\n        if (this.cleanupVisualization) {\r\n            this.cleanupVisualization();\r\n            this.cleanupVisualization = null;\r\n        }\r\n\r\n        outputsDisplay.innerHTML = `\r\n            <div class=\"loading-indicator\">\r\n                <div class=\"spinner\" style=\"width: 24px; height: 24px;\"></div>\r\n                <span>Executing...</span>\r\n            </div>\r\n        `;\r\n\r\n        try {\r\n            const response = await fetch('/api/v1/execute', {\r\n                method: 'POST',\r\n                headers: { 'Content-Type': 'application/json' },\r\n                body: JSON.stringify({\r\n                    scriptPath: scriptPath,\r\n                    inputs: inputs,\r\n                    source: 'dashboard'\r\n                })\r\n            });\r\n\r\n            const result: DashboardExecuteResponse = await response.json();\r\n\r\n            if (result.success) {\r\n                // Start live visualization if we have an execution ID\r\n                if (result.executionId && dagVisualizer) {\r\n                    this.cleanupVisualization = startExecutionWithVisualization(\r\n                        result.executionId,\r\n                        dagVisualizer\r\n                    );\r\n                }\r\n\r\n                this.displaySuccess(outputsDisplay, result);\r\n\r\n                // Update DAG with execution state if available\r\n                if (result.executionId && dagVisualizer) {\r\n                    await this.loadExecutionDag(result.executionId, dagVisualizer);\r\n                }\r\n            } else {\r\n                this.displayError(outputsDisplay, result.error || 'Execution failed');\r\n            }\r\n\r\n            return result;\r\n        } catch (error) {\r\n            console.error('Execution error:', error);\r\n            this.displayError(outputsDisplay, (error as Error).message);\r\n            throw error;\r\n        }\r\n    }\r\n\r\n    /**\r\n     * Display successful execution result\r\n     */\r\n    private displaySuccess(container: HTMLElement, result: DashboardExecuteResponse): void {\r\n        const duration = result.durationMs ? `${result.durationMs}ms` : '';\r\n\r\n        container.innerHTML = `\r\n            <div class=\"output-success\">\r\n                <div class=\"output-header\">\r\n                    <span class=\"status-badge completed\">Completed</span>\r\n                    ${duration ? `<span class=\"duration\">${duration}</span>` : ''}\r\n                </div>\r\n                <pre class=\"output-json\">${this.escapeHtml(JSON.stringify(result.outputs, null, 2))}</pre>\r\n            </div>\r\n        `;\r\n    }\r\n\r\n    /**\r\n     * Display execution error\r\n     */\r\n    private displayError(container: HTMLElement, errorMessage: string): void {\r\n        container.innerHTML = `\r\n            <div class=\"output-error\">\r\n                <div class=\"output-header\">\r\n                    <span class=\"status-badge failed\">Failed</span>\r\n                </div>\r\n                <pre>${this.escapeHtml(errorMessage)}</pre>\r\n            </div>\r\n        `;\r\n    }\r\n\r\n    /**\r\n     * Load execution DAG for visualization\r\n     */\r\n    private async loadExecutionDag(executionId: string, dagVisualizer: DagVisualizer): Promise<void> {\r\n        try {\r\n            const response = await fetch(`/api/v1/executions/${executionId}/dag`);\r\n            if (response.ok) {\r\n                const dagVizIR: DagVizIR = await response.json();\r\n                dagVisualizer.render(dagVizIR);\r\n            }\r\n        } catch (error) {\r\n            console.error('Error loading execution DAG:', error);\r\n        }\r\n    }\r\n\r\n    /**\r\n     * Load execution history\r\n     */\r\n    async loadHistory(filter: string = '', limit: number = 50): Promise<void> {\r\n        const historyList = document.getElementById(this.historyListId)!;\r\n\r\n        try {\r\n            let url = `/api/v1/executions?limit=${limit}`;\r\n            if (filter) {\r\n                url += `&script=${encodeURIComponent(filter)}`;\r\n            }\r\n\r\n            const response = await fetch(url);\r\n            if (!response.ok) {\r\n                throw new Error(`Failed to load history: ${response.statusText}`);\r\n            }\r\n\r\n            const data: ExecutionListResponse = await response.json();\r\n            this.renderHistoryList(historyList, data.executions);\r\n\r\n        } catch (error) {\r\n            console.error('Error loading history:', error);\r\n            historyList.innerHTML = `\r\n                <div class=\"output-error\">\r\n                    Failed to load history: ${this.escapeHtml((error as Error).message)}\r\n                </div>\r\n            `;\r\n        }\r\n    }\r\n\r\n    /**\r\n     * Render the execution history list\r\n     */\r\n    private renderHistoryList(container: HTMLElement, executions: ExecutionSummary[]): void {\r\n        if (!executions || executions.length === 0) {\r\n            container.innerHTML = `\r\n                <div class=\"placeholder-text\">\r\n                    <p>No execution history</p>\r\n                    <p><a href=\"#\" class=\"link-to-scripts\">Run a script from the Scripts view</a> to see results here.</p>\r\n                </div>\r\n            `;\r\n            const link = container.querySelector('.link-to-scripts');\r\n            if (link) {\r\n                link.addEventListener('click', (e: Event) => {\r\n                    e.preventDefault();\r\n                    const scriptsBtn = document.querySelector('.nav-btn[data-view=\"scripts\"]') as HTMLElement | null;\r\n                    if (scriptsBtn) scriptsBtn.click();\r\n                });\r\n            }\r\n            return;\r\n        }\r\n\r\n        container.innerHTML = executions.map(exec => `\r\n            <div class=\"history-item ${exec.executionId === this.selectedExecutionId ? 'selected' : ''}\"\r\n                 data-execution-id=\"${exec.executionId}\">\r\n                <div class=\"header\">\r\n                    <span class=\"script-name\">${this.escapeHtml(exec.scriptPath || exec.dagName)}</span>\r\n                    <span class=\"status-badge ${exec.status.toLowerCase()}\">${exec.status}</span>\r\n                </div>\r\n                <div class=\"meta\">\r\n                    <span class=\"time\">${this.formatTime(exec.startTime)}</span>\r\n                    ${exec.endTime ? `<span class=\"duration\">${exec.endTime - exec.startTime}ms</span>` : ''}\r\n                    <span class=\"nodes\">${exec.nodeCount} nodes</span>\r\n                </div>\r\n            </div>\r\n        `).join('');\r\n\r\n        // Add click handlers\r\n        container.querySelectorAll('.history-item').forEach(item => {\r\n            item.addEventListener('click', () => {\r\n                this.selectExecution((item as HTMLElement).dataset.executionId!);\r\n            });\r\n        });\r\n    }\r\n\r\n    /**\r\n     * Select an execution from history\r\n     */\r\n    async selectExecution(executionId: string): Promise<void> {\r\n        this.selectedExecutionId = executionId;\r\n\r\n        // Update selection UI\r\n        const historyList = document.getElementById(this.historyListId)!;\r\n        historyList.querySelectorAll('.history-item').forEach(item => {\r\n            item.classList.toggle('selected', (item as HTMLElement).dataset.executionId === executionId);\r\n        });\r\n\r\n        // Load execution details\r\n        const detailContainer = document.getElementById(this.executionDetailId)!;\r\n\r\n        try {\r\n            const response = await fetch(`/api/v1/executions/${executionId}`);\r\n            if (!response.ok) {\r\n                throw new Error(`Failed to load execution: ${response.statusText}`);\r\n            }\r\n\r\n            const execution: StoredExecution = await response.json();\r\n            this.renderExecutionDetail(detailContainer, execution);\r\n\r\n            // Notify callback\r\n            if (this.onExecutionSelect) {\r\n                this.onExecutionSelect(execution);\r\n            }\r\n\r\n        } catch (error) {\r\n            console.error('Error loading execution:', error);\r\n            detailContainer.innerHTML = `\r\n                <div class=\"output-error\">\r\n                    Failed to load execution: ${this.escapeHtml((error as Error).message)}\r\n                </div>\r\n            `;\r\n        }\r\n    }\r\n\r\n    /**\r\n     * Render execution details\r\n     */\r\n    private renderExecutionDetail(container: HTMLElement, execution: StoredExecution): void {\r\n        const statusClass = execution.status.toLowerCase();\r\n        const duration = execution.endTime ? execution.endTime - execution.startTime : null;\r\n\r\n        container.innerHTML = `\r\n            <div class=\"execution-info\">\r\n                <div class=\"detail-section\">\r\n                    <h4>Status</h4>\r\n                    <span class=\"status-badge ${statusClass}\">${execution.status}</span>\r\n                    ${duration ? `<span class=\"duration\">${duration}ms</span>` : ''}\r\n                </div>\r\n\r\n                <div class=\"detail-section\">\r\n                    <h4>Script</h4>\r\n                    <div class=\"value\">${this.escapeHtml(execution.scriptPath || execution.dagName)}</div>\r\n                </div>\r\n\r\n                <div class=\"detail-section\">\r\n                    <h4>Time</h4>\r\n                    <div class=\"value\">${this.formatDateTime(execution.startTime)}</div>\r\n                </div>\r\n\r\n                <div class=\"detail-section\">\r\n                    <h4>Inputs</h4>\r\n                    <pre class=\"value\">${this.escapeHtml(JSON.stringify(execution.inputs, null, 2))}</pre>\r\n                </div>\r\n\r\n                ${execution.outputs ? `\r\n                    <div class=\"detail-section\">\r\n                        <h4>Outputs</h4>\r\n                        <pre class=\"value output-success\">${this.escapeHtml(JSON.stringify(execution.outputs, null, 2))}</pre>\r\n                    </div>\r\n                ` : ''}\r\n\r\n                ${execution.error ? `\r\n                    <div class=\"detail-section\">\r\n                        <h4>Error</h4>\r\n                        <pre class=\"value output-error\">${this.escapeHtml(execution.error)}</pre>\r\n                    </div>\r\n                ` : ''}\r\n\r\n                <div class=\"detail-section\">\r\n                    <h4>Source</h4>\r\n                    <div class=\"value\">${this.escapeHtml(execution.source)}</div>\r\n                </div>\r\n            </div>\r\n        `;\r\n    }\r\n\r\n    /**\r\n     * Format timestamp for display\r\n     */\r\n    private formatTime(timestamp: number): string {\r\n        const date = new Date(timestamp);\r\n        return date.toLocaleTimeString();\r\n    }\r\n\r\n    /**\r\n     * Format full datetime\r\n     */\r\n    private formatDateTime(timestamp: number): string {\r\n        const date = new Date(timestamp);\r\n        return date.toLocaleString();\r\n    }\r\n\r\n    /**\r\n     * Clear the outputs display\r\n     */\r\n    clearOutputs(): void {\r\n        const outputsDisplay = document.getElementById(this.outputsDisplayId)!;\r\n        outputsDisplay.innerHTML = '<p class=\"placeholder-text\">Run the script to see outputs</p>';\r\n    }\r\n\r\n    /**\r\n     * Clear the inputs form\r\n     */\r\n    clearInputs(): void {\r\n        const inputsForm = document.getElementById(this.inputsFormId)!;\r\n        inputsForm.innerHTML = '<p class=\"placeholder-text\">Load a script to see inputs</p>';\r\n        this.currentScript = null;\r\n        this.currentInputs = [];\r\n    }\r\n\r\n    /**\r\n     * Escape HTML to prevent XSS\r\n     */\r\n    private escapeHtml(text: string): string {\r\n        if (text === null || text === undefined) return '';\r\n        const div = document.createElement('div');\r\n        div.textContent = String(text);\r\n        return div.innerHTML;\r\n    }\r\n}\r\n\r\n// Export as ES module\r\nexport { ExecutionPanel };\r\n\r\n// Also assign to window for backward compatibility\r\n(window as Window).ExecutionPanel = ExecutionPanel;\r\n","/**\r\n * Constellation Dashboard - Code Editor Component\r\n *\r\n * Provides an inline code editor for .cst files with live DAG preview.\r\n * Uses debounced POST /api/v1/preview to compile and update the DAG\r\n * as the user types.\r\n */\r\n\r\nclass CodeEditor {\r\n    private containerId: string;\r\n    private textareaId: string;\r\n    private errorBannerId: string;\r\n    private onPreviewResult: (dagVizIR: DagVizIR | null, errors: string[], inputs: InputParam[]) => void;\r\n\r\n    // DOM elements (bound in init)\r\n    private container: HTMLElement | null;\r\n    private textarea: HTMLTextAreaElement | null;\r\n    private highlightPre: HTMLPreElement | null;\r\n    private errorBanner: HTMLElement | null;\r\n    private statusEl: HTMLElement | null;\r\n\r\n    // State\r\n    private previewTimer: ReturnType<typeof setTimeout> | null;\r\n    private previewCounter: number;\r\n    private readonly DEBOUNCE_MS: number;\r\n\r\n    constructor(options: CodeEditorOptions) {\r\n        this.containerId = options.containerId;\r\n        this.textareaId = options.textareaId;\r\n        this.errorBannerId = options.errorBannerId;\r\n        this.onPreviewResult = options.onPreviewResult || (() => {});\r\n\r\n        // DOM elements (bound in init)\r\n        this.container = null;\r\n        this.textarea = null;\r\n        this.highlightPre = null;\r\n        this.errorBanner = null;\r\n        this.statusEl = null;\r\n\r\n        // State\r\n        this.previewTimer = null;\r\n        this.previewCounter = 0;\r\n        this.DEBOUNCE_MS = 400;\r\n    }\r\n\r\n    /**\r\n     * Bind DOM elements and event listeners\r\n     */\r\n    init(): void {\r\n        this.container = document.getElementById(this.containerId);\r\n        this.textarea = document.getElementById(this.textareaId) as HTMLTextAreaElement | null;\r\n        this.highlightPre = document.getElementById('code-highlight') as HTMLPreElement | null;\r\n        this.errorBanner = document.getElementById(this.errorBannerId);\r\n        this.statusEl = document.getElementById('editor-status');\r\n\r\n        if (!this.container || !this.textarea) return;\r\n\r\n        // Live preview on input with syntax highlighting\r\n        this.textarea.addEventListener('input', () => {\r\n            this.updateHighlighting();\r\n            this.schedulePreview();\r\n        });\r\n\r\n        // Sync scroll between textarea and highlight overlay\r\n        this.textarea.addEventListener('scroll', () => this.syncScroll());\r\n\r\n        // Tab key inserts spaces instead of changing focus\r\n        this.textarea.addEventListener('keydown', (e: KeyboardEvent) => {\r\n            if (e.key === 'Tab') {\r\n                e.preventDefault();\r\n                const ta = this.textarea!;\r\n                const start = ta.selectionStart;\r\n                const end = ta.selectionEnd;\r\n                const value = ta.value;\r\n                ta.value = value.substring(0, start) + '    ' + value.substring(end);\r\n                ta.selectionStart = ta.selectionEnd = start + 4;\r\n                this.updateHighlighting();\r\n                this.schedulePreview();\r\n            }\r\n        });\r\n\r\n        // Initial highlighting\r\n        this.updateHighlighting();\r\n    }\r\n\r\n    /**\r\n     * Load source code into the editor (e.g. when a file is selected)\r\n     */\r\n    loadSource(source: string): void {\r\n        if (!this.textarea) return;\r\n        this.textarea.value = source || '';\r\n        this.updateHighlighting();\r\n        this.clearErrors();\r\n    }\r\n\r\n    /**\r\n     * Insert text at the current cursor position\r\n     */\r\n    insertText(text: string): void {\r\n        if (!this.textarea) return;\r\n        const start = this.textarea.selectionStart;\r\n        const end = this.textarea.selectionEnd;\r\n        const value = this.textarea.value;\r\n        this.textarea.value = value.substring(0, start) + text + value.substring(end);\r\n        this.textarea.selectionStart = this.textarea.selectionEnd = start + text.length;\r\n        this.textarea.focus();\r\n        this.updateHighlighting();\r\n        this.schedulePreview();\r\n    }\r\n\r\n    /**\r\n     * Move cursor to a specific line and column\r\n     */\r\n    gotoLine(line: number, column: number = 1): void {\r\n        if (!this.textarea) return;\r\n        const lines = this.textarea.value.split('\\n');\r\n        let pos = 0;\r\n        for (let i = 0; i < line - 1 && i < lines.length; i++) {\r\n            pos += lines[i].length + 1; // +1 for newline\r\n        }\r\n        pos += Math.min(column - 1, (lines[line - 1] || '').length);\r\n        this.textarea.selectionStart = this.textarea.selectionEnd = pos;\r\n        this.textarea.focus();\r\n        // Scroll the textarea to show the cursor\r\n        const lineHeight = 21; // Approximate line height in pixels\r\n        this.textarea.scrollTop = Math.max(0, (line - 5) * lineHeight);\r\n    }\r\n\r\n    /**\r\n     * Schedule a debounced preview compilation\r\n     */\r\n    private schedulePreview(): void {\r\n        if (this.previewTimer) {\r\n            clearTimeout(this.previewTimer);\r\n        }\r\n        this.setStatus('Typing...');\r\n        this.previewTimer = setTimeout(() => this.executePreview(), this.DEBOUNCE_MS);\r\n    }\r\n\r\n    /**\r\n     * Execute a preview compilation via POST /api/v1/preview.\r\n     * Uses a monotonic counter to discard stale responses.\r\n     */\r\n    private async executePreview(): Promise<void> {\r\n        const source = this.textarea!.value.trim();\r\n\r\n        if (!source) {\r\n            this.clearErrors();\r\n            this.setStatus('');\r\n            this.onPreviewResult(null, [], []);\r\n            return;\r\n        }\r\n\r\n        const requestId = ++this.previewCounter;\r\n        this.setStatus('Compiling...');\r\n\r\n        try {\r\n            const response = await fetch('/api/v1/preview', {\r\n                method: 'POST',\r\n                headers: { 'Content-Type': 'application/json' },\r\n                body: JSON.stringify({ source })\r\n            });\r\n\r\n            // Discard if a newer request was issued\r\n            if (requestId !== this.previewCounter) return;\r\n\r\n            const result: PreviewResponse = await response.json();\r\n\r\n            if (result.success && result.dagVizIR) {\r\n                this.clearErrors();\r\n                this.setStatus('OK');\r\n                const inputs = this.extractInputsFromDag(result.dagVizIR);\r\n                this.onPreviewResult(result.dagVizIR, [], inputs);\r\n            } else {\r\n                const errors = result.errors || [];\r\n                this.showErrors(errors);\r\n                this.setStatus(errors.length > 0 ? `${errors.length} error(s)` : 'Error');\r\n                this.onPreviewResult(null, errors, []);\r\n            }\r\n        } catch (error) {\r\n            if (requestId !== this.previewCounter) return;\r\n            this.showErrors([(error as Error).message]);\r\n            this.setStatus('Network error');\r\n            this.onPreviewResult(null, [(error as Error).message], []);\r\n        }\r\n    }\r\n\r\n    /**\r\n     * Extract input declarations from dagVizIR nodes.\r\n     * Looks for nodes with kind === 'Input' and maps label -> name, typeSignature -> paramType.\r\n     */\r\n    private extractInputsFromDag(dagVizIR: DagVizIR): InputParam[] {\r\n        if (!dagVizIR || !dagVizIR.nodes) return [];\r\n        return dagVizIR.nodes\r\n            .filter(n => n.kind === 'Input')\r\n            .map(n => ({\r\n                name: n.label,\r\n                paramType: n.typeSignature || 'String',\r\n                required: true\r\n            }));\r\n    }\r\n\r\n    /**\r\n     * Display compilation errors in the error banner\r\n     */\r\n    private showErrors(errors: string[]): void {\r\n        if (!this.errorBanner || !errors || errors.length === 0) {\r\n            this.clearErrors();\r\n            return;\r\n        }\r\n        this.errorBanner.innerHTML = errors.map(e =>\r\n            `<div class=\"editor-error-item\">${this.escapeHtml(e)}</div>`\r\n        ).join('');\r\n        this.errorBanner.classList.add('visible');\r\n\r\n        // Also notify React error panel\r\n        const reactBridge = (window as Window & { reactBridge?: { setCompileErrorsFromStrings?: (errors: string[]) => void } }).reactBridge;\r\n        if (reactBridge?.setCompileErrorsFromStrings) {\r\n            reactBridge.setCompileErrorsFromStrings(errors);\r\n        }\r\n    }\r\n\r\n    /**\r\n     * Clear the error banner\r\n     */\r\n    clearErrors(): void {\r\n        if (!this.errorBanner) return;\r\n        this.errorBanner.innerHTML = '';\r\n        this.errorBanner.classList.remove('visible');\r\n\r\n        // Also clear React error panel\r\n        const reactBridge = (window as Window & { reactBridge?: { clearCompileErrors?: () => void } }).reactBridge;\r\n        if (reactBridge?.clearCompileErrors) {\r\n            reactBridge.clearCompileErrors();\r\n        }\r\n    }\r\n\r\n    /**\r\n     * Update the status indicator text\r\n     */\r\n    private setStatus(text: string): void {\r\n        if (this.statusEl) {\r\n            this.statusEl.textContent = text;\r\n        }\r\n    }\r\n\r\n    /**\r\n     * Escape HTML to prevent XSS\r\n     */\r\n    private escapeHtml(text: string): string {\r\n        if (text === null || text === undefined) return '';\r\n        const div = document.createElement('div');\r\n        div.textContent = String(text);\r\n        return div.innerHTML;\r\n    }\r\n\r\n    /**\r\n     * Sync scroll position between textarea and highlight overlay\r\n     */\r\n    private syncScroll(): void {\r\n        if (!this.textarea || !this.highlightPre) return;\r\n        this.highlightPre.scrollTop = this.textarea.scrollTop;\r\n        this.highlightPre.scrollLeft = this.textarea.scrollLeft;\r\n    }\r\n\r\n    /**\r\n     * Update syntax highlighting in the overlay\r\n     */\r\n    private updateHighlighting(): void {\r\n        if (!this.textarea || !this.highlightPre) return;\r\n        const code = this.textarea.value;\r\n        this.highlightPre.innerHTML = this.highlightCode(code);\r\n    }\r\n\r\n    /**\r\n     * Apply syntax highlighting to constellation-lang code\r\n     */\r\n    private highlightCode(code: string): string {\r\n        if (!code) return '';\r\n\r\n        // Escape HTML first\r\n        let html = this.escapeHtml(code);\r\n\r\n        // Comments (# to end of line)\r\n        html = html.replace(/(#[^\\n]*)/g, '<span class=\"hl-comment\">$1</span>');\r\n\r\n        // Strings (double-quoted, handling escapes)\r\n        html = html.replace(/(&quot;(?:[^&]|&(?!quot;))*?&quot;)/g, '<span class=\"hl-string\">$1</span>');\r\n\r\n        // Annotations (@example, @description, etc.)\r\n        html = html.replace(/(@\\w+)/g, '<span class=\"hl-annotation\">$1</span>');\r\n\r\n        // Keywords\r\n        const keywords = ['in', 'out', 'type', 'match', 'if', 'else', 'branch', 'otherwise', 'when', 'and', 'or', 'not', 'with', 'use'];\r\n        const keywordPattern = new RegExp(`\\\\b(${keywords.join('|')})\\\\b`, 'g');\r\n        html = html.replace(keywordPattern, '<span class=\"hl-keyword\">$1</span>');\r\n\r\n        // Built-in types\r\n        const types = ['String', 'Int', 'Float', 'Boolean', 'List', 'Optional', 'Candidates'];\r\n        const typePattern = new RegExp(`\\\\b(${types.join('|')})\\\\b`, 'g');\r\n        html = html.replace(typePattern, '<span class=\"hl-type\">$1</span>');\r\n\r\n        // Numbers (integers and floats)\r\n        html = html.replace(/\\b(\\d+\\.?\\d*)\\b/g, '<span class=\"hl-number\">$1</span>');\r\n\r\n        // Function calls (PascalCase identifiers followed by parenthesis)\r\n        html = html.replace(/\\b([A-Z][a-zA-Z0-9]*)\\s*\\(/g, '<span class=\"hl-function\">$1</span>(');\r\n\r\n        // Operators\r\n        html = html.replace(/(\\||\\+|->|=&gt;|&lt;|&gt;|==|!=|&lt;=|&gt;=|\\?\\?)/g, '<span class=\"hl-operator\">$1</span>');\r\n\r\n        // Add trailing newline to match textarea behavior\r\n        if (code.endsWith('\\n')) {\r\n            html += '\\n';\r\n        }\r\n\r\n        return html;\r\n    }\r\n}\r\n\r\n// Export as ES module\r\nexport { CodeEditor };\r\n\r\n// Also assign to window for backward compatibility\r\n(window as Window).CodeEditor = CodeEditor;\r\n","/**\r\n * Constellation Dashboard - Pipelines Panel Component\r\n *\r\n * Provides pipeline lifecycle management: listing loaded pipelines, version\r\n * history, reload, canary visualization, and suspended execution management.\r\n */\r\n\r\nclass PipelinesPanel {\r\n    private pipelinesListId: string;\r\n    private pipelineDetailId: string;\r\n    private suspendedListId: string;\r\n\r\n    private pipelines: PipelineSummary[];\r\n    private selectedPipeline: string | null;\r\n    private expandedVersions: Set<string>;\r\n    private pollInterval: ReturnType<typeof setInterval> | null;\r\n\r\n    constructor(options: PipelinesPanelOptions) {\r\n        this.pipelinesListId = options.pipelinesListId;\r\n        this.pipelineDetailId = options.pipelineDetailId;\r\n        this.suspendedListId = options.suspendedListId;\r\n\r\n        this.pipelines = [];\r\n        this.selectedPipeline = null;\r\n        this.expandedVersions = new Set();\r\n        this.pollInterval = null;\r\n    }\r\n\r\n    /**\r\n     * Load and render the pipeline list\r\n     */\r\n    async loadPipelines(): Promise<void> {\r\n        const container = document.getElementById(this.pipelinesListId)!;\r\n\r\n        try {\r\n            const response = await fetch('/pipelines');\r\n            if (!response.ok) throw new Error(`Failed to load pipelines: ${response.statusText}`);\r\n\r\n            const data: PipelineListResponse = await response.json();\r\n            this.pipelines = data.pipelines;\r\n            this.renderPipelineList(container);\r\n        } catch (error) {\r\n            console.error('Error loading pipelines:', error);\r\n            container.innerHTML = `\r\n                <div class=\"placeholder-text\">\r\n                    Failed to load pipelines: ${this.escapeHtml((error as Error).message)}\r\n                </div>\r\n            `;\r\n        }\r\n    }\r\n\r\n    /**\r\n     * Load and render suspended executions\r\n     */\r\n    async loadSuspended(): Promise<void> {\r\n        const container = document.getElementById(this.suspendedListId)!;\r\n\r\n        try {\r\n            const response = await fetch('/executions');\r\n            if (!response.ok) {\r\n                if (response.status === 400) {\r\n                    container.innerHTML = '<div class=\"placeholder-text\">Suspension store not enabled</div>';\r\n                    return;\r\n                }\r\n                throw new Error(`Failed to load executions: ${response.statusText}`);\r\n            }\r\n\r\n            const data: SuspendedExecutionListResponse = await response.json();\r\n            this.renderSuspendedList(container, data.executions);\r\n        } catch (error) {\r\n            console.error('Error loading suspended executions:', error);\r\n            container.innerHTML = `\r\n                <div class=\"placeholder-text\">\r\n                    ${this.escapeHtml((error as Error).message)}\r\n                </div>\r\n            `;\r\n        }\r\n    }\r\n\r\n    /**\r\n     * Render the pipeline list\r\n     */\r\n    private renderPipelineList(container: HTMLElement): void {\r\n        if (this.pipelines.length === 0) {\r\n            container.innerHTML = `\r\n                <div class=\"placeholder-text\">\r\n                    <p>No pipelines loaded</p>\r\n                    <p>Load a .cst file or use POST /compile to add pipelines</p>\r\n                </div>\r\n            `;\r\n            return;\r\n        }\r\n\r\n        container.innerHTML = this.pipelines.map(pipeline => {\r\n            const primaryAlias = pipeline.aliases.length > 0 ? pipeline.aliases[0] : null;\r\n            const hashShort = pipeline.structuralHash.substring(0, 12);\r\n            const aliasDisplay = primaryAlias || hashShort;\r\n            const otherAliases = pipeline.aliases.slice(1);\r\n\r\n            return `\r\n                <div class=\"pipeline-card ${this.selectedPipeline === (primaryAlias || pipeline.structuralHash) ? 'selected' : ''}\"\r\n                     data-hash=\"${pipeline.structuralHash}\" data-alias=\"${primaryAlias || ''}\">\r\n                    <div class=\"pipeline-card-header\">\r\n                        <div class=\"pipeline-name-row\">\r\n                            <span class=\"pipeline-name\">${this.escapeHtml(aliasDisplay)}</span>\r\n                            ${otherAliases.length > 0 ? `<span class=\"pipeline-aliases\">+${otherAliases.length} alias${otherAliases.length > 1 ? 'es' : ''}</span>` : ''}\r\n                        </div>\r\n                        <span class=\"pipeline-hash\" title=\"${pipeline.structuralHash}\">${hashShort}</span>\r\n                    </div>\r\n                    <div class=\"pipeline-card-meta\">\r\n                        <span class=\"pipeline-meta-item\">${pipeline.moduleCount} modules</span>\r\n                        <span class=\"pipeline-meta-item\">${pipeline.declaredOutputs.length} outputs</span>\r\n                        <span class=\"pipeline-meta-item\">${this.formatDate(pipeline.compiledAt)}</span>\r\n                    </div>\r\n                    <div class=\"pipeline-card-actions\">\r\n                        ${primaryAlias ? `\r\n                            <button class=\"pipeline-btn pipeline-btn-primary\" data-action=\"execute\" data-ref=\"${this.escapeHtml(primaryAlias)}\">Execute</button>\r\n                            <button class=\"pipeline-btn\" data-action=\"reload\" data-name=\"${this.escapeHtml(primaryAlias)}\">Reload</button>\r\n                            <button class=\"pipeline-btn\" data-action=\"versions\" data-name=\"${this.escapeHtml(primaryAlias)}\">Versions</button>\r\n                        ` : ''}\r\n                        <button class=\"pipeline-btn pipeline-btn-danger\" data-action=\"delete\" data-hash=\"${pipeline.structuralHash}\">Delete</button>\r\n                    </div>\r\n                    <div class=\"pipeline-versions-panel\" id=\"versions-${pipeline.structuralHash}\" style=\"display: none;\"></div>\r\n                    <div class=\"pipeline-canary-panel\" id=\"canary-${primaryAlias || pipeline.structuralHash}\" style=\"display: none;\"></div>\r\n                </div>\r\n            `;\r\n        }).join('');\r\n\r\n        // Attach action handlers\r\n        container.querySelectorAll('.pipeline-btn').forEach(btn => {\r\n            btn.addEventListener('click', (e: Event) => {\r\n                e.stopPropagation();\r\n                const el = e.currentTarget as HTMLElement;\r\n                const action = el.dataset.action!;\r\n                this.handleAction(action, el);\r\n            });\r\n        });\r\n\r\n        // Attach card click to show detail\r\n        container.querySelectorAll('.pipeline-card').forEach(card => {\r\n            card.addEventListener('click', () => {\r\n                const alias = (card as HTMLElement).dataset.alias;\r\n                const hash = (card as HTMLElement).dataset.hash!;\r\n                this.selectPipeline(alias || hash);\r\n            });\r\n        });\r\n\r\n        // Check for active canaries\r\n        this.checkCanaries();\r\n    }\r\n\r\n    /**\r\n     * Handle pipeline action button clicks\r\n     */\r\n    private async handleAction(action: string, el: HTMLElement): Promise<void> {\r\n        switch (action) {\r\n            case 'execute':\r\n                await this.executePipeline(el.dataset.ref!);\r\n                break;\r\n            case 'reload':\r\n                await this.reloadPipeline(el.dataset.name!);\r\n                break;\r\n            case 'versions':\r\n                await this.toggleVersions(el.dataset.name!);\r\n                break;\r\n            case 'delete':\r\n                await this.deletePipeline(el.dataset.hash!);\r\n                break;\r\n            case 'canary-promote':\r\n                await this.canaryPromote(el.dataset.name!);\r\n                break;\r\n            case 'canary-rollback':\r\n                await this.canaryRollback(el.dataset.name!);\r\n                break;\r\n            case 'resume':\r\n                await this.resumeExecution(el.dataset.id!);\r\n                break;\r\n            case 'delete-execution':\r\n                await this.deleteExecution(el.dataset.id!);\r\n                break;\r\n        }\r\n    }\r\n\r\n    /**\r\n     * Select a pipeline and show its details\r\n     */\r\n    private async selectPipeline(ref: string): Promise<void> {\r\n        this.selectedPipeline = ref;\r\n        const detailContainer = document.getElementById(this.pipelineDetailId)!;\r\n\r\n        // Update selection UI\r\n        const listContainer = document.getElementById(this.pipelinesListId)!;\r\n        listContainer.querySelectorAll('.pipeline-card').forEach(card => {\r\n            const alias = (card as HTMLElement).dataset.alias;\r\n            const hash = (card as HTMLElement).dataset.hash;\r\n            card.classList.toggle('selected', alias === ref || hash === ref);\r\n        });\r\n\r\n        try {\r\n            const response = await fetch(`/pipelines/${encodeURIComponent(ref)}`);\r\n            if (!response.ok) throw new Error(`Failed to load pipeline: ${response.statusText}`);\r\n\r\n            const detail: PipelineDetailResponse = await response.json();\r\n            this.renderPipelineDetail(detailContainer, detail);\r\n        } catch (error) {\r\n            console.error('Error loading pipeline detail:', error);\r\n            detailContainer.innerHTML = `\r\n                <div class=\"output-error\">\r\n                    Failed to load pipeline: ${this.escapeHtml((error as Error).message)}\r\n                </div>\r\n            `;\r\n        }\r\n    }\r\n\r\n    /**\r\n     * Render pipeline detail panel\r\n     */\r\n    private renderPipelineDetail(container: HTMLElement, detail: PipelineDetailResponse): void {\r\n        const inputEntries = Object.entries(detail.inputSchema);\r\n        const outputEntries = Object.entries(detail.outputSchema);\r\n\r\n        container.innerHTML = `\r\n            <div class=\"pipeline-detail-info\">\r\n                <div class=\"detail-section\">\r\n                    <h4>Structural Hash</h4>\r\n                    <div class=\"value\">${this.escapeHtml(detail.structuralHash)}</div>\r\n                </div>\r\n\r\n                <div class=\"detail-section\">\r\n                    <h4>Aliases</h4>\r\n                    <div class=\"value\">${detail.aliases.length > 0 ? detail.aliases.map(a => this.escapeHtml(a)).join(', ') : 'None'}</div>\r\n                </div>\r\n\r\n                <div class=\"detail-section\">\r\n                    <h4>Compiled At</h4>\r\n                    <div class=\"value\">${this.escapeHtml(detail.compiledAt)}</div>\r\n                </div>\r\n\r\n                ${inputEntries.length > 0 ? `\r\n                    <div class=\"detail-section\">\r\n                        <h4>Inputs</h4>\r\n                        <div class=\"schema-list\">\r\n                            ${inputEntries.map(([name, type]) => `\r\n                                <div class=\"schema-item\">\r\n                                    <span class=\"schema-name\">${this.escapeHtml(name)}</span>\r\n                                    <span class=\"schema-type\">${this.escapeHtml(type)}</span>\r\n                                </div>\r\n                            `).join('')}\r\n                        </div>\r\n                    </div>\r\n                ` : ''}\r\n\r\n                ${outputEntries.length > 0 ? `\r\n                    <div class=\"detail-section\">\r\n                        <h4>Outputs</h4>\r\n                        <div class=\"schema-list\">\r\n                            ${outputEntries.map(([name, type]) => `\r\n                                <div class=\"schema-item\">\r\n                                    <span class=\"schema-name\">${this.escapeHtml(name)}</span>\r\n                                    <span class=\"schema-type\">${this.escapeHtml(type)}</span>\r\n                                </div>\r\n                            `).join('')}\r\n                        </div>\r\n                    </div>\r\n                ` : ''}\r\n\r\n                <div class=\"detail-section\">\r\n                    <h4>Modules (${detail.modules.length})</h4>\r\n                    <div class=\"module-list\">\r\n                        ${detail.modules.map(m => `\r\n                            <div class=\"module-item\">\r\n                                <span class=\"module-name\">${this.escapeHtml(m.name)}</span>\r\n                                <span class=\"module-version\">v${this.escapeHtml(m.version)}</span>\r\n                            </div>\r\n                        `).join('')}\r\n                    </div>\r\n                </div>\r\n            </div>\r\n        `;\r\n    }\r\n\r\n    /**\r\n     * Execute a pipeline by reference  shows an inline input form\r\n     */\r\n    private async executePipeline(ref: string): Promise<void> {\r\n        const detailContainer = document.getElementById(this.pipelineDetailId)!;\r\n\r\n        // Fetch pipeline detail for input schema\r\n        try {\r\n            const detailResp = await fetch(`/pipelines/${encodeURIComponent(ref)}`);\r\n            if (!detailResp.ok) throw new Error('Failed to load pipeline details');\r\n            const detail: PipelineDetailResponse = await detailResp.json();\r\n\r\n            const inputEntries = Object.entries(detail.inputSchema);\r\n            detailContainer.innerHTML = `\r\n                <div class=\"pipeline-execute-form\">\r\n                    <h3>Execute: ${this.escapeHtml(ref)}</h3>\r\n                    ${inputEntries.length > 0 ? `\r\n                        <div class=\"execute-inputs\">\r\n                            ${inputEntries.map(([name, type]) => `\r\n                                <div class=\"input-field\">\r\n                                    <label for=\"pipeline-input-${name}\">${this.escapeHtml(name)}</label>\r\n                                    ${this.renderInputForType(name, type)}\r\n                                    <span class=\"type-hint\">${this.escapeHtml(type)}</span>\r\n                                </div>\r\n                            `).join('')}\r\n                        </div>\r\n                    ` : '<p class=\"placeholder-text\">This pipeline has no inputs</p>'}\r\n                    <div class=\"execute-actions\">\r\n                        <button class=\"primary-btn\" id=\"pipeline-execute-btn\">\r\n                            <svg viewBox=\"0 0 24 24\" width=\"16\" height=\"16\">\r\n                                <path fill=\"currentColor\" d=\"M8 5v14l11-7z\"/>\r\n                            </svg>\r\n                            Execute\r\n                        </button>\r\n                        <button class=\"pipeline-btn\" id=\"pipeline-execute-cancel\">Cancel</button>\r\n                    </div>\r\n                    <div id=\"pipeline-execute-result\"></div>\r\n                </div>\r\n            `;\r\n\r\n            // Wire up execute button\r\n            document.getElementById('pipeline-execute-btn')!.addEventListener('click', async () => {\r\n                const inputs = this.collectInputs(detail.inputSchema);\r\n                await this.runExecution(ref, inputs);\r\n            });\r\n\r\n            // Wire up cancel button\r\n            document.getElementById('pipeline-execute-cancel')!.addEventListener('click', () => {\r\n                this.selectPipeline(ref);\r\n            });\r\n        } catch (error) {\r\n            detailContainer.innerHTML = `\r\n                <div class=\"output-error\">\r\n                    ${this.escapeHtml((error as Error).message)}\r\n                </div>\r\n            `;\r\n        }\r\n    }\r\n\r\n    /**\r\n     * Run the actual execution call and display results\r\n     */\r\n    private async runExecution(ref: string, inputs: Record<string, unknown>): Promise<void> {\r\n        const resultContainer = document.getElementById('pipeline-execute-result')!;\r\n        resultContainer.innerHTML = `\r\n            <div class=\"loading-indicator\">\r\n                <div class=\"spinner\" style=\"width: 20px; height: 20px;\"></div>\r\n                <span>Executing...</span>\r\n            </div>\r\n        `;\r\n\r\n        try {\r\n            const response = await fetch('/execute', {\r\n                method: 'POST',\r\n                headers: { 'Content-Type': 'application/json' },\r\n                body: JSON.stringify({ ref, inputs })\r\n            });\r\n\r\n            const result: CoreExecuteResponse = await response.json();\r\n\r\n            if (result.status === 'suspended') {\r\n                resultContainer.innerHTML = `\r\n                    <div class=\"output-suspended\">\r\n                        <div class=\"output-header\">\r\n                            <span class=\"status-badge suspended\">Suspended</span>\r\n                            ${result.executionId ? `<span class=\"execution-id\">${result.executionId}</span>` : ''}\r\n                        </div>\r\n                        ${result.missingInputs ? `\r\n                            <div class=\"missing-inputs\">\r\n                                <h4>Missing Inputs</h4>\r\n                                ${Object.entries(result.missingInputs).map(([name, type]) => `\r\n                                    <div class=\"schema-item\">\r\n                                        <span class=\"schema-name\">${this.escapeHtml(name)}</span>\r\n                                        <span class=\"schema-type\">${this.escapeHtml(type)}</span>\r\n                                    </div>\r\n                                `).join('')}\r\n                            </div>\r\n                        ` : ''}\r\n                        ${Object.keys(result.outputs).length > 0 ? `\r\n                            <div class=\"partial-outputs\">\r\n                                <h4>Partial Outputs</h4>\r\n                                <pre class=\"output-json\">${this.escapeHtml(JSON.stringify(result.outputs, null, 2))}</pre>\r\n                            </div>\r\n                        ` : ''}\r\n                    </div>\r\n                `;\r\n                // Refresh suspended list\r\n                this.loadSuspended();\r\n            } else if (result.success) {\r\n                resultContainer.innerHTML = `\r\n                    <div class=\"output-success\">\r\n                        <div class=\"output-header\">\r\n                            <span class=\"status-badge completed\">Completed</span>\r\n                        </div>\r\n                        <pre class=\"output-json\">${this.escapeHtml(JSON.stringify(result.outputs, null, 2))}</pre>\r\n                    </div>\r\n                `;\r\n            } else {\r\n                resultContainer.innerHTML = `\r\n                    <div class=\"output-error\">\r\n                        <div class=\"output-header\">\r\n                            <span class=\"status-badge failed\">Failed</span>\r\n                        </div>\r\n                        <pre>${this.escapeHtml(result.error || 'Execution failed')}</pre>\r\n                    </div>\r\n                `;\r\n            }\r\n        } catch (error) {\r\n            resultContainer.innerHTML = `\r\n                <div class=\"output-error\">\r\n                    ${this.escapeHtml((error as Error).message)}\r\n                </div>\r\n            `;\r\n        }\r\n    }\r\n\r\n    /**\r\n     * Reload a pipeline\r\n     */\r\n    private async reloadPipeline(name: string): Promise<void> {\r\n        try {\r\n            const response = await fetch(`/pipelines/${encodeURIComponent(name)}/reload`, {\r\n                method: 'POST',\r\n                headers: { 'Content-Type': 'application/json' },\r\n                body: JSON.stringify({})\r\n            });\r\n\r\n            const result: ReloadResponse = await response.json();\r\n            if (result.success) {\r\n                await this.loadPipelines();\r\n                if (result.canary) {\r\n                    this.showCanary(name, result.canary);\r\n                }\r\n            }\r\n        } catch (error) {\r\n            console.error('Error reloading pipeline:', error);\r\n        }\r\n    }\r\n\r\n    /**\r\n     * Toggle version history for a pipeline\r\n     */\r\n    private async toggleVersions(name: string): Promise<void> {\r\n        // Find the pipeline card and its versions panel\r\n        const listContainer = document.getElementById(this.pipelinesListId)!;\r\n        const card = listContainer.querySelector(`.pipeline-card[data-alias=\"${name}\"]`);\r\n        if (!card) return;\r\n\r\n        const hash = (card as HTMLElement).dataset.hash!;\r\n        const versionsPanel = document.getElementById(`versions-${hash}`)!;\r\n\r\n        if (this.expandedVersions.has(name)) {\r\n            versionsPanel.style.display = 'none';\r\n            this.expandedVersions.delete(name);\r\n            return;\r\n        }\r\n\r\n        try {\r\n            const response = await fetch(`/pipelines/${encodeURIComponent(name)}/versions`);\r\n            if (!response.ok) {\r\n                if (response.status === 400) {\r\n                    versionsPanel.innerHTML = '<div class=\"placeholder-text\">Versioning not enabled</div>';\r\n                    versionsPanel.style.display = 'block';\r\n                    this.expandedVersions.add(name);\r\n                    return;\r\n                }\r\n                throw new Error('Failed to load versions');\r\n            }\r\n\r\n            const data: PipelineVersionsResponse = await response.json();\r\n            this.renderVersionHistory(versionsPanel, name, data);\r\n            versionsPanel.style.display = 'block';\r\n            this.expandedVersions.add(name);\r\n        } catch (error) {\r\n            console.error('Error loading versions:', error);\r\n            versionsPanel.innerHTML = `<div class=\"output-error\">${this.escapeHtml((error as Error).message)}</div>`;\r\n            versionsPanel.style.display = 'block';\r\n            this.expandedVersions.add(name);\r\n        }\r\n    }\r\n\r\n    /**\r\n     * Render version history panel\r\n     */\r\n    private renderVersionHistory(container: HTMLElement, name: string, data: PipelineVersionsResponse): void {\r\n        container.innerHTML = `\r\n            <div class=\"versions-list\">\r\n                <h4>Version History</h4>\r\n                ${data.versions.map(v => `\r\n                    <div class=\"version-item ${v.active ? 'active' : ''}\">\r\n                        <div class=\"version-header\">\r\n                            <span class=\"version-number\">v${v.version}</span>\r\n                            <span class=\"version-hash\">${v.structuralHash.substring(0, 12)}</span>\r\n                            ${v.active ? '<span class=\"version-active-badge\">Active</span>' : ''}\r\n                        </div>\r\n                        <div class=\"version-meta\">\r\n                            <span>${this.formatDate(v.createdAt)}</span>\r\n                            ${!v.active ? `<button class=\"pipeline-btn pipeline-btn-sm\" data-action=\"rollback-version\" data-name=\"${this.escapeHtml(name)}\" data-version=\"${v.version}\">Rollback</button>` : ''}\r\n                        </div>\r\n                    </div>\r\n                `).join('')}\r\n            </div>\r\n        `;\r\n\r\n        // Attach rollback handlers\r\n        container.querySelectorAll('[data-action=\"rollback-version\"]').forEach(btn => {\r\n            btn.addEventListener('click', async (e: Event) => {\r\n                e.stopPropagation();\r\n                const el = e.currentTarget as HTMLElement;\r\n                await this.rollbackToVersion(el.dataset.name!, parseInt(el.dataset.version!));\r\n            });\r\n        });\r\n    }\r\n\r\n    /**\r\n     * Rollback to a specific version\r\n     */\r\n    private async rollbackToVersion(name: string, version: number): Promise<void> {\r\n        try {\r\n            const response = await fetch(`/pipelines/${encodeURIComponent(name)}/rollback/${version}`, {\r\n                method: 'POST'\r\n            });\r\n\r\n            if (response.ok) {\r\n                await this.loadPipelines();\r\n                if (this.selectedPipeline === name) {\r\n                    await this.selectPipeline(name);\r\n                }\r\n            }\r\n        } catch (error) {\r\n            console.error('Error rolling back:', error);\r\n        }\r\n    }\r\n\r\n    /**\r\n     * Delete a pipeline\r\n     */\r\n    private async deletePipeline(hash: string): Promise<void> {\r\n        try {\r\n            const response = await fetch(`/pipelines/${hash}`, { method: 'DELETE' });\r\n            if (response.ok) {\r\n                await this.loadPipelines();\r\n                // Clear detail if the deleted pipeline was selected\r\n                const detailContainer = document.getElementById(this.pipelineDetailId)!;\r\n                detailContainer.innerHTML = '<p class=\"placeholder-text\">Select a pipeline to view details</p>';\r\n            }\r\n        } catch (error) {\r\n            console.error('Error deleting pipeline:', error);\r\n        }\r\n    }\r\n\r\n    /**\r\n     * Check for active canary deployments on all aliased pipelines.\r\n     * Fetches canary status in parallel using Promise.all for performance.\r\n     */\r\n    private async checkCanaries(): Promise<void> {\r\n        const checks = this.pipelines.flatMap(pipeline =>\r\n            pipeline.aliases.map(alias =>\r\n                fetch(`/pipelines/${encodeURIComponent(alias)}/canary`)\r\n                    .then(async response => {\r\n                        if (response.ok) {\r\n                            const state: CanaryStateResponse = await response.json();\r\n                            this.showCanary(alias, state);\r\n                        }\r\n                    })\r\n                    .catch(() => {\r\n                        // No canary or router not configured  ignore\r\n                    })\r\n            )\r\n        );\r\n        await Promise.all(checks);\r\n    }\r\n\r\n    /**\r\n     * Show canary state for a pipeline\r\n     */\r\n    private showCanary(name: string, state: CanaryStateResponse): void {\r\n        const panel = document.getElementById(`canary-${name}`);\r\n        if (!panel) return;\r\n\r\n        const weightPct = Math.round(state.currentWeight * 100);\r\n        const oldMetrics = state.metrics.oldVersion;\r\n        const newMetrics = state.metrics.newVersion;\r\n        const oldErrorRate = oldMetrics.requests > 0 ? ((oldMetrics.failures / oldMetrics.requests) * 100).toFixed(1) : '0.0';\r\n        const newErrorRate = newMetrics.requests > 0 ? ((newMetrics.failures / newMetrics.requests) * 100).toFixed(1) : '0.0';\r\n\r\n        panel.innerHTML = `\r\n            <div class=\"canary-status\">\r\n                <div class=\"canary-header\">\r\n                    <span class=\"canary-badge\">${this.escapeHtml(state.status)}</span>\r\n                    <span class=\"canary-info\">v${state.oldVersion.version} -> v${state.newVersion.version}</span>\r\n                </div>\r\n                <div class=\"canary-progress\">\r\n                    <div class=\"canary-progress-bar\">\r\n                        <div class=\"canary-progress-fill\" style=\"width: ${weightPct}%\"></div>\r\n                    </div>\r\n                    <span class=\"canary-progress-label\">${weightPct}% (step ${state.currentStep + 1})</span>\r\n                </div>\r\n                <div class=\"canary-metrics-table\">\r\n                    <div class=\"canary-metrics-header\">\r\n                        <span>Metric</span>\r\n                        <span>Old (v${state.oldVersion.version})</span>\r\n                        <span>New (v${state.newVersion.version})</span>\r\n                    </div>\r\n                    <div class=\"canary-metrics-row\">\r\n                        <span>Error rate</span>\r\n                        <span>${oldErrorRate}%</span>\r\n                        <span>${newErrorRate}%</span>\r\n                    </div>\r\n                    <div class=\"canary-metrics-row\">\r\n                        <span>Avg latency</span>\r\n                        <span>${oldMetrics.avgLatencyMs.toFixed(1)}ms</span>\r\n                        <span>${newMetrics.avgLatencyMs.toFixed(1)}ms</span>\r\n                    </div>\r\n                    <div class=\"canary-metrics-row\">\r\n                        <span>P99 latency</span>\r\n                        <span>${oldMetrics.p99LatencyMs.toFixed(1)}ms</span>\r\n                        <span>${newMetrics.p99LatencyMs.toFixed(1)}ms</span>\r\n                    </div>\r\n                    <div class=\"canary-metrics-row\">\r\n                        <span>Requests</span>\r\n                        <span>${oldMetrics.requests}</span>\r\n                        <span>${newMetrics.requests}</span>\r\n                    </div>\r\n                </div>\r\n                ${state.status === 'Observing' ? `\r\n                    <div class=\"canary-actions\">\r\n                        <button class=\"pipeline-btn pipeline-btn-primary pipeline-btn-sm\" data-action=\"canary-promote\" data-name=\"${this.escapeHtml(name)}\">Promote</button>\r\n                        <button class=\"pipeline-btn pipeline-btn-danger pipeline-btn-sm\" data-action=\"canary-rollback\" data-name=\"${this.escapeHtml(name)}\">Rollback</button>\r\n                    </div>\r\n                ` : ''}\r\n            </div>\r\n        `;\r\n\r\n        panel.style.display = 'block';\r\n\r\n        // Attach action handlers\r\n        panel.querySelectorAll('.pipeline-btn').forEach(btn => {\r\n            btn.addEventListener('click', (e: Event) => {\r\n                e.stopPropagation();\r\n                const el = e.currentTarget as HTMLElement;\r\n                this.handleAction(el.dataset.action!, el);\r\n            });\r\n        });\r\n    }\r\n\r\n    /**\r\n     * Promote canary to next step\r\n     */\r\n    private async canaryPromote(name: string): Promise<void> {\r\n        try {\r\n            const response = await fetch(`/pipelines/${encodeURIComponent(name)}/canary/promote`, {\r\n                method: 'POST'\r\n            });\r\n            if (response.ok) {\r\n                const state: CanaryStateResponse = await response.json();\r\n                this.showCanary(name, state);\r\n                if (state.status === 'Complete') {\r\n                    await this.loadPipelines();\r\n                }\r\n            }\r\n        } catch (error) {\r\n            console.error('Error promoting canary:', error);\r\n        }\r\n    }\r\n\r\n    /**\r\n     * Rollback canary deployment\r\n     */\r\n    private async canaryRollback(name: string): Promise<void> {\r\n        try {\r\n            const response = await fetch(`/pipelines/${encodeURIComponent(name)}/canary/rollback`, {\r\n                method: 'POST'\r\n            });\r\n            if (response.ok) {\r\n                await this.loadPipelines();\r\n            }\r\n        } catch (error) {\r\n            console.error('Error rolling back canary:', error);\r\n        }\r\n    }\r\n\r\n    /**\r\n     * Render the suspended executions list\r\n     */\r\n    private renderSuspendedList(container: HTMLElement, executions: SuspendedExecution[]): void {\r\n        if (executions.length === 0) {\r\n            container.innerHTML = '<div class=\"placeholder-text\">No suspended executions</div>';\r\n            return;\r\n        }\r\n\r\n        container.innerHTML = executions.map(exec => `\r\n            <div class=\"suspended-item\" data-id=\"${exec.executionId}\">\r\n                <div class=\"suspended-header\">\r\n                    <span class=\"execution-id\">${exec.executionId.substring(0, 8)}...</span>\r\n                    <span class=\"status-badge suspended\">Suspended</span>\r\n                </div>\r\n                <div class=\"suspended-meta\">\r\n                    <span>Hash: ${exec.structuralHash.substring(0, 12)}</span>\r\n                    <span>Resumptions: ${exec.resumptionCount}</span>\r\n                    <span>${this.formatDate(exec.createdAt)}</span>\r\n                </div>\r\n                <div class=\"suspended-missing\">\r\n                    <span class=\"missing-label\">Missing:</span>\r\n                    ${Object.entries(exec.missingInputs).map(([name, type]) =>\r\n                        `<span class=\"missing-input\">${this.escapeHtml(name)}: ${this.escapeHtml(type)}</span>`\r\n                    ).join('')}\r\n                </div>\r\n                <div class=\"suspended-actions\">\r\n                    <button class=\"pipeline-btn pipeline-btn-primary pipeline-btn-sm\" data-action=\"resume\" data-id=\"${exec.executionId}\">Resume</button>\r\n                    <button class=\"pipeline-btn pipeline-btn-danger pipeline-btn-sm\" data-action=\"delete-execution\" data-id=\"${exec.executionId}\">Delete</button>\r\n                </div>\r\n            </div>\r\n        `).join('');\r\n\r\n        // Attach action handlers\r\n        container.querySelectorAll('.pipeline-btn').forEach(btn => {\r\n            btn.addEventListener('click', (e: Event) => {\r\n                e.stopPropagation();\r\n                const el = e.currentTarget as HTMLElement;\r\n                this.handleAction(el.dataset.action!, el);\r\n            });\r\n        });\r\n    }\r\n\r\n    /**\r\n     * Resume a suspended execution  show input form in detail panel\r\n     */\r\n    private async resumeExecution(executionId: string): Promise<void> {\r\n        const detailContainer = document.getElementById(this.pipelineDetailId)!;\r\n\r\n        // Find the suspended execution in the list to get missing inputs\r\n        const listContainer = document.getElementById(this.suspendedListId)!;\r\n        const item = listContainer.querySelector(`.suspended-item[data-id=\"${executionId}\"]`);\r\n        if (!item) return;\r\n\r\n        // Fetch execution details to get missing inputs\r\n        try {\r\n            const response = await fetch(`/executions/${executionId}`);\r\n            if (!response.ok) throw new Error('Failed to load execution');\r\n            const exec: SuspendedExecution = await response.json();\r\n\r\n            const missingEntries = Object.entries(exec.missingInputs);\r\n\r\n            detailContainer.innerHTML = `\r\n                <div class=\"pipeline-execute-form\">\r\n                    <h3>Resume Execution</h3>\r\n                    <p class=\"resume-info\">Execution ${executionId.substring(0, 8)}... (${exec.resumptionCount} resumptions)</p>\r\n                    ${missingEntries.length > 0 ? `\r\n                        <div class=\"execute-inputs\">\r\n                            ${missingEntries.map(([name, type]) => `\r\n                                <div class=\"input-field\">\r\n                                    <label for=\"resume-input-${name}\">${this.escapeHtml(name)}</label>\r\n                                    ${this.renderInputForType(name, type, 'resume-input')}\r\n                                    <span class=\"type-hint\">${this.escapeHtml(type)}</span>\r\n                                </div>\r\n                            `).join('')}\r\n                        </div>\r\n                    ` : '<p class=\"placeholder-text\">No missing inputs</p>'}\r\n                    <div class=\"execute-actions\">\r\n                        <button class=\"primary-btn\" id=\"pipeline-resume-btn\">Resume</button>\r\n                        <button class=\"pipeline-btn\" id=\"pipeline-resume-cancel\">Cancel</button>\r\n                    </div>\r\n                    <div id=\"pipeline-execute-result\"></div>\r\n                </div>\r\n            `;\r\n\r\n            document.getElementById('pipeline-resume-btn')!.addEventListener('click', async () => {\r\n                const additionalInputs: Record<string, unknown> = {};\r\n                missingEntries.forEach(([name, type]) => {\r\n                    const el = document.getElementById(`resume-input-${name}`) as HTMLInputElement | HTMLTextAreaElement | null;\r\n                    if (el && el.value) {\r\n                        additionalInputs[name] = this.parseInputValue(el.value, type);\r\n                    }\r\n                });\r\n\r\n                const resultContainer = document.getElementById('pipeline-execute-result')!;\r\n                resultContainer.innerHTML = '<div class=\"loading-indicator\"><div class=\"spinner\" style=\"width: 20px; height: 20px;\"></div><span>Resuming...</span></div>';\r\n\r\n                try {\r\n                    const resp = await fetch(`/executions/${executionId}/resume`, {\r\n                        method: 'POST',\r\n                        headers: { 'Content-Type': 'application/json' },\r\n                        body: JSON.stringify({ additionalInputs })\r\n                    });\r\n                    const result: CoreExecuteResponse = await resp.json();\r\n\r\n                    if (result.status === 'suspended') {\r\n                        resultContainer.innerHTML = `\r\n                            <div class=\"output-suspended\">\r\n                                <div class=\"output-header\"><span class=\"status-badge suspended\">Still Suspended</span></div>\r\n                                ${result.missingInputs ? `<p>Missing: ${Object.keys(result.missingInputs).join(', ')}</p>` : ''}\r\n                            </div>\r\n                        `;\r\n                    } else if (result.success) {\r\n                        resultContainer.innerHTML = `\r\n                            <div class=\"output-success\">\r\n                                <div class=\"output-header\"><span class=\"status-badge completed\">Completed</span></div>\r\n                                <pre class=\"output-json\">${this.escapeHtml(JSON.stringify(result.outputs, null, 2))}</pre>\r\n                            </div>\r\n                        `;\r\n                    } else {\r\n                        resultContainer.innerHTML = `\r\n                            <div class=\"output-error\">\r\n                                <div class=\"output-header\"><span class=\"status-badge failed\">Failed</span></div>\r\n                                <pre>${this.escapeHtml(result.error || 'Resume failed')}</pre>\r\n                            </div>\r\n                        `;\r\n                    }\r\n\r\n                    // Refresh suspended list\r\n                    this.loadSuspended();\r\n                } catch (error) {\r\n                    resultContainer.innerHTML = `<div class=\"output-error\">${this.escapeHtml((error as Error).message)}</div>`;\r\n                }\r\n            });\r\n\r\n            document.getElementById('pipeline-resume-cancel')!.addEventListener('click', () => {\r\n                detailContainer.innerHTML = '<p class=\"placeholder-text\">Select a pipeline to view details</p>';\r\n            });\r\n        } catch (error) {\r\n            detailContainer.innerHTML = `<div class=\"output-error\">${this.escapeHtml((error as Error).message)}</div>`;\r\n        }\r\n    }\r\n\r\n    /**\r\n     * Delete a suspended execution\r\n     */\r\n    private async deleteExecution(executionId: string): Promise<void> {\r\n        try {\r\n            await fetch(`/executions/${executionId}`, { method: 'DELETE' });\r\n            await this.loadSuspended();\r\n        } catch (error) {\r\n            console.error('Error deleting execution:', error);\r\n        }\r\n    }\r\n\r\n    /**\r\n     * Load a file from the file browser into the PipelineStore\r\n     */\r\n    async loadFileAsPipeline(path: string): Promise<boolean> {\r\n        try {\r\n            // Fetch file content\r\n            const fileResp = await fetch(`/api/v1/file?path=${encodeURIComponent(path)}`);\r\n            if (!fileResp.ok) throw new Error('Failed to load file');\r\n            const file: FileContentResponse = await fileResp.json();\r\n\r\n            // Derive alias from filename (strip extension)\r\n            const name = file.name.replace(/\\.cst$/, '');\r\n\r\n            // Compile and store\r\n            const compileResp = await fetch('/compile', {\r\n                method: 'POST',\r\n                headers: { 'Content-Type': 'application/json' },\r\n                body: JSON.stringify({ source: file.content, name })\r\n            });\r\n\r\n            if (!compileResp.ok) throw new Error('Compilation failed');\r\n            const result = await compileResp.json();\r\n            if (!result.success) throw new Error(result.errors?.join('; ') || 'Compilation failed');\r\n\r\n            return true;\r\n        } catch (error) {\r\n            console.error('Error loading file as pipeline:', error);\r\n            return false;\r\n        }\r\n    }\r\n\r\n    /**\r\n     * Start auto-polling for canary updates\r\n     */\r\n    startPolling(intervalMs: number = 5000): void {\r\n        this.stopPolling();\r\n        this.pollInterval = setInterval(() => {\r\n            this.checkCanaries();\r\n        }, intervalMs);\r\n    }\r\n\r\n    /**\r\n     * Stop auto-polling\r\n     */\r\n    stopPolling(): void {\r\n        if (this.pollInterval) {\r\n            clearInterval(this.pollInterval);\r\n            this.pollInterval = null;\r\n        }\r\n    }\r\n\r\n    // ========== Helper methods ==========\r\n\r\n    private renderInputForType(name: string, type: string, prefix: string = 'pipeline-input'): string {\r\n        const typeLower = type.toLowerCase();\r\n        if (typeLower.includes('int') || typeLower.includes('long')) {\r\n            return `<input type=\"number\" id=\"${prefix}-${name}\" name=\"${name}\" step=\"1\">`;\r\n        }\r\n        if (typeLower.includes('double') || typeLower.includes('float')) {\r\n            return `<input type=\"number\" id=\"${prefix}-${name}\" name=\"${name}\" step=\"any\">`;\r\n        }\r\n        if (typeLower.includes('bool')) {\r\n            return `<select id=\"${prefix}-${name}\" name=\"${name}\">\r\n                <option value=\"true\">true</option>\r\n                <option value=\"false\">false</option>\r\n            </select>`;\r\n        }\r\n        if (typeLower.includes('string') || typeLower === 'cstring') {\r\n            return `<input type=\"text\" id=\"${prefix}-${name}\" name=\"${name}\" placeholder=\"Enter text...\">`;\r\n        }\r\n        return `<textarea id=\"${prefix}-${name}\" name=\"${name}\" placeholder=\"Enter JSON value...\" rows=\"2\"></textarea>`;\r\n    }\r\n\r\n    private collectInputs(schema: Record<string, string>): Record<string, unknown> {\r\n        const inputs: Record<string, unknown> = {};\r\n        for (const [name, type] of Object.entries(schema)) {\r\n            const el = document.getElementById(`pipeline-input-${name}`) as HTMLInputElement | HTMLTextAreaElement | HTMLSelectElement | null;\r\n            if (el && el.value) {\r\n                inputs[name] = this.parseInputValue(el.value, type);\r\n            }\r\n        }\r\n        return inputs;\r\n    }\r\n\r\n    private parseInputValue(value: string, type: string): unknown {\r\n        const typeLower = type.toLowerCase();\r\n        if (typeLower.includes('int') || typeLower.includes('long')) return parseInt(value, 10);\r\n        if (typeLower.includes('double') || typeLower.includes('float')) return parseFloat(value);\r\n        if (typeLower.includes('bool')) return value === 'true';\r\n        if (typeLower.includes('string') || typeLower === 'cstring') return value;\r\n        try { return JSON.parse(value); } catch { return value; }\r\n    }\r\n\r\n    private formatDate(isoString: string): string {\r\n        try {\r\n            const date = new Date(isoString);\r\n            return date.toLocaleString();\r\n        } catch {\r\n            return isoString;\r\n        }\r\n    }\r\n\r\n    private escapeHtml(text: string): string {\r\n        if (text === null || text === undefined) return '';\r\n        const div = document.createElement('div');\r\n        div.textContent = String(text);\r\n        return div.innerHTML;\r\n    }\r\n}\r\n\r\n// Export as ES module\r\nexport { PipelinesPanel };\r\n\r\n// Also assign to window for backward compatibility\r\n(window as Window).PipelinesPanel = PipelinesPanel;\r\n","/**\r\n * Constellation Dashboard - Main Application\r\n *\r\n * Wires together all components and handles navigation.\r\n * Integrates React components for new IDE features.\r\n */\r\n\r\n// Import styles for Vite bundling\r\nimport './styles/main.css';\r\n\r\n// React imports\r\nimport { createRoot, Root } from 'react-dom/client';\r\nimport { createElement } from 'react';\r\nimport { App } from './App.js';\r\nimport type { NodeValue } from './components/ValueInspector.js';\r\n\r\n// Import legacy components (they self-register on window)\r\nimport { FileBrowser } from './components/file-browser.js';\r\nimport { DagVisualizer } from './components/dag-visualizer.js';\r\nimport { ExecutionPanel } from './components/execution-panel.js';\r\nimport { CodeEditor } from './components/code-editor.js';\r\nimport { PipelinesPanel } from './components/pipelines-panel.js';\r\n\r\n// React root for IDE features\r\nlet reactRoot: Root | null = null;\r\n\r\nclass ConstellationDashboard {\r\n    // Components\r\n    private fileBrowser: FileBrowser | null;\r\n    private dagVisualizer: DagVisualizer | null;\r\n    private executionPanel: ExecutionPanel | null;\r\n    private codeEditor: CodeEditor | null;\r\n    private pipelinesPanel: PipelinesPanel | null;\r\n\r\n    // State\r\n    private currentView: 'scripts' | 'pipelines' | 'history';\r\n    private currentScriptPath: string | null;\r\n    private _currentDagVizIR: DagVizIR | null; // Prefixed with _ to indicate intentionally unused for now\r\n\r\n    // DOM elements\r\n    private elements: DashboardElements;\r\n\r\n    constructor() {\r\n        // Components\r\n        this.fileBrowser = null;\r\n        this.dagVisualizer = null;\r\n        this.executionPanel = null;\r\n        this.codeEditor = null;\r\n        this.pipelinesPanel = null;\r\n\r\n        // State\r\n        this.currentView = 'scripts';\r\n        this.currentScriptPath = null;\r\n        this._currentDagVizIR = null;\r\n\r\n        // DOM elements\r\n        this.elements = {\r\n            scriptsView: document.getElementById('scripts-view')!,\r\n            pipelinesView: document.getElementById('pipelines-view')!,\r\n            historyView: document.getElementById('history-view')!,\r\n            runBtn: document.getElementById('run-btn') as HTMLButtonElement,\r\n            refreshBtn: document.getElementById('refresh-btn') as HTMLButtonElement,\r\n            currentFile: document.getElementById('current-file')!,\r\n            nodeDetails: document.getElementById('node-details')!,\r\n            nodeDetailsPanel: document.getElementById('node-details-panel')!,\r\n            closeDetails: document.getElementById('close-details')!,\r\n            loadingOverlay: document.getElementById('loading-overlay')!,\r\n            statusMessage: document.getElementById('status-message')!,\r\n            historyFilter: document.getElementById('history-filter') as HTMLInputElement,\r\n            layoutTB: document.getElementById('layout-tb')!,\r\n            layoutLR: document.getElementById('layout-lr')!,\r\n            zoomIn: document.getElementById('zoom-in')!,\r\n            zoomOut: document.getElementById('zoom-out')!,\r\n            zoomFit: document.getElementById('zoom-fit')!,\r\n            editorDagSplit: document.getElementById('editor-dag-split')!,\r\n            splitHandle: document.getElementById('split-handle')!\r\n        };\r\n    }\r\n\r\n    /**\r\n     * Initialize the dashboard\r\n     */\r\n    async init(): Promise<void> {\r\n        this.showLoading('Initializing...');\r\n\r\n        try {\r\n            // Initialize React for new IDE features\r\n            this.initReact();\r\n\r\n            // Initialize components\r\n            this.initFileBrowser();\r\n            this.initDagVisualizer();\r\n            this.initExecutionPanel();\r\n            this.initCodeEditor();\r\n            this.initPipelinesPanel();\r\n            this.initSplitHandle();\r\n\r\n            // Set up event listeners\r\n            this.setupEventListeners();\r\n\r\n            // Load initial data\r\n            await this.fileBrowser!.load();\r\n\r\n            // Handle hash-based navigation\r\n            this.handleHashNavigation();\r\n\r\n            this.hideLoading();\r\n            this.setStatus('Ready');\r\n\r\n        } catch (error) {\r\n            console.error('Initialization error:', error);\r\n            this.hideLoading();\r\n            this.setStatus('Initialization failed');\r\n        }\r\n    }\r\n\r\n    /**\r\n     * Initialize React for new IDE features\r\n     */\r\n    private initReact(): void {\r\n        const reactRootElement = document.getElementById('react-root');\r\n        if (!reactRootElement) {\r\n            console.warn('React root element not found');\r\n            return;\r\n        }\r\n\r\n        reactRoot = createRoot(reactRootElement);\r\n\r\n        // Create React app with bridge callbacks\r\n        const appProps = {\r\n            onInsertCode: (code: string) => {\r\n                if (this.codeEditor) {\r\n                    this.codeEditor.insertText(code);\r\n                }\r\n            },\r\n            onGotoLine: (line: number, column?: number) => {\r\n                if (this.codeEditor) {\r\n                    this.codeEditor.gotoLine(line, column);\r\n                }\r\n            },\r\n            onLoadPreset: (inputs: Record<string, unknown>) => {\r\n                if (this.executionPanel) {\r\n                    this.executionPanel.loadInputValues(inputs);\r\n                }\r\n            },\r\n            onSavePreset: (name: string) => {\r\n                if (this.executionPanel) {\r\n                    const values = this.executionPanel.getInputValues();\r\n                    // The React component handles storage, we just need to get current values\r\n                    const reactBridge = (window as Window & { reactBridge?: { addPreset?: (name: string, inputs: Record<string, unknown>) => void } }).reactBridge;\r\n                    if (reactBridge?.addPreset) {\r\n                        reactBridge.addPreset(name, values);\r\n                    }\r\n                }\r\n            },\r\n        };\r\n\r\n        reactRoot.render(createElement(App, appProps));\r\n    }\r\n\r\n    /**\r\n     * Initialize the file browser component\r\n     */\r\n    private initFileBrowser(): void {\r\n        this.fileBrowser = new FileBrowser('file-tree', async (path: string) => {\r\n            await this.loadScript(path);\r\n        });\r\n    }\r\n\r\n    /**\r\n     * Initialize the DAG visualizer component\r\n     */\r\n    private initDagVisualizer(): void {\r\n        this.dagVisualizer = new DagVisualizer('dag-canvas', (nodeData: NodeDetailData | null) => {\r\n            this.showNodeDetails(nodeData);\r\n        });\r\n        this.dagVisualizer.init();\r\n    }\r\n\r\n    /**\r\n     * Initialize the execution panel component\r\n     */\r\n    private initExecutionPanel(): void {\r\n        this.executionPanel = new ExecutionPanel({\r\n            inputsFormId: 'inputs-form',\r\n            outputsDisplayId: 'outputs-display',\r\n            historyListId: 'history-list',\r\n            executionDetailId: 'execution-detail',\r\n            onExecutionSelect: async (execution: StoredExecution) => {\r\n                // Load DAG for selected execution\r\n                if (execution.dagVizIR) {\r\n                    this.dagVisualizer!.render(execution.dagVizIR);\r\n                }\r\n            }\r\n        });\r\n    }\r\n\r\n    /**\r\n     * Initialize the code editor component\r\n     */\r\n    private initCodeEditor(): void {\r\n        this.codeEditor = new CodeEditor({\r\n            containerId: 'editor-container',\r\n            textareaId: 'code-editor-textarea',\r\n            errorBannerId: 'editor-error-banner',\r\n            onPreviewResult: (dagVizIR: DagVizIR | null, errors: string[], inputs: InputParam[]) => {\r\n                this.handleLivePreview(dagVizIR, errors, inputs);\r\n            }\r\n        });\r\n        this.codeEditor.init();\r\n    }\r\n\r\n    /**\r\n     * Initialize the pipelines panel component\r\n     */\r\n    private initPipelinesPanel(): void {\r\n        this.pipelinesPanel = new PipelinesPanel({\r\n            pipelinesListId: 'pipelines-list',\r\n            pipelineDetailId: 'pipeline-detail',\r\n            suspendedListId: 'suspended-list'\r\n        });\r\n    }\r\n\r\n    /**\r\n     * Initialize the draggable split handle between editor and DAG\r\n     */\r\n    private initSplitHandle(): void {\r\n        const splitHandle = document.getElementById('split-handle')!;\r\n        const splitContainer = document.getElementById('editor-dag-split')!;\r\n        const editorContainer = document.getElementById('editor-container')!;\r\n\r\n        let isDragging = false;\r\n\r\n        splitHandle.addEventListener('mousedown', (e: MouseEvent) => {\r\n            isDragging = true;\r\n            e.preventDefault();\r\n            document.body.style.cursor = 'col-resize';\r\n            document.body.style.userSelect = 'none';\r\n        });\r\n\r\n        document.addEventListener('mousemove', (e: MouseEvent) => {\r\n            if (!isDragging) return;\r\n            const rect = splitContainer.getBoundingClientRect();\r\n            const offset = e.clientX - rect.left;\r\n            const pct = (offset / rect.width) * 100;\r\n            const clamped = Math.max(15, Math.min(85, pct));\r\n            editorContainer.style.width = clamped + '%';\r\n        });\r\n\r\n        document.addEventListener('mouseup', () => {\r\n            if (!isDragging) return;\r\n            isDragging = false;\r\n            document.body.style.cursor = '';\r\n            document.body.style.userSelect = '';\r\n            // Notify Cytoscape to recalculate after resize\r\n            this.dagVisualizer?.fit();\r\n        });\r\n    }\r\n\r\n    /**\r\n     * Handle live preview results from the code editor\r\n     */\r\n    private handleLivePreview(dagVizIR: DagVizIR | null, errors: string[], inputs: InputParam[]): void {\r\n        if (dagVizIR) {\r\n            this.dagVisualizer!.render(dagVizIR);\r\n            this._currentDagVizIR = dagVizIR;\r\n        } else if (!errors || errors.length === 0) {\r\n            // Empty source -- clear the DAG\r\n            this.dagVisualizer!.clear();\r\n            this._currentDagVizIR = null;\r\n        }\r\n\r\n        if (inputs && inputs.length > 0) {\r\n            const inputsForm = document.getElementById('inputs-form')!;\r\n            // Save existing input values by name\r\n            const savedValues: Record<string, string> = {};\r\n            inputsForm.querySelectorAll('[id^=\"input-\"]').forEach(el => {\r\n                const name = (el as HTMLInputElement).name;\r\n                if (name) savedValues[name] = (el as HTMLInputElement).value;\r\n            });\r\n            // Re-render input form with new inputs\r\n            this.executionPanel!.currentInputs = inputs;\r\n            this.executionPanel!.renderInputForm(inputsForm, inputs);\r\n            // Restore values for matching input names\r\n            inputs.forEach(input => {\r\n                if (savedValues[input.name] !== undefined) {\r\n                    const el = document.getElementById(`input-${input.name}`) as HTMLInputElement | null;\r\n                    if (el) el.value = savedValues[input.name];\r\n                }\r\n            });\r\n        }\r\n    }\r\n\r\n    /**\r\n     * Set up event listeners\r\n     */\r\n    private setupEventListeners(): void {\r\n        // Navigation buttons\r\n        document.querySelectorAll('.nav-btn').forEach(btn => {\r\n            btn.addEventListener('click', () => {\r\n                this.switchView((btn as HTMLElement).dataset.view as 'scripts' | 'pipelines' | 'history');\r\n            });\r\n        });\r\n\r\n        // Run button\r\n        this.elements.runBtn.addEventListener('click', () => {\r\n            this.executeCurrentScript();\r\n        });\r\n\r\n        // Refresh button\r\n        this.elements.refreshBtn.addEventListener('click', () => {\r\n            this.refresh();\r\n        });\r\n\r\n        // Close details button\r\n        this.elements.closeDetails.addEventListener('click', () => {\r\n            this.hideNodeDetails();\r\n        });\r\n\r\n        // Layout controls\r\n        this.elements.layoutTB.addEventListener('click', () => {\r\n            this.setLayoutDirection('TB');\r\n        });\r\n\r\n        this.elements.layoutLR.addEventListener('click', () => {\r\n            this.setLayoutDirection('LR');\r\n        });\r\n\r\n        // Zoom controls\r\n        this.elements.zoomIn.addEventListener('click', () => {\r\n            this.dagVisualizer!.zoomIn();\r\n        });\r\n\r\n        this.elements.zoomOut.addEventListener('click', () => {\r\n            this.dagVisualizer!.zoomOut();\r\n        });\r\n\r\n        this.elements.zoomFit.addEventListener('click', () => {\r\n            this.dagVisualizer!.fit();\r\n        });\r\n\r\n        // History filter\r\n        let filterTimeout: ReturnType<typeof setTimeout>;\r\n        this.elements.historyFilter.addEventListener('input', (e: Event) => {\r\n            clearTimeout(filterTimeout);\r\n            filterTimeout = setTimeout(() => {\r\n                this.executionPanel!.loadHistory((e.target as HTMLInputElement).value);\r\n            }, 300);\r\n        });\r\n\r\n        // Keyboard shortcuts\r\n        document.addEventListener('keydown', (e: KeyboardEvent) => {\r\n            // Ctrl/Cmd + Enter to run\r\n            if ((e.ctrlKey || e.metaKey) && e.key === 'Enter') {\r\n                if (this.currentScriptPath) {\r\n                    this.executeCurrentScript();\r\n                }\r\n            }\r\n        });\r\n\r\n        // Hash change\r\n        window.addEventListener('hashchange', () => {\r\n            this.handleHashNavigation();\r\n        });\r\n    }\r\n\r\n    /**\r\n     * Switch between views\r\n     */\r\n    private switchView(view: 'scripts' | 'pipelines' | 'history'): void {\r\n        this.currentView = view;\r\n\r\n        // Update nav buttons\r\n        document.querySelectorAll('.nav-btn').forEach(btn => {\r\n            btn.classList.toggle('active', (btn as HTMLElement).dataset.view === view);\r\n        });\r\n\r\n        // Update view visibility\r\n        this.elements.scriptsView.classList.toggle('active', view === 'scripts');\r\n        this.elements.pipelinesView.classList.toggle('active', view === 'pipelines');\r\n        this.elements.historyView.classList.toggle('active', view === 'history');\r\n\r\n        // Load data for view\r\n        if (view === 'history') {\r\n            this.executionPanel!.loadHistory();\r\n        } else if (view === 'pipelines') {\r\n            this.pipelinesPanel!.loadPipelines();\r\n            this.pipelinesPanel!.loadSuspended();\r\n            this.pipelinesPanel!.startPolling();\r\n        }\r\n\r\n        // Stop polling when leaving pipelines view\r\n        if (view !== 'pipelines') {\r\n            this.pipelinesPanel?.stopPolling();\r\n        }\r\n\r\n        // Update URL hash\r\n        window.location.hash = view === 'scripts' ? '' : `/${view}`;\r\n    }\r\n\r\n    /**\r\n     * Handle URL hash navigation\r\n     */\r\n    private handleHashNavigation(): void {\r\n        const hash = window.location.hash;\r\n\r\n        if (hash.startsWith('#/pipelines')) {\r\n            this.switchView('pipelines');\r\n        } else if (hash.startsWith('#/history')) {\r\n            this.switchView('history');\r\n        } else if (hash.startsWith('#/executions/')) {\r\n            const executionId = hash.replace('#/executions/', '');\r\n            this.switchView('history');\r\n            this.executionPanel!.selectExecution(executionId);\r\n        } else {\r\n            this.switchView('scripts');\r\n        }\r\n    }\r\n\r\n    /**\r\n     * Load a script\r\n     */\r\n    private async loadScript(path: string): Promise<void> {\r\n        this.showLoading('Loading script...');\r\n\r\n        try {\r\n            this.currentScriptPath = path;\r\n\r\n            // Update UI\r\n            this.elements.currentFile.textContent = path;\r\n            this.elements.runBtn.disabled = false;\r\n\r\n            // Notify React of script path change (for presets)\r\n            const reactBridge = (window as Window & { reactBridge?: { setCurrentScriptPath?: (path: string) => void } }).reactBridge;\r\n            if (reactBridge?.setCurrentScriptPath) {\r\n                reactBridge.setCurrentScriptPath(path);\r\n            }\r\n\r\n            // Load script metadata\r\n            const scriptData = await this.executionPanel!.loadScript(path);\r\n\r\n            // Populate code editor with file content\r\n            if (this.codeEditor) {\r\n                this.codeEditor.loadSource(scriptData.content);\r\n            }\r\n\r\n            // Try to compile and show initial DAG\r\n            await this.compileAndShowDag(scriptData.content);\r\n\r\n            this.setStatus(`Loaded: ${path}`);\r\n\r\n        } catch (error) {\r\n            console.error('Error loading script:', error);\r\n            this.setStatus(`Error: ${(error as Error).message}`);\r\n        } finally {\r\n            this.hideLoading();\r\n        }\r\n    }\r\n\r\n    /**\r\n     * Compile script and show DAG visualization\r\n     */\r\n    private async compileAndShowDag(source: string): Promise<void> {\r\n        try {\r\n            const response = await fetch('/api/v1/preview', {\r\n                method: 'POST',\r\n                headers: { 'Content-Type': 'application/json' },\r\n                body: JSON.stringify({ source: source })\r\n            });\r\n\r\n            const result: PreviewResponse = await response.json();\r\n\r\n            if (result.success && result.dagVizIR) {\r\n                this.dagVisualizer!.render(result.dagVizIR);\r\n            } else {\r\n                // Compilation failed, show placeholder\r\n                this.dagVisualizer!.clear();\r\n                if (result.errors && result.errors.length > 0) {\r\n                    console.warn('Compilation errors:', result.errors);\r\n                }\r\n            }\r\n\r\n        } catch (error) {\r\n            console.error('Error compiling for preview:', error);\r\n            this.dagVisualizer!.clear();\r\n        }\r\n    }\r\n\r\n    /**\r\n     * Execute the current script\r\n     */\r\n    private async executeCurrentScript(): Promise<void> {\r\n        if (!this.currentScriptPath) return;\r\n\r\n        this.showLoading('Executing...');\r\n        this.setStatus('Executing script...');\r\n\r\n        try {\r\n            const result = await this.executionPanel!.execute(\r\n                this.currentScriptPath,\r\n                this.dagVisualizer!\r\n            );\r\n\r\n            if (result.success) {\r\n                this.setStatus('Execution completed');\r\n            } else {\r\n                this.setStatus(`Execution failed: ${result.error || 'Unknown error'}`);\r\n            }\r\n\r\n        } catch (error) {\r\n            console.error('Execution error:', error);\r\n            this.setStatus(`Error: ${(error as Error).message}`);\r\n        } finally {\r\n            this.hideLoading();\r\n        }\r\n    }\r\n\r\n    /**\r\n     * Set layout direction for DAG\r\n     */\r\n    private setLayoutDirection(direction: string): void {\r\n        this.elements.layoutTB.classList.toggle('active', direction === 'TB');\r\n        this.elements.layoutLR.classList.toggle('active', direction === 'LR');\r\n        this.dagVisualizer!.setLayoutDirection(direction);\r\n    }\r\n\r\n    /**\r\n     * Show node details panel\r\n     */\r\n    private showNodeDetails(nodeData: NodeDetailData | null): void {\r\n        if (!nodeData) {\r\n            this.hideNodeDetails();\r\n            return;\r\n        }\r\n\r\n        // Also update React's ValueInspector\r\n        const reactBridge = (window as Window & { reactBridge?: { setSelectedNodeValue?: (value: NodeValue | null) => void } }).reactBridge;\r\n        if (reactBridge?.setSelectedNodeValue) {\r\n            reactBridge.setSelectedNodeValue({\r\n                nodeId: nodeData.id,\r\n                nodeName: nodeData.label,\r\n                status: (nodeData.status?.toLowerCase() || 'pending') as 'pending' | 'running' | 'completed' | 'failed',\r\n                value: nodeData.value,\r\n                error: nodeData.error,\r\n                durationMs: nodeData.durationMs,\r\n            });\r\n        }\r\n\r\n        const kindClass = (nodeData.kind || 'default').toLowerCase();\r\n\r\n        this.elements.nodeDetails.innerHTML = `\r\n            <div class=\"detail-section\">\r\n                <h4>Label</h4>\r\n                <div class=\"value\">${this.escapeHtml(nodeData.label)}</div>\r\n            </div>\r\n\r\n            <div class=\"detail-section\">\r\n                <h4>Kind</h4>\r\n                <span class=\"node-kind-badge ${kindClass}\">${nodeData.kind}</span>\r\n            </div>\r\n\r\n            <div class=\"detail-section\">\r\n                <h4>Type</h4>\r\n                <div class=\"value\">${this.escapeHtml(nodeData.typeSignature)}</div>\r\n            </div>\r\n\r\n            ${nodeData.status ? `\r\n                <div class=\"detail-section\">\r\n                    <h4>Status</h4>\r\n                    <span class=\"status-badge ${nodeData.status.toLowerCase()}\">${nodeData.status}</span>\r\n                    ${nodeData.durationMs ? `<span class=\"duration\">${nodeData.durationMs}ms</span>` : ''}\r\n                </div>\r\n            ` : ''}\r\n\r\n            ${nodeData.value !== undefined ? `\r\n                <div class=\"detail-section\">\r\n                    <h4>Value</h4>\r\n                    <pre class=\"value\">${this.escapeHtml(JSON.stringify(nodeData.value, null, 2))}</pre>\r\n                </div>\r\n            ` : ''}\r\n\r\n            ${nodeData.error ? `\r\n                <div class=\"detail-section\">\r\n                    <h4>Error</h4>\r\n                    <div class=\"value output-error\">${this.escapeHtml(nodeData.error)}</div>\r\n                </div>\r\n            ` : ''}\r\n        `;\r\n\r\n        this.elements.nodeDetailsPanel.style.display = 'flex';\r\n    }\r\n\r\n    /**\r\n     * Hide node details panel\r\n     */\r\n    private hideNodeDetails(): void {\r\n        this.elements.nodeDetails.innerHTML = '<p class=\"placeholder-text\">Click a node to see details</p>';\r\n        this.elements.nodeDetailsPanel.style.display = 'none';\r\n        this.dagVisualizer!.deselectAll();\r\n\r\n        // Also clear React's ValueInspector\r\n        const reactBridge = (window as Window & { reactBridge?: { setSelectedNodeValue?: (value: NodeValue | null) => void } }).reactBridge;\r\n        if (reactBridge?.setSelectedNodeValue) {\r\n            reactBridge.setSelectedNodeValue(null);\r\n        }\r\n    }\r\n\r\n    /**\r\n     * Refresh current view\r\n     */\r\n    private async refresh(): Promise<void> {\r\n        if (this.currentView === 'scripts') {\r\n            await this.fileBrowser!.load();\r\n            if (this.currentScriptPath) {\r\n                await this.loadScript(this.currentScriptPath);\r\n            }\r\n        } else if (this.currentView === 'pipelines') {\r\n            await this.pipelinesPanel!.loadPipelines();\r\n            await this.pipelinesPanel!.loadSuspended();\r\n        } else if (this.currentView === 'history') {\r\n            await this.executionPanel!.loadHistory(this.elements.historyFilter.value);\r\n        }\r\n    }\r\n\r\n    /**\r\n     * Show loading overlay\r\n     */\r\n    private showLoading(message: string = 'Loading...'): void {\r\n        const loadingText = this.elements.loadingOverlay.querySelector('.loading-text');\r\n        if (loadingText) {\r\n            loadingText.textContent = message;\r\n        }\r\n        this.elements.loadingOverlay.classList.remove('hidden');\r\n    }\r\n\r\n    /**\r\n     * Hide loading overlay\r\n     */\r\n    private hideLoading(): void {\r\n        this.elements.loadingOverlay.classList.add('hidden');\r\n    }\r\n\r\n    /**\r\n     * Set status bar message\r\n     */\r\n    private setStatus(message: string): void {\r\n        this.elements.statusMessage.textContent = message;\r\n    }\r\n\r\n    /**\r\n     * Escape HTML to prevent XSS\r\n     */\r\n    private escapeHtml(text: string): string {\r\n        if (text === null || text === undefined) return '';\r\n        const div = document.createElement('div');\r\n        div.textContent = String(text);\r\n        return div.innerHTML;\r\n    }\r\n}\r\n\r\n// Initialize dashboard when DOM is ready\r\ndocument.addEventListener('DOMContentLoaded', () => {\r\n    (window as Window).dashboard = new ConstellationDashboard();\r\n    (window as Window).dashboard.init();\r\n});\r\n"],"file":"static/js/main.js"}