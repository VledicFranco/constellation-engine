const __vite__mapDeps=(i,m=__vite__mapDeps,d=(m.f||(m.f=["static/js/monaco-D5EkTvSq.js","static/css/monaco.css"])))=>i.map(i=>d[i]);
import{_}from"./monaco-D5EkTvSq.js";import{j as c}from"./main.js";import{r as n}from"./zustand-BwY1I4TT.js";import"./react-Bi0AA0xA.js";const s={container:{width:"100%",height:"100%",position:"relative"},loading:{display:"flex",alignItems:"center",justifyContent:"center",height:"100%",color:"var(--text-muted, #6e7681)",fontSize:"14px",gap:"8px"},spinner:{width:"20px",height:"20px",border:"2px solid var(--border-primary, #30363d)",borderTopColor:"var(--accent-primary, #58a6ff)",borderRadius:"50%",animation:"spin 1s linear infinite"},editorContainer:{width:"100%",height:"100%"},error:{display:"flex",alignItems:"center",justifyContent:"center",height:"100%",color:"var(--status-failed, #f85149)",fontSize:"14px",padding:"20px",textAlign:"center"}},M={comments:{lineComment:"#"},brackets:[["{","}"],["[","]"],["(",")"]],autoClosingPairs:[{open:"{",close:"}"},{open:"[",close:"]"},{open:"(",close:")"},{open:'"',close:'"'},{open:"'",close:"'"}],surroundingPairs:[{open:"{",close:"}"},{open:"[",close:"]"},{open:"(",close:")"},{open:'"',close:'"'},{open:"'",close:"'"}]},z={tokenizer:{root:[[/#.*$/,"comment"],[/\b(in|out|when|module|import|from|as|true|false|null)\b/,"keyword"],[/:\s*(String|Int|Float|Boolean|List|Map|Any|Option)\b/,"type"],[/[A-Z][a-zA-Z0-9_]*(?=\s*\()/,"function"],[/[a-z_][a-zA-Z0-9_]*(?=\s*=)/,"variable"],[/[=+\-*/<>!&|?:]+/,"operator"],[/"([^"\\]|\\.)*"/,"string"],[/'([^'\\]|\\.)*'/,"string"],[/\b\d+\.?\d*\b/,"number"],[/[a-zA-Z_][a-zA-Z0-9_]*/,"identifier"],[/[{}()\[\]]/,"delimiter.bracket"],[/[,.]/,"delimiter"]]}},V={base:"vs-dark",inherit:!0,rules:[{token:"comment",foreground:"6e7681",fontStyle:"italic"},{token:"keyword",foreground:"ff7b72"},{token:"type",foreground:"79c0ff"},{token:"function",foreground:"d2a8ff"},{token:"variable",foreground:"ffa657"},{token:"string",foreground:"a5d6ff"},{token:"number",foreground:"79c0ff"},{token:"operator",foreground:"ff7b72"},{token:"identifier",foreground:"c9d1d9"},{token:"delimiter.bracket",foreground:"8b949e"},{token:"delimiter",foreground:"8b949e"}],colors:{"editor.background":"#0d1117","editor.foreground":"#c9d1d9","editor.lineHighlightBackground":"#161b22","editor.selectionBackground":"#264f78","editorCursor.foreground":"#58a6ff","editorLineNumber.foreground":"#6e7681","editorLineNumber.activeForeground":"#c9d1d9","editor.inactiveSelectionBackground":"#264f7855"}};function N({value:l,onChange:d,onSave:u,language:y="constellation",theme:x="constellation-dark",readOnly:C=!1,height:L="100%",onEditorReady:f}){const g=n.useRef(null),t=n.useRef(null),a=n.useRef(null),[m,p]=n.useState(!0),[b,v]=n.useState(null);n.useEffect(()=>{let o=!1;return(async()=>{try{const e=await _(()=>import("./monaco-D5EkTvSq.js").then(r=>r.e),__vite__mapDeps([0,1]));if(o)return;if(a.current=e,e.languages.getLanguages().some(r=>r.id==="constellation")||(e.languages.register({id:"constellation"}),e.languages.setLanguageConfiguration("constellation",M),e.languages.setMonarchTokensProvider("constellation",z)),e.editor.defineTheme("constellation-dark",V),g.current){const r=e.editor.create(g.current,{value:l,language:y,theme:x,readOnly:C,automaticLayout:!0,minimap:{enabled:!1},fontSize:13,fontFamily:"'SF Mono', 'Consolas', 'Monaco', monospace",lineNumbers:"on",scrollBeyondLastLine:!1,wordWrap:"on",tabSize:2,insertSpaces:!0,renderWhitespace:"selection",padding:{top:8,bottom:8}});t.current=r,r.onDidChangeModelContent(()=>{const w=r.getValue();d==null||d(w)}),r.addCommand(e.KeyMod.CtrlCmd|e.KeyCode.KeyS,()=>{u==null||u(r.getValue())}),f==null||f(r)}p(!1)}catch(e){console.error("Failed to load Monaco editor:",e),v("Failed to load editor. Please refresh the page."),p(!1)}})(),()=>{o=!0,t.current&&a.current&&t.current.dispose()}},[]),n.useEffect(()=>{if(t.current&&a.current){const o=t.current;o.getValue()!==l&&o.setValue(l)}},[l]);const k=n.useCallback(o=>{if(t.current&&a.current){const i=t.current,e=i.getSelection();if(e){const r={startLineNumber:e.startLineNumber,startColumn:e.startColumn,endLineNumber:e.startLineNumber,endColumn:e.startColumn};i.executeEdits("insert",[{range:r,text:o}]),i.focus()}}},[]),h=n.useCallback((o,i)=>{if(t.current&&a.current){const e=t.current;e.revealLineInCenter(o),e.setPosition({lineNumber:o,column:i||1}),e.focus()}},[]);return n.useEffect(()=>{const o={insertText:k,gotoLine:h,getValue:()=>t.current?t.current.getValue():"",setValue:i=>{t.current&&t.current.setValue(i)}};return window.monacoEditor=o,()=>{delete window.monacoEditor}},[k,h]),b?c.jsx("div",{style:{...s.container,...s.error},children:b}):c.jsxs("div",{style:{...s.container,height:L},children:[m&&c.jsxs("div",{style:s.loading,children:[c.jsx("div",{style:s.spinner}),"Loading editor..."]}),c.jsx("div",{ref:g,style:{...s.editorContainer,display:m?"none":"block"}})]})}export{N as MonacoEditor,N as default};
//# sourceMappingURL=MonacoEditor-TttX6-Ii.js.map
